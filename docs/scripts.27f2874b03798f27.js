(function(Un,Zn){"object"==typeof exports&&typeof module<"u"?module.exports=Zn():"function"==typeof define&&define.amd?define(Zn):(Un=typeof globalThis<"u"?globalThis:Un||self).bootstrap=Zn()})(this,function(){"use strict";const Un=new Map,Zn={set(x,m,y){Un.has(x)||Un.set(x,new Map);const S=Un.get(x);S.has(m)||0===S.size?S.set(m,y):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(S.keys())[0]}.`)},get:(x,m)=>Un.has(x)&&Un.get(x).get(m)||null,remove(x,m){if(!Un.has(x))return;const y=Un.get(x);y.delete(m),0===y.size&&Un.delete(x)}},dl="transitionend",ul=x=>(x&&window.CSS&&window.CSS.escape&&(x=x.replace(/#([^\s"#']+)/g,(m,y)=>`#${CSS.escape(y)}`)),x),ml=x=>{x.dispatchEvent(new Event(dl))},eo=x=>!(!x||"object"!=typeof x)&&(void 0!==x.jquery&&(x=x[0]),void 0!==x.nodeType),lr=x=>eo(x)?x.jquery?x[0]:x:"string"==typeof x&&x.length>0?document.querySelector(ul(x)):null,Ir=x=>{if(!eo(x)||0===x.getClientRects().length)return!1;const m="visible"===getComputedStyle(x).getPropertyValue("visibility"),y=x.closest("details:not([open])");if(!y)return m;if(y!==x){const S=x.closest("summary");if(S&&S.parentNode!==y||null===S)return!1}return m},ko=x=>!x||x.nodeType!==Node.ELEMENT_NODE||!!x.classList.contains("disabled")||(void 0!==x.disabled?x.disabled:x.hasAttribute("disabled")&&"false"!==x.getAttribute("disabled")),Zi=x=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof x.getRootNode){const m=x.getRootNode();return m instanceof ShadowRoot?m:null}return x instanceof ShadowRoot?x:x.parentNode?Zi(x.parentNode):null},Js=()=>{},ge=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Vt=[],Rn=()=>"rtl"===document.documentElement.dir,Je=x=>{var m;m=()=>{const y=ge();if(y){const S=x.NAME,$=y.fn[S];y.fn[S]=x.jQueryInterface,y.fn[S].Constructor=x,y.fn[S].noConflict=()=>(y.fn[S]=$,x.jQueryInterface)}},"loading"===document.readyState?(Vt.length||document.addEventListener("DOMContentLoaded",()=>{for(const y of Vt)y()}),Vt.push(m)):m()},ct=(x,m=[],y=x)=>"function"==typeof x?x(...m):y,dr=(x,m,y=!0)=>{if(!y)return void ct(x);const S=(V=>{if(!V)return 0;let{transitionDuration:J,transitionDelay:ue}=window.getComputedStyle(V);const Se=Number.parseFloat(J),we=Number.parseFloat(ue);return Se||we?(J=J.split(",")[0],ue=ue.split(",")[0],1e3*(Number.parseFloat(J)+Number.parseFloat(ue))):0})(m)+5;let $=!1;const I=({target:V})=>{V===m&&($=!0,m.removeEventListener(dl,I),ct(x))};m.addEventListener(dl,I),setTimeout(()=>{$||ml(m)},S)},Bt=(x,m,y,S)=>{const $=x.length;let I=x.indexOf(m);return-1===I?!y&&S?x[$-1]:x[0]:(I+=y?1:-1,S&&(I=(I+$)%$),x[Math.max(0,Math.min(I,$-1))])},kt=/[^.]*(?=\..*)\.|.*/,Q=/\..*/,Ke=/::\d+$/,Dn={};let Fr=1;const Re={mouseenter:"mouseover",mouseleave:"mouseout"},So=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function fl(x,m){return m&&`${m}::${Fr++}`||x.uidEvent||Fr++}function Z(x){const m=fl(x);return x.uidEvent=m,Dn[m]=Dn[m]||{},Dn[m]}function tn(x,m,y=null){return Object.values(x).find(S=>S.callable===m&&S.delegationSelector===y)}function gl(x,m,y){const S="string"==typeof m,$=S?y:m||y;let I=ea(x);return So.has(I)||(I=x),[S,$,I]}function se(x,m,y,S,$){if("string"!=typeof m||!x)return;let[I,V,J]=gl(m,y,S);var He;m in Re&&(He=V,V=function(je){if(!je.relatedTarget||je.relatedTarget!==je.delegateTarget&&!je.delegateTarget.contains(je.relatedTarget))return He.call(this,je)});const ue=Z(x),Se=ue[J]||(ue[J]={}),we=tn(Se,V,I?y:null);if(we)return void(we.oneOff=we.oneOff&&$);const ye=fl(V,m.replace(kt,"")),qe=I?function(Me,He,je){return function $e(mt){const ft=Me.querySelectorAll(He);for(let{target:Ve}=mt;Ve&&Ve!==this;Ve=Ve.parentNode)for(const Ze of ft)if(Ze===Ve)return at(mt,{delegateTarget:Ve}),$e.oneOff&&ee.off(Me,mt.type,He,je),je.apply(Ve,[mt])}}(x,y,V):function(Me,He){return function je($e){return at($e,{delegateTarget:Me}),je.oneOff&&ee.off(Me,$e.type,He),He.apply(Me,[$e])}}(x,V);qe.delegationSelector=I?y:null,qe.callable=V,qe.oneOff=$,qe.uidEvent=ye,Se[ye]=qe,x.addEventListener(J,qe,I)}function jr(x,m,y,S,$){const I=tn(m[y],S,$);I&&(x.removeEventListener(y,I,!!$),delete m[y][I.uidEvent])}function gd(x,m,y,S){const $=m[y]||{};for(const[I,V]of Object.entries($))I.includes(S)&&jr(x,m,y,V.callable,V.delegationSelector)}function ea(x){return x=x.replace(Q,""),Re[x]||x}const ee={on(x,m,y,S){se(x,m,y,S,!1)},one(x,m,y,S){se(x,m,y,S,!0)},off(x,m,y,S){if("string"!=typeof m||!x)return;const[$,I,V]=gl(m,y,S),J=V!==m,ue=Z(x),Se=ue[V]||{},we=m.startsWith(".");if(void 0===I){if(we)for(const ye of Object.keys(ue))gd(x,ue,ye,m.slice(1));for(const[ye,qe]of Object.entries(Se)){const Me=ye.replace(Ke,"");J&&!m.includes(Me)||jr(x,ue,V,qe.callable,qe.delegationSelector)}}else{if(!Object.keys(Se).length)return;jr(x,ue,V,I,$?y:null)}},trigger(x,m,y){if("string"!=typeof m||!x)return null;const S=ge();let $=null,I=!0,V=!0,J=!1;m!==ea(m)&&S&&($=S.Event(m,y),S(x).trigger($),I=!$.isPropagationStopped(),V=!$.isImmediatePropagationStopped(),J=$.isDefaultPrevented());const ue=at(new Event(m,{bubbles:I,cancelable:!0}),y);return J&&ue.preventDefault(),V&&x.dispatchEvent(ue),ue.defaultPrevented&&$&&$.preventDefault(),ue}};function at(x,m={}){for(const[y,S]of Object.entries(m))try{x[y]=S}catch{Object.defineProperty(x,y,{configurable:!0,get:()=>S})}return x}function Ct(x){if("true"===x)return!0;if("false"===x)return!1;if(x===Number(x).toString())return Number(x);if(""===x||"null"===x)return null;if("string"!=typeof x)return x;try{return JSON.parse(decodeURIComponent(x))}catch{return x}}function w(x){return x.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`)}const to={setDataAttribute(x,m,y){x.setAttribute(`data-bs-${w(m)}`,y)},removeDataAttribute(x,m){x.removeAttribute(`data-bs-${w(m)}`)},getDataAttributes(x){if(!x)return{};const m={},y=Object.keys(x.dataset).filter(S=>S.startsWith("bs")&&!S.startsWith("bsConfig"));for(const S of y){let $=S.replace(/^bs/,"");$=$.charAt(0).toLowerCase()+$.slice(1,$.length),m[$]=Ct(x.dataset[S])}return m},getDataAttribute:(x,m)=>Ct(x.getAttribute(`data-bs-${w(m)}`))};class Zs{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(m){return m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m}_mergeConfigObj(m,y){const S=eo(y)?to.getDataAttribute(y,"config"):{};return{...this.constructor.Default,..."object"==typeof S?S:{},...eo(y)?to.getDataAttributes(y):{},..."object"==typeof m?m:{}}}_typeCheckConfig(m,y=this.constructor.DefaultType){for(const[$,I]of Object.entries(y)){const V=m[$],J=eo(V)?"element":null==(S=V)?`${S}`:Object.prototype.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(I).test(J))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${$}" provided type "${J}" but expected type "${I}".`)}var S}}class no extends Zs{constructor(m,y){super(),(m=lr(m))&&(this._element=m,this._config=this._getConfig(y),Zn.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Zn.remove(this._element,this.constructor.DATA_KEY),ee.off(this._element,this.constructor.EVENT_KEY);for(const m of Object.getOwnPropertyNames(this))this[m]=null}_queueCallback(m,y,S=!0){dr(m,y,S)}_getConfig(m){return m=this._mergeConfigObj(m,this._element),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}static getInstance(m){return Zn.get(lr(m),this.DATA_KEY)}static getOrCreateInstance(m,y={}){return this.getInstance(m)||new this(m,"object"==typeof y?y:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(m){return`${m}${this.EVENT_KEY}`}}const ta=x=>{let m=x.getAttribute("data-bs-target");if(!m||"#"===m){let y=x.getAttribute("href");if(!y||!y.includes("#")&&!y.startsWith("."))return null;y.includes("#")&&!y.startsWith("#")&&(y=`#${y.split("#")[1]}`),m=y&&"#"!==y?y.trim():null}return m?m.split(",").map(y=>ul(y)).join(","):null},ae={find:(x,m=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(m,x)),findOne:(x,m=document.documentElement)=>Element.prototype.querySelector.call(m,x),children:(x,m)=>[].concat(...x.children).filter(y=>y.matches(m)),parents(x,m){const y=[];let S=x.parentNode.closest(m);for(;S;)y.push(S),S=S.parentNode.closest(m);return y},prev(x,m){let y=x.previousElementSibling;for(;y;){if(y.matches(m))return[y];y=y.previousElementSibling}return[]},next(x,m){let y=x.nextElementSibling;for(;y;){if(y.matches(m))return[y];y=y.nextElementSibling}return[]},focusableChildren(x){const m=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(y=>`${y}:not([tabindex^="-"])`).join(",");return this.find(m,x).filter(y=>!ko(y)&&Ir(y))},getSelectorFromElement(x){const m=ta(x);return m&&ae.findOne(m)?m:null},getElementFromSelector(x){const m=ta(x);return m?ae.findOne(m):null},getMultipleElementsFromSelector(x){const m=ta(x);return m?ae.find(m):[]}},dt=(x,m="hide")=>{const S=x.NAME;ee.on(document,`click.dismiss${x.EVENT_KEY}`,`[data-bs-dismiss="${S}"]`,function($){if(["A","AREA"].includes(this.tagName)&&$.preventDefault(),ko(this))return;const I=ae.getElementFromSelector(this)||this.closest(`.${S}`);x.getOrCreateInstance(I)[m]()})},ze=".bs.alert",W=`close${ze}`,hd=`closed${ze}`;class No extends no{static get NAME(){return"alert"}close(){if(ee.trigger(this._element,W).defaultPrevented)return;this._element.classList.remove("show");const m=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,m)}_destroyElement(){this._element.remove(),ee.trigger(this._element,hd),this.dispose()}static jQueryInterface(m){return this.each(function(){const y=No.getOrCreateInstance(this);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}dt(No,"close"),Je(No);const ke='[data-bs-toggle="button"]';class Wo extends no{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(m){return this.each(function(){const y=Wo.getOrCreateInstance(this);"toggle"===m&&y[m]()})}}ee.on(document,"click.bs.button.data-api",ke,x=>{x.preventDefault();const m=x.target.closest(ke);Wo.getOrCreateInstance(m).toggle()}),Je(Wo);const $t=".bs.swipe",pd=`touchstart${$t}`,Tt=`touchmove${$t}`,ei=`touchend${$t}`,bd=`pointerdown${$t}`,zn=`pointerup${$t}`,ur={endCallback:null,leftCallback:null,rightCallback:null},ti={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class $r extends Zs{constructor(m,y){super(),this._element=m,m&&$r.isSupported()&&(this._config=this._getConfig(y),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return ur}static get DefaultType(){return ti}static get NAME(){return"swipe"}dispose(){ee.off(this._element,$t)}_start(m){this._supportPointerEvents?this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX):this._deltaX=m.touches[0].clientX}_end(m){this._eventIsPointerPenTouch(m)&&(this._deltaX=m.clientX-this._deltaX),this._handleSwipe(),ct(this._config.endCallback)}_move(m){this._deltaX=m.touches&&m.touches.length>1?0:m.touches[0].clientX-this._deltaX}_handleSwipe(){const m=Math.abs(this._deltaX);if(m<=40)return;const y=m/this._deltaX;this._deltaX=0,y&&ct(y>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(ee.on(this._element,bd,m=>this._start(m)),ee.on(this._element,zn,m=>this._end(m)),this._element.classList.add("pointer-event")):(ee.on(this._element,pd,m=>this._start(m)),ee.on(this._element,Tt,m=>this._move(m)),ee.on(this._element,ei,m=>this._end(m)))}_eventIsPointerPenTouch(m){return this._supportPointerEvents&&("pen"===m.pointerType||"touch"===m.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ao=".bs.carousel",mr=".data-api",fr="next",Ut="prev",Hn="left",nn="right",ms=`slide${Ao}`,on=`slid${Ao}`,Im=`keydown${Ao}`,tt=`mouseenter${Ao}`,na=`mouseleave${Ao}`,Fm=`dragstart${Ao}`,hl=`load${Ao}${mr}`,vd=`click${Ao}${mr}`,fs="carousel",Ur="active",oa=".active",nt=".carousel-item",Oe=oa+nt,gs={ArrowLeft:nn,ArrowRight:Hn},yd={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},_d={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class gr extends no{constructor(m,y){super(m,y),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ae.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===fs&&this.cycle()}static get Default(){return yd}static get DefaultType(){return _d}static get NAME(){return"carousel"}next(){this._slide(fr)}nextWhenVisible(){!document.hidden&&Ir(this._element)&&this.next()}prev(){this._slide(Ut)}pause(){this._isSliding&&ml(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?ee.one(this._element,on,()=>this.cycle()):this.cycle())}to(m){const y=this._getItems();if(m>y.length-1||m<0)return;if(this._isSliding)return void ee.one(this._element,on,()=>this.to(m));const S=this._getItemIndex(this._getActive());S!==m&&this._slide(m>S?fr:Ut,y[m])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(m){return m.defaultInterval=m.interval,m}_addEventListeners(){this._config.keyboard&&ee.on(this._element,Im,m=>this._keydown(m)),"hover"===this._config.pause&&(ee.on(this._element,tt,()=>this.pause()),ee.on(this._element,na,()=>this._maybeEnableCycle())),this._config.touch&&$r.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const y of ae.find(".carousel-item img",this._element))ee.on(y,Fm,S=>S.preventDefault());this._swipeHelper=new $r(this._element,{leftCallback:()=>this._slide(this._directionToOrder(Hn)),rightCallback:()=>this._slide(this._directionToOrder(nn)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(m){if(/input|textarea/i.test(m.target.tagName))return;const y=gs[m.key];y&&(m.preventDefault(),this._slide(this._directionToOrder(y)))}_getItemIndex(m){return this._getItems().indexOf(m)}_setActiveIndicatorElement(m){if(!this._indicatorsElement)return;const y=ae.findOne(oa,this._indicatorsElement);y.classList.remove(Ur),y.removeAttribute("aria-current");const S=ae.findOne(`[data-bs-slide-to="${m}"]`,this._indicatorsElement);S&&(S.classList.add(Ur),S.setAttribute("aria-current","true"))}_updateInterval(){const m=this._activeElement||this._getActive();if(!m)return;const y=Number.parseInt(m.getAttribute("data-bs-interval"),10);this._config.interval=y||this._config.defaultInterval}_slide(m,y=null){if(this._isSliding)return;const S=this._getActive(),$=m===fr,I=y||Bt(this._getItems(),S,$,this._config.wrap);if(I===S)return;const V=this._getItemIndex(I),J=ye=>ee.trigger(this._element,ye,{relatedTarget:I,direction:this._orderToDirection(m),from:this._getItemIndex(S),to:V});if(J(ms).defaultPrevented||!S||!I)return;const ue=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(V),this._activeElement=I;const Se=$?"carousel-item-start":"carousel-item-end",we=$?"carousel-item-next":"carousel-item-prev";I.classList.add(we),S.classList.add(Se),I.classList.add(Se),this._queueCallback(()=>{I.classList.remove(Se,we),I.classList.add(Ur),S.classList.remove(Ur,we,Se),this._isSliding=!1,J(on)},S,this._isAnimated()),ue&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ae.findOne(Oe,this._element)}_getItems(){return ae.find(nt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(m){return Rn()?m===Hn?Ut:fr:m===Hn?fr:Ut}_orderToDirection(m){return Rn()?m===Ut?Hn:nn:m===Ut?nn:Hn}static jQueryInterface(m){return this.each(function(){const y=gr.getOrCreateInstance(this,m);if("number"!=typeof m){if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}}else y.to(m)})}}ee.on(document,vd,"[data-bs-slide], [data-bs-slide-to]",function(x){const m=ae.getElementFromSelector(this);if(!m||!m.classList.contains(fs))return;x.preventDefault();const y=gr.getOrCreateInstance(m),S=this.getAttribute("data-bs-slide-to");return S?(y.to(S),void y._maybeEnableCycle()):"next"===to.getDataAttribute(this,"slide")?(y.next(),void y._maybeEnableCycle()):(y.prev(),void y._maybeEnableCycle())}),ee.on(window,hl,()=>{const x=ae.find('[data-bs-ride="carousel"]');for(const m of x)gr.getOrCreateInstance(m)}),Je(gr);const hr=".bs.collapse",pl=`show${hr}`,ni=`shown${hr}`,ra=`hide${hr}`,Cd=`hidden${hr}`,zr=`click${hr}.data-api`,Vo="show",Hr="collapse",hs="collapsing",oi=`:scope .${Hr} .${Hr}`,sa='[data-bs-toggle="collapse"]',wd={parent:null,toggle:!0},Ed={parent:"(null|element)",toggle:"boolean"};class St extends no{constructor(m,y){super(m,y),this._isTransitioning=!1,this._triggerArray=[];const S=ae.find(sa);for(const $ of S){const I=ae.getSelectorFromElement($),V=ae.find(I).filter(J=>J===this._element);null!==I&&V.length&&this._triggerArray.push($)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return wd}static get DefaultType(){return Ed}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let m=[];if(this._config.parent&&(m=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter($=>$!==this._element).map($=>St.getOrCreateInstance($,{toggle:!1}))),m.length&&m[0]._isTransitioning||ee.trigger(this._element,pl).defaultPrevented)return;for(const $ of m)$.hide();const y=this._getDimension();this._element.classList.remove(Hr),this._element.classList.add(hs),this._element.style[y]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const S=`scroll${y[0].toUpperCase()+y.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hs),this._element.classList.add(Hr,Vo),this._element.style[y]="",ee.trigger(this._element,ni)},this._element,!0),this._element.style[y]=`${this._element[S]}px`}hide(){if(this._isTransitioning||!this._isShown()||ee.trigger(this._element,ra).defaultPrevented)return;const m=this._getDimension();this._element.style[m]=`${this._element.getBoundingClientRect()[m]}px`,this._element.classList.add(hs),this._element.classList.remove(Hr,Vo);for(const y of this._triggerArray){const S=ae.getElementFromSelector(y);S&&!this._isShown(S)&&this._addAriaAndCollapsedClass([y],!1)}this._isTransitioning=!0,this._element.style[m]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hs),this._element.classList.add(Hr),ee.trigger(this._element,Cd)},this._element,!0)}_isShown(m=this._element){return m.classList.contains(Vo)}_configAfterMerge(m){return m.toggle=!!m.toggle,m.parent=lr(m.parent),m}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const m=this._getFirstLevelChildren(sa);for(const y of m){const S=ae.getElementFromSelector(y);S&&this._addAriaAndCollapsedClass([y],this._isShown(S))}}_getFirstLevelChildren(m){const y=ae.find(oi,this._config.parent);return ae.find(m,this._config.parent).filter(S=>!y.includes(S))}_addAriaAndCollapsedClass(m,y){if(m.length)for(const S of m)S.classList.toggle("collapsed",!y),S.setAttribute("aria-expanded",y)}static jQueryInterface(m){const y={};return"string"==typeof m&&/show|hide/.test(m)&&(y.toggle=!1),this.each(function(){const S=St.getOrCreateInstance(this,y);if("string"==typeof m){if(void 0===S[m])throw new TypeError(`No method named "${m}"`);S[m]()}})}}ee.on(document,zr,sa,function(x){("A"===x.target.tagName||x.delegateTarget&&"A"===x.delegateTarget.tagName)&&x.preventDefault();for(const m of ae.getMultipleElementsFromSelector(this))St.getOrCreateInstance(m,{toggle:!1}).toggle()}),Je(St);var Qe="top",fn="bottom",gn="right",zt="left",ia="auto",qr=[Qe,fn,gn,zt],ln="start",To="end",ri="clippingParents",si="viewport",wn="popper",xd="reference",bl=qr.reduce(function(x,m){return x.concat([m+"-"+ln,m+"-"+To])},[]),aa=[].concat(qr,[ia]).reduce(function(x,m){return x.concat([m,m+"-"+ln,m+"-"+To])},[]),vl="beforeRead",_l="afterRead",Cl="beforeMain",El="afterMain",kd="beforeWrite",xl="afterWrite",kl=[vl,"read",_l,Cl,"main",El,kd,"write",xl];function oo(x){return x?(x.nodeName||"").toLowerCase():null}function En(x){if(null==x)return window;if("[object Window]"!==x.toString()){var m=x.ownerDocument;return m&&m.defaultView||window}return x}function pr(x){return x instanceof En(x).Element||x instanceof Element}function Bn(x){return x instanceof En(x).HTMLElement||x instanceof HTMLElement}function la(x){return typeof ShadowRoot<"u"&&(x instanceof En(x).ShadowRoot||x instanceof ShadowRoot)}const ca={name:"applyStyles",enabled:!0,phase:"write",fn:function(x){var m=x.state;Object.keys(m.elements).forEach(function(y){var S=m.styles[y]||{},$=m.attributes[y]||{},I=m.elements[y];Bn(I)&&oo(I)&&(Object.assign(I.style,S),Object.keys($).forEach(function(V){var J=$[V];!1===J?I.removeAttribute(V):I.setAttribute(V,!0===J?"":J)}))})},effect:function(x){var m=x.state,y={popper:{position:m.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(m.elements.popper.style,y.popper),m.styles=y,m.elements.arrow&&Object.assign(m.elements.arrow.style,y.arrow),function(){Object.keys(m.elements).forEach(function(S){var $=m.elements[S],I=m.attributes[S]||{},V=Object.keys(m.styles.hasOwnProperty(S)?m.styles[S]:y[S]).reduce(function(J,ue){return J[ue]="",J},{});Bn($)&&oo($)&&(Object.assign($.style,V),Object.keys(I).forEach(function(J){$.removeAttribute(J)}))})}},requires:["computeStyles"]};function Oo(x){return x.split("-")[0]}var Wr=Math.max,da=Math.min,ps=Math.round;function qn(){var x=navigator.userAgentData;return null!=x&&x.brands&&Array.isArray(x.brands)?x.brands.map(function(m){return m.brand+"/"+m.version}).join(" "):navigator.userAgent}function Nd(){return!/^((?!chrome|android).)*safari/i.test(qn())}function br(x,m,y){void 0===m&&(m=!1),void 0===y&&(y=!1);var S=x.getBoundingClientRect(),$=1,I=1;m&&Bn(x)&&($=x.offsetWidth>0&&ps(S.width)/x.offsetWidth||1,I=x.offsetHeight>0&&ps(S.height)/x.offsetHeight||1);var V=(pr(x)?En(x):window).visualViewport,J=!Nd()&&y,ue=(S.left+(J&&V?V.offsetLeft:0))/$,Se=(S.top+(J&&V?V.offsetTop:0))/I,we=S.width/$,ye=S.height/I;return{width:we,height:ye,top:Se,right:ue+we,bottom:Se+ye,left:ue,x:ue,y:Se}}function Wn(x){var m=br(x),y=x.offsetWidth,S=x.offsetHeight;return Math.abs(m.width-y)<=1&&(y=m.width),Math.abs(m.height-S)<=1&&(S=m.height),{x:x.offsetLeft,y:x.offsetTop,width:y,height:S}}function ro(x,m){var y=m.getRootNode&&m.getRootNode();if(x.contains(m))return!0;if(y&&la(y)){var S=m;do{if(S&&x.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function hn(x){return En(x).getComputedStyle(x)}function jm(x){return["table","td","th"].indexOf(oo(x))>=0}function Pe(x){return((pr(x)?x.ownerDocument:x.document)||window.document).documentElement}function ua(x){return"html"===oo(x)?x:x.assignedSlot||x.parentNode||(la(x)?x.host:null)||Pe(x)}function Sl(x){return Bn(x)&&"fixed"!==hn(x).position?x.offsetParent:null}function bs(x){for(var m=En(x),y=Sl(x);y&&jm(y)&&"static"===hn(y).position;)y=Sl(y);return y&&("html"===oo(y)||"body"===oo(y)&&"static"===hn(y).position)?m:y||function(S){var $=/firefox/i.test(qn());if(/Trident/i.test(qn())&&Bn(S)&&"fixed"===hn(S).position)return null;var I=ua(S);for(la(I)&&(I=I.host);Bn(I)&&["html","body"].indexOf(oo(I))<0;){var V=hn(I);if("none"!==V.transform||"none"!==V.perspective||"paint"===V.contain||-1!==["transform","perspective"].indexOf(V.willChange)||$&&"filter"===V.willChange||$&&V.filter&&"none"!==V.filter)return I;I=I.parentNode}return null}(x)||m}function X(x){return["top","bottom"].indexOf(x)>=0?"x":"y"}function Ro(x,m,y){return Wr(x,da(m,y))}function Nl(x){return Object.assign({},{top:0,right:0,bottom:0,left:0},x)}function Kt(x,m){return m.reduce(function(y,S){return y[S]=x,y},{})}const Vr={name:"arrow",enabled:!0,phase:"main",fn:function(x){var m,gt,lt,y=x.state,S=x.name,$=x.options,I=y.elements.arrow,V=y.modifiersData.popperOffsets,J=Oo(y.placement),ue=X(J),Se=[zt,gn].indexOf(J)>=0?"height":"width";if(I&&V){var we=(lt=y,Nl("number"!=typeof(gt="function"==typeof(gt=$.padding)?gt(Object.assign({},lt.rects,{placement:lt.placement})):gt)?gt:Kt(gt,qr))),ye=Wn(I),qe="y"===ue?Qe:zt,Me="y"===ue?fn:gn,He=y.rects.reference[Se]+y.rects.reference[ue]-V[ue]-y.rects.popper[Se],je=V[ue]-y.rects.reference[ue],$e=bs(I),mt=$e?"y"===ue?$e.clientHeight||0:$e.clientWidth||0:0,Ue=mt/2-ye[Se]/2+(He/2-je/2),Xe=Ro(we[qe],Ue,mt-ye[Se]-we[Me]);y.modifiersData[S]=((m={})[ue]=Xe,m.centerOffset=Xe-Ue,m)}},effect:function(x){var m=x.state,y=x.options.element,S=void 0===y?"[data-popper-arrow]":y;null!=S&&("string"!=typeof S||(S=m.elements.popper.querySelector(S)))&&ro(m.elements.popper,S)&&(m.elements.arrow=S)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function vs(x){return x.split("-")[1]}var Ad={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Td(x){var m,y=x.popper,S=x.popperRect,$=x.placement,I=x.variation,V=x.offsets,J=x.position,ue=x.gpuAcceleration,Se=x.adaptive,we=x.roundOffsets,ye=x.isFixed,qe=V.x,Me=void 0===qe?0:qe,He=V.y,je=void 0===He?0:He,$e="function"==typeof we?we({x:Me,y:je}):{x:Me,y:je};Me=$e.x,je=$e.y;var mt=V.hasOwnProperty("x"),ft=V.hasOwnProperty("y"),Ve=zt,Ze=Qe,Ue=window;if(Se){var Xe=bs(y),it="clientHeight",gt="clientWidth";Xe===En(y)&&"static"!==hn(Xe=Pe(y)).position&&"absolute"===J&&(it="scrollHeight",gt="scrollWidth"),($===Qe||($===zt||$===gn)&&I===To)&&(Ze=fn,je-=(ye&&Xe===Ue&&Ue.visualViewport?Ue.visualViewport.height:Xe[it])-S.height,je*=ue?1:-1),$!==zt&&($!==Qe&&$!==fn||I!==To)||(Ve=gn,Me-=(ye&&Xe===Ue&&Ue.visualViewport?Ue.visualViewport.width:Xe[gt])-S.width,Me*=ue?1:-1)}var lt,Gn,dn,Nn,Dt,Rt=Object.assign({position:J},Se&&Ad),Sn=!0===we?(Gn={x:Me,y:je},dn=En(y),Nn=Gn.y,{x:ps(Gn.x*(Dt=dn.devicePixelRatio||1))/Dt||0,y:ps(Nn*Dt)/Dt||0}):{x:Me,y:je};return Me=Sn.x,je=Sn.y,Object.assign({},Rt,ue?((lt={})[Ze]=ft?"0":"",lt[Ve]=mt?"0":"",lt.transform=(Ue.devicePixelRatio||1)<=1?"translate("+Me+"px, "+je+"px)":"translate3d("+Me+"px, "+je+"px, 0)",lt):((m={})[Ze]=ft?je+"px":"",m[Ve]=mt?Me+"px":"",m.transform="",m))}const Al={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(x){var m=x.state,y=x.options,S=y.gpuAcceleration,$=void 0===S||S,I=y.adaptive,V=void 0===I||I,J=y.roundOffsets,ue=void 0===J||J,Se={placement:Oo(m.placement),variation:vs(m.placement),popper:m.elements.popper,popperRect:m.rects.popper,gpuAcceleration:$,isFixed:"fixed"===m.options.strategy};null!=m.modifiersData.popperOffsets&&(m.styles.popper=Object.assign({},m.styles.popper,Td(Object.assign({},Se,{offsets:m.modifiersData.popperOffsets,position:m.options.strategy,adaptive:V,roundOffsets:ue})))),null!=m.modifiersData.arrow&&(m.styles.arrow=Object.assign({},m.styles.arrow,Td(Object.assign({},Se,{offsets:m.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ue})))),m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-placement":m.placement})},data:{}};var Fe={passive:!0};const ma={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(x){var m=x.state,y=x.instance,S=x.options,$=S.scroll,I=void 0===$||$,V=S.resize,J=void 0===V||V,ue=En(m.elements.popper),Se=[].concat(m.scrollParents.reference,m.scrollParents.popper);return I&&Se.forEach(function(we){we.addEventListener("scroll",y.update,Fe)}),J&&ue.addEventListener("resize",y.update,Fe),function(){I&&Se.forEach(function(we){we.removeEventListener("scroll",y.update,Fe)}),J&&ue.removeEventListener("resize",y.update,Fe)}},data:{}};var fa={left:"right",right:"left",bottom:"top",top:"bottom"};function Kr(x){return x.replace(/left|right|bottom|top/g,function(m){return fa[m]})}var xn={start:"end",end:"start"};function kn(x){return x.replace(/start|end/g,function(m){return xn[m]})}function Tl(x){var m=En(x);return{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function Ol(x){return br(Pe(x)).left+Tl(x).scrollLeft}function ys(x){var m=hn(x);return/auto|scroll|overlay|hidden/.test(m.overflow+m.overflowY+m.overflowX)}function Rl(x){return["html","body","#document"].indexOf(oo(x))>=0?x.ownerDocument.body:Bn(x)&&ys(x)?x:Rl(ua(x))}function wt(x,m){var y;void 0===m&&(m=[]);var S=Rl(x),$=S===(null==(y=x.ownerDocument)?void 0:y.body),I=En(S),V=$?[I].concat(I.visualViewport||[],ys(S)?S:[]):S,J=m.concat(V);return $?J:J.concat(wt(ua(V)))}function so(x){return Object.assign({},x,{left:x.x,top:x.y,right:x.x+x.width,bottom:x.y+x.height})}function pn(x,m,y){return m===si?so(function(S,$){var I=En(S),V=Pe(S),J=I.visualViewport,ue=V.clientWidth,Se=V.clientHeight,we=0,ye=0;if(J){ue=J.width,Se=J.height;var qe=Nd();(qe||!qe&&"fixed"===$)&&(we=J.offsetLeft,ye=J.offsetTop)}return{width:ue,height:Se,x:we+Ol(S),y:ye}}(x,y)):pr(m)?((I=br(S=m,!1,"fixed"===y)).top=I.top+S.clientTop,I.left=I.left+S.clientLeft,I.bottom=I.top+S.clientHeight,I.right=I.left+S.clientWidth,I.width=S.clientWidth,I.height=S.clientHeight,I.x=I.left,I.y=I.top,I):so(function(S){var $,I=Pe(S),V=Tl(S),J=null==($=S.ownerDocument)?void 0:$.body,ue=Wr(I.scrollWidth,I.clientWidth,J?J.scrollWidth:0,J?J.clientWidth:0),Se=Wr(I.scrollHeight,I.clientHeight,J?J.scrollHeight:0,J?J.clientHeight:0),we=-V.scrollLeft+Ol(S),ye=-V.scrollTop;return"rtl"===hn(J||I).direction&&(we+=Wr(I.clientWidth,J?J.clientWidth:0)-ue),{width:ue,height:Se,x:we,y:ye}}(Pe(x)));var S,I}function Do(x){var m,y=x.reference,S=x.element,$=x.placement,I=$?Oo($):null,V=$?vs($):null,J=y.x+y.width/2-S.width/2,ue=y.y+y.height/2-S.height/2;switch(I){case Qe:m={x:J,y:y.y-S.height};break;case fn:m={x:J,y:y.y+y.height};break;case gn:m={x:y.x+y.width,y:ue};break;case zt:m={x:y.x-S.width,y:ue};break;default:m={x:y.x,y:y.y}}var Se=I?X(I):null;if(null!=Se){var we="y"===Se?"height":"width";switch(V){case ln:m[Se]=m[Se]-(y[we]/2-S[we]/2);break;case To:m[Se]=m[Se]+(y[we]/2-S[we]/2)}}return m}function Bo(x,m){void 0===m&&(m={});var dn,Mn,Nn,Dt,pt,It,Qn,In,Fn,Zt,S=m.placement,$=void 0===S?x.placement:S,I=m.strategy,V=void 0===I?x.strategy:I,J=m.boundary,ue=void 0===J?ri:J,Se=m.rootBoundary,we=void 0===Se?si:Se,ye=m.elementContext,qe=void 0===ye?wn:ye,Me=m.altBoundary,He=void 0!==Me&&Me,je=m.padding,$e=void 0===je?0:je,mt=Nl("number"!=typeof $e?$e:Kt($e,qr)),Ve=x.rects.popper,Ze=x.elements[He?qe===wn?xd:wn:qe],Ue=(dn=pr(Ze)?Ze:Ze.contextElement||Pe(x.elements.popper),Nn=we,Dt=V,In="clippingParents"===(Mn=ue)?(It=wt(ua(pt=dn)),pr(Qn=["absolute","fixed"].indexOf(hn(pt).position)>=0&&Bn(pt)?bs(pt):pt)?It.filter(function(er){return pr(er)&&ro(er,Qn)&&"body"!==oo(er)}):[]):[].concat(Mn),Zt=(Fn=[].concat(In,[Nn])).reduce(function(pt,It){var Qn=pn(dn,It,Dt);return pt.top=Wr(Qn.top,pt.top),pt.right=da(Qn.right,pt.right),pt.bottom=da(Qn.bottom,pt.bottom),pt.left=Wr(Qn.left,pt.left),pt},pn(dn,Fn[0],Dt)),Zt.width=Zt.right-Zt.left,Zt.height=Zt.bottom-Zt.top,Zt.x=Zt.left,Zt.y=Zt.top,Zt),Xe=br(x.elements.reference),it=Do({reference:Xe,element:Ve,strategy:"absolute",placement:$}),gt=so(Object.assign({},Ve,it)),lt=qe===wn?gt:Xe,Rt={top:Ue.top-lt.top+mt.top,bottom:lt.bottom-Ue.bottom+mt.bottom,left:Ue.left-lt.left+mt.left,right:lt.right-Ue.right+mt.right},Sn=x.modifiersData.offset;if(qe===wn&&Sn){var Gn=Sn[$];Object.keys(Rt).forEach(function(dn){var Mn=[gn,fn].indexOf(dn)>=0?1:-1,Nn=[Qe,fn].indexOf(dn)>=0?"y":"x";Rt[dn]+=Gn[Nn]*Mn})}return Rt}const Dl={name:"flip",enabled:!0,phase:"main",fn:function(x){var m=x.state,y=x.options,S=x.name;if(!m.modifiersData[S]._skip){for(var $=y.mainAxis,I=void 0===$||$,V=y.altAxis,J=void 0===V||V,ue=y.fallbackPlacements,Se=y.padding,we=y.boundary,ye=y.rootBoundary,qe=y.altBoundary,Me=y.flipVariations,He=void 0===Me||Me,je=y.allowedAutoPlacements,$e=m.options.placement,mt=Oo($e),ft=ue||(mt!==$e&&He?function(pt){if(Oo(pt)===ia)return[];var It=Kr(pt);return[kn(pt),It,kn(It)]}($e):[Kr($e)]),Ve=[$e].concat(ft).reduce(function(pt,It){return pt.concat(Oo(It)===ia?function Ht(x,m){void 0===m&&(m={});var $=m.boundary,I=m.rootBoundary,V=m.padding,J=m.flipVariations,ue=m.allowedAutoPlacements,Se=void 0===ue?aa:ue,we=vs(m.placement),ye=we?J?bl:bl.filter(function(He){return vs(He)===we}):qr,qe=ye.filter(function(He){return Se.indexOf(He)>=0});0===qe.length&&(qe=ye);var Me=qe.reduce(function(He,je){return He[je]=Bo(x,{placement:je,boundary:$,rootBoundary:I,padding:V})[Oo(je)],He},{});return Object.keys(Me).sort(function(He,je){return Me[He]-Me[je]})}(m,{placement:It,boundary:we,rootBoundary:ye,padding:Se,flipVariations:He,allowedAutoPlacements:je}):It)},[]),Ze=m.rects.reference,Ue=m.rects.popper,Xe=new Map,it=!0,gt=Ve[0],lt=0;lt<Ve.length;lt++){var Rt=Ve[lt],Sn=Oo(Rt),Gn=vs(Rt)===ln,dn=[Qe,fn].indexOf(Sn)>=0,Mn=dn?"width":"height",Nn=Bo(m,{placement:Rt,boundary:we,rootBoundary:ye,altBoundary:qe,padding:Se}),Dt=dn?Gn?gn:zt:Gn?fn:Qe;Ze[Mn]>Ue[Mn]&&(Dt=Kr(Dt));var In=Kr(Dt),Fn=[];if(I&&Fn.push(Nn[Sn]<=0),J&&Fn.push(Nn[Dt]<=0,Nn[In]<=0),Fn.every(function(pt){return pt})){gt=Rt,it=!1;break}Xe.set(Rt,Fn)}if(it)for(var Ms=function(pt){var It=Ve.find(function(Qn){var er=Xe.get(Qn);if(er)return er.slice(0,pt).every(function(Is){return Is})});if(It)return gt=It,"break"},Zt=He?3:1;Zt>0&&"break"!==Ms(Zt);Zt--);m.placement!==gt&&(m.modifiersData[S]._skip=!0,m.placement=gt,m.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function ga(x,m,y){return void 0===y&&(y={x:0,y:0}),{top:x.top-m.height-y.y,right:x.right-m.width+y.x,bottom:x.bottom-m.height+y.y,left:x.left-m.width-y.x}}function _s(x){return[Qe,gn,fn,zt].some(function(m){return x[m]>=0})}const Bl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(x){var m=x.state,y=x.name,S=m.rects.reference,$=m.rects.popper,I=m.modifiersData.preventOverflow,V=Bo(m,{elementContext:"reference"}),J=Bo(m,{altBoundary:!0}),ue=ga(V,S),Se=ga(J,$,I),we=_s(ue),ye=_s(Se);m.modifiersData[y]={referenceClippingOffsets:ue,popperEscapeOffsets:Se,isReferenceHidden:we,hasPopperEscaped:ye},m.attributes.popper=Object.assign({},m.attributes.popper,{"data-popper-reference-hidden":we,"data-popper-escaped":ye})}},Ll={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(x){var m=x.state,S=x.name,$=x.options.offset,I=void 0===$?[0,0]:$,V=aa.reduce(function(we,ye){return we[ye]=(Me=m.rects,He=I,je=Oo(qe=ye),$e=[zt,Qe].indexOf(je)>=0?-1:1,ft=(ft=(mt="function"==typeof He?He(Object.assign({},Me,{placement:qe})):He)[0])||0,Ve=((Ve=mt[1])||0)*$e,[zt,gn].indexOf(je)>=0?{x:Ve,y:ft}:{x:ft,y:Ve}),we;var qe,Me,He,je,$e,mt,ft,Ve},{}),J=V[m.placement],Se=J.y;null!=m.modifiersData.popperOffsets&&(m.modifiersData.popperOffsets.x+=J.x,m.modifiersData.popperOffsets.y+=Se),m.modifiersData[S]=V}},ha={name:"popperOffsets",enabled:!0,phase:"read",fn:function(x){var m=x.state;m.modifiersData[x.name]=Do({reference:m.rects.reference,element:m.rects.popper,strategy:"absolute",placement:m.placement})},data:{}},Yr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(x){var xi,ou,m=x.state,y=x.options,S=x.name,$=y.mainAxis,I=void 0===$||$,V=y.altAxis,J=void 0!==V&&V,qe=y.tether,Me=void 0===qe||qe,He=y.tetherOffset,je=void 0===He?0:He,$e=Bo(m,{boundary:y.boundary,rootBoundary:y.rootBoundary,padding:y.padding,altBoundary:y.altBoundary}),mt=Oo(m.placement),ft=vs(m.placement),Ve=!ft,Ze=X(mt),Ue="x"===Ze?"y":"x",Xe=m.modifiersData.popperOffsets,it=m.rects.reference,gt=m.rects.popper,lt="function"==typeof je?je(Object.assign({},m.rects,{placement:m.placement})):je,Rt="number"==typeof lt?{mainAxis:lt,altAxis:lt}:Object.assign({mainAxis:0,altAxis:0},lt),Sn=m.modifiersData.offset?m.modifiersData.offset[m.placement]:null,Gn={x:0,y:0};if(Xe){if(I){var dn,Mn="y"===Ze?Qe:zt,Nn="y"===Ze?fn:gn,Dt="y"===Ze?"height":"width",In=Xe[Ze],Fn=In+$e[Mn],Ms=In-$e[Nn],Zt=Me?-gt[Dt]/2:0,pt=ft===ln?it[Dt]:gt[Dt],It=ft===ln?-gt[Dt]:-it[Dt],Qn=m.elements.arrow,er=Me&&Qn?Wn(Qn):{width:0,height:0},Is=m.modifiersData["arrow#persistent"]?m.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ec=Is[Mn],tc=Is[Nn],Fs=Ro(0,it[Dt],er[Dt]),Sr=Ve?it[Dt]/2-Zt-Fs-ec-Rt.mainAxis:pt-Fs-ec-Rt.mainAxis,Gt=Ve?-it[Dt]/2+Zt+Fs+tc+Rt.mainAxis:It+Fs+tc+Rt.mainAxis,Oa=m.elements.arrow&&bs(m.elements.arrow),Ra=Oa?"y"===Ze?Oa.clientTop||0:Oa.clientLeft||0:0,js=null!=(dn=Sn?.[Ze])?dn:0,lo=In+Gt-js,Da=Ro(Me?da(Fn,In+Sr-js-Ra):Fn,In,Me?Wr(Ms,lo):Ms);Xe[Ze]=Da,Gn[Ze]=Da-In}if(J){var nc,tr=Xe[Ue],co="y"===Ue?"height":"width",Ba=tr+$e["x"===Ze?Qe:zt],tu=tr-$e["x"===Ze?fn:gn],oc=-1!==[Qe,zt].indexOf(mt),nu=null!=(nc=Sn?.[Ue])?nc:0,rc=oc?Ba:tr-it[co]-gt[co]-nu+Rt.altAxis,sc=oc?tr+it[co]+gt[co]-nu-Rt.altAxis:tu,ic=Me&&oc?(ou=Ro(rc,tr,xi=sc))>xi?xi:ou:Ro(Me?rc:Ba,tr,Me?sc:tu);Xe[Ue]=ic,Gn[Ue]=ic-tr}m.modifiersData[S]=Gn}},requiresIfExists:["offset"]};function Od(x,m,y){void 0===y&&(y=!1);var S,$,ye,qe,Me,He,I=Bn(m),V=Bn(m)&&(qe=(ye=m).getBoundingClientRect(),Me=ps(qe.width)/ye.offsetWidth||1,He=ps(qe.height)/ye.offsetHeight||1,1!==Me||1!==He),J=Pe(m),ue=br(x,V,y),Se={scrollLeft:0,scrollTop:0},we={x:0,y:0};return(I||!I&&!y)&&(("body"!==oo(m)||ys(J))&&(Se=(S=m)!==En(S)&&Bn(S)?{scrollLeft:($=S).scrollLeft,scrollTop:$.scrollTop}:Tl(S)),Bn(m)?((we=br(m,!0)).x+=m.clientLeft,we.y+=m.clientTop):J&&(we.x=Ol(J))),{x:ue.left+Se.scrollLeft-we.x,y:ue.top+Se.scrollTop-we.y,width:ue.width,height:ue.height}}function ii(x){var m=new Map,y=new Set,S=[];function $(I){y.add(I.name),[].concat(I.requires||[],I.requiresIfExists||[]).forEach(function(V){if(!y.has(V)){var J=m.get(V);J&&$(J)}}),S.push(I)}return x.forEach(function(I){m.set(I.name,I)}),x.forEach(function(I){y.has(I.name)||$(I)}),S}var pa={placement:"bottom",modifiers:[],strategy:"absolute"};function Cs(){for(var x=arguments.length,m=new Array(x),y=0;y<x;y++)m[y]=arguments[y];return!m.some(function(S){return!(S&&"function"==typeof S.getBoundingClientRect)})}function vr(x){void 0===x&&(x={});var y=x.defaultModifiers,S=void 0===y?[]:y,$=x.defaultOptions,I=void 0===$?pa:$;return function(V,J,ue){void 0===ue&&(ue=I);var Se,we,ye={placement:"bottom",orderedModifiers:[],options:Object.assign({},pa,I),modifiersData:{},elements:{reference:V,popper:J},attributes:{},styles:{}},qe=[],Me=!1,He={state:ye,setOptions:function($e){var mt="function"==typeof $e?$e(ye.options):$e;je(),ye.options=Object.assign({},I,ye.options,mt),ye.scrollParents={reference:pr(V)?wt(V):V.contextElement?wt(V.contextElement):[],popper:wt(J)};var ft,Ve,Ue,Xe,Ze=(ft=[].concat(S,ye.options.modifiers),Ve=ft.reduce(function(Ue,Xe){var it=Ue[Xe.name];return Ue[Xe.name]=it?Object.assign({},it,Xe,{options:Object.assign({},it.options,Xe.options),data:Object.assign({},it.data,Xe.data)}):Xe,Ue},{}),Ue=Object.keys(Ve).map(function(Ue){return Ve[Ue]}),Xe=ii(Ue),kl.reduce(function(it,gt){return it.concat(Xe.filter(function(lt){return lt.phase===gt}))},[]));return ye.orderedModifiers=Ze.filter(function(Ue){return Ue.enabled}),ye.orderedModifiers.forEach(function(Ue){var it=Ue.options,lt=Ue.effect;if("function"==typeof lt){var Rt=lt({state:ye,name:Ue.name,instance:He,options:void 0===it?{}:it});qe.push(Rt||function(){})}}),He.update()},forceUpdate:function(){if(!Me){var $e=ye.elements,mt=$e.reference,ft=$e.popper;if(Cs(mt,ft)){ye.rects={reference:Od(mt,bs(ft),"fixed"===ye.options.strategy),popper:Wn(ft)},ye.reset=!1,ye.placement=ye.options.placement,ye.orderedModifiers.forEach(function(lt){return ye.modifiersData[lt.name]=Object.assign({},lt.data)});for(var Ve=0;Ve<ye.orderedModifiers.length;Ve++)if(!0!==ye.reset){var Ze=ye.orderedModifiers[Ve],Ue=Ze.fn,Xe=Ze.options;"function"==typeof Ue&&(ye=Ue({state:ye,options:void 0===Xe?{}:Xe,name:Ze.name,instance:He})||ye)}else ye.reset=!1,Ve=-1}}},update:(Se=function(){return new Promise(function($e){He.forceUpdate(),$e(ye)})},function(){return we||(we=new Promise(function($e){Promise.resolve().then(function(){we=void 0,$e(Se())})})),we}),destroy:function(){je(),Me=!0}};if(!Cs(V,J))return He;function je(){qe.forEach(function($e){return $e()}),qe=[]}return He.setOptions(ue).then(function($e){!Me&&ue.onFirstUpdate&&ue.onFirstUpdate($e)}),He}}var Lt=vr(),ws=vr({defaultModifiers:[ma,ha,Al,ca]}),T=vr({defaultModifiers:[ma,ha,Al,ca,Ll,Dl,Yr,Vr,Bl]});const Rd=Object.freeze(Object.defineProperty({__proto__:null,afterMain:El,afterRead:_l,afterWrite:xl,applyStyles:ca,arrow:Vr,auto:ia,basePlacements:qr,beforeMain:Cl,beforeRead:vl,beforeWrite:kd,bottom:fn,clippingParents:ri,computeStyles:Al,createPopper:T,createPopperBase:Lt,createPopperLite:ws,detectOverflow:Bo,end:To,eventListeners:ma,flip:Dl,hide:Bl,left:zt,main:"main",modifierPhases:kl,offset:Ll,placements:aa,popper:wn,popperGenerator:vr,popperOffsets:ha,preventOverflow:Yr,read:"read",reference:xd,right:gn,start:ln,top:Qe,variationPlacements:bl,viewport:si,write:"write"},Symbol.toStringTag,{value:"Module"})),Pl="dropdown",rn=".bs.dropdown",ba=".data-api",We="ArrowUp",Lo="ArrowDown",Dd=`hide${rn}`,Ko=`hidden${rn}`,ai=`show${rn}`,Vn=`shown${rn}`,li=`click${rn}${ba}`,Ml=`keydown${rn}${ba}`,Xr=`keyup${rn}${ba}`,Po="show",yr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Bd=`${yr}.${Po}`,Nt=".dropdown-menu",Es=Rn()?"top-end":"top-start",Il=Rn()?"top-start":"top-end",Fl=Rn()?"bottom-end":"bottom-start",jl=Rn()?"bottom-start":"bottom-end",$l=Rn()?"left-start":"right-start",Ld=Rn()?"right-start":"left-start",$m={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},_r={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ln extends no{constructor(m,y){super(m,y),this._popper=null,this._parent=this._element.parentNode,this._menu=ae.next(this._element,Nt)[0]||ae.prev(this._element,Nt)[0]||ae.findOne(Nt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return $m}static get DefaultType(){return _r}static get NAME(){return Pl}toggle(){return this._isShown()?this.hide():this.show()}show(){if(ko(this._element)||this._isShown())return;const m={relatedTarget:this._element};if(!ee.trigger(this._element,ai,m).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const y of[].concat(...document.body.children))ee.on(y,"mouseover",Js);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Po),this._element.classList.add(Po),ee.trigger(this._element,Vn,m)}}hide(){!ko(this._element)&&this._isShown()&&this._completeHide({relatedTarget:this._element})}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(m){if(!ee.trigger(this._element,Dd,m).defaultPrevented){if("ontouchstart"in document.documentElement)for(const y of[].concat(...document.body.children))ee.off(y,"mouseover",Js);this._popper&&this._popper.destroy(),this._menu.classList.remove(Po),this._element.classList.remove(Po),this._element.setAttribute("aria-expanded","false"),to.removeDataAttribute(this._menu,"popper"),ee.trigger(this._element,Ko,m)}}_getConfig(m){if("object"==typeof(m=super._getConfig(m)).reference&&!eo(m.reference)&&"function"!=typeof m.reference.getBoundingClientRect)throw new TypeError(`${Pl.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return m}_createPopper(){if(void 0===Rd)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let m=this._element;"parent"===this._config.reference?m=this._parent:eo(this._config.reference)?m=lr(this._config.reference):"object"==typeof this._config.reference&&(m=this._config.reference);const y=this._getPopperConfig();this._popper=T(m,this._menu,y)}_isShown(){return this._menu.classList.contains(Po)}_getPlacement(){const m=this._parent;if(m.classList.contains("dropend"))return $l;if(m.classList.contains("dropstart"))return Ld;if(m.classList.contains("dropup-center"))return"top";if(m.classList.contains("dropdown-center"))return"bottom";const y="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return m.classList.contains("dropup")?y?Il:Es:y?jl:Fl}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:m}=this._config;return"string"==typeof m?m.split(",").map(y=>Number.parseInt(y,10)):"function"==typeof m?y=>m(y,this._element):m}_getPopperConfig(){const m={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(to.setDataAttribute(this._menu,"popper","static"),m.modifiers=[{name:"applyStyles",enabled:!1}]),{...m,...ct(this._config.popperConfig,[m])}}_selectMenuItem({key:m,target:y}){const S=ae.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter($=>Ir($));S.length&&Bt(S,y,m===Lo,!S.includes(y)).focus()}static jQueryInterface(m){return this.each(function(){const y=Ln.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}static clearMenus(m){if(2===m.button||"keyup"===m.type&&"Tab"!==m.key)return;const y=ae.find(Bd);for(const S of y){const $=Ln.getInstance(S);if(!$||!1===$._config.autoClose)continue;const I=m.composedPath(),V=I.includes($._menu);if(I.includes($._element)||"inside"===$._config.autoClose&&!V||"outside"===$._config.autoClose&&V||$._menu.contains(m.target)&&("keyup"===m.type&&"Tab"===m.key||/input|select|option|textarea|form/i.test(m.target.tagName)))continue;const J={relatedTarget:$._element};"click"===m.type&&(J.clickEvent=m),$._completeHide(J)}}static dataApiKeydownHandler(m){const y=/input|textarea/i.test(m.target.tagName),S="Escape"===m.key,$=[We,Lo].includes(m.key);if(!$&&!S||y&&!S)return;m.preventDefault();const I=this.matches(yr)?this:ae.prev(this,yr)[0]||ae.next(this,yr)[0]||ae.findOne(yr,m.delegateTarget.parentNode),V=Ln.getOrCreateInstance(I);if($)return m.stopPropagation(),V.show(),void V._selectMenuItem(m);V._isShown()&&(m.stopPropagation(),V.hide(),I.focus())}}ee.on(document,Ml,yr,Ln.dataApiKeydownHandler),ee.on(document,Ml,Nt,Ln.dataApiKeydownHandler),ee.on(document,li,Ln.clearMenus),ee.on(document,Xr,Ln.clearMenus),ee.on(document,li,yr,function(x){x.preventDefault(),Ln.getOrCreateInstance(this).toggle()}),Je(Ln);const Pd="backdrop",Md=`mousedown.bs.${Pd}`,xs={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Id={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Mo extends Zs{constructor(m){super(),this._config=this._getConfig(m),this._isAppended=!1,this._element=null}static get Default(){return xs}static get DefaultType(){return Id}static get NAME(){return Pd}show(m){if(!this._config.isVisible)return void ct(m);this._append();this._getElement().classList.add("show"),this._emulateAnimation(()=>{ct(m)})}hide(m){this._config.isVisible?(this._getElement().classList.remove("show"),this._emulateAnimation(()=>{this.dispose(),ct(m)})):ct(m)}dispose(){this._isAppended&&(ee.off(this._element,Md),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const m=document.createElement("div");m.className=this._config.className,this._config.isAnimated&&m.classList.add("fade"),this._element=m}return this._element}_configAfterMerge(m){return m.rootElement=lr(m.rootElement),m}_append(){if(this._isAppended)return;const m=this._getElement();this._config.rootElement.append(m),ee.on(m,Md,()=>{ct(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(m){dr(m,this._getElement(),this._config.isAnimated)}}const Io=".bs.focustrap",Fd=`focusin${Io}`,ci=`keydown.tab${Io}`,ks="backward",Gr={autofocus:!0,trapElement:null},Qr={autofocus:"boolean",trapElement:"element"};class jd extends Zs{constructor(m){super(),this._config=this._getConfig(m),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Gr}static get DefaultType(){return Qr}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),ee.off(document,Io),ee.on(document,Fd,m=>this._handleFocusin(m)),ee.on(document,ci,m=>this._handleKeydown(m)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,ee.off(document,Io))}_handleFocusin(m){const{trapElement:y}=this._config;if(m.target===document||m.target===y||y.contains(m.target))return;const S=ae.focusableChildren(y);0===S.length?y.focus():this._lastTabNavDirection===ks?S[S.length-1].focus():S[0].focus()}_handleKeydown(m){"Tab"===m.key&&(this._lastTabNavDirection=m.shiftKey?ks:"forward")}}const Ss=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zl=".sticky-top",di="padding-right",ui="margin-right";class Kn{constructor(){this._element=document.body}getWidth(){const m=document.documentElement.clientWidth;return Math.abs(window.innerWidth-m)}hide(){const m=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,di,y=>y+m),this._setElementAttributes(Ss,di,y=>y+m),this._setElementAttributes(zl,ui,y=>y-m)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,di),this._resetElementAttributes(Ss,di),this._resetElementAttributes(zl,ui)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(m,y,S){const $=this.getWidth();this._applyManipulationCallback(m,I=>{if(I!==this._element&&window.innerWidth>I.clientWidth+$)return;this._saveInitialAttribute(I,y);const V=window.getComputedStyle(I).getPropertyValue(y);I.style.setProperty(y,`${S(Number.parseFloat(V))}px`)})}_saveInitialAttribute(m,y){const S=m.style.getPropertyValue(y);S&&to.setDataAttribute(m,y,S)}_resetElementAttributes(m,y){this._applyManipulationCallback(m,S=>{const $=to.getDataAttribute(S,y);null!==$?(to.removeDataAttribute(S,y),S.style.setProperty(y,$)):S.style.removeProperty(y)})}_applyManipulationCallback(m,y){if(eo(m))y(m);else for(const S of ae.find(m,this._element))y(S)}}const Pn=".bs.modal",va=`hide${Pn}`,Hl=`hidePrevented${Pn}`,ql=`hidden${Pn}`,cn=`show${Pn}`,Yo=`shown${Pn}`,Wl=`resize${Pn}`,Et=`click.dismiss${Pn}`,$d=`mousedown.dismiss${Pn}`,Jr=`keydown.dismiss${Pn}`,Ns=`click${Pn}.data-api`,ot="modal-open",mi="modal-static",Ud={backdrop:!0,focus:!0,keyboard:!0},ya={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Zr extends no{constructor(m,y){super(m,y),this._dialog=ae.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Kn,this._addEventListeners()}static get Default(){return Ud}static get DefaultType(){return ya}static get NAME(){return"modal"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||this._isTransitioning||ee.trigger(this._element,cn,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ot),this._adjustDialog(),this._backdrop.show(()=>this._showElement(m)))}hide(){this._isShown&&!this._isTransitioning&&(ee.trigger(this._element,va).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove("show"),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){ee.off(window,Pn),ee.off(this._dialog,Pn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Mo({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new jd({trapElement:this._element})}_showElement(m){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const y=ae.findOne(".modal-body",this._dialog);y&&(y.scrollTop=0),this._element.classList.add("show"),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,ee.trigger(this._element,Yo,{relatedTarget:m})},this._dialog,this._isAnimated())}_addEventListeners(){ee.on(this._element,Jr,m=>{"Escape"===m.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),ee.on(window,Wl,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),ee.on(this._element,$d,m=>{ee.one(this._element,Et,y=>{this._element===m.target&&this._element===y.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ot),this._resetAdjustments(),this._scrollBar.reset(),ee.trigger(this._element,ql)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(ee.trigger(this._element,Hl).defaultPrevented)return;const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._element.style.overflowY;"hidden"===y||this._element.classList.contains(mi)||(m||(this._element.style.overflowY="hidden"),this._element.classList.add(mi),this._queueCallback(()=>{this._element.classList.remove(mi),this._queueCallback(()=>{this._element.style.overflowY=y},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const m=this._element.scrollHeight>document.documentElement.clientHeight,y=this._scrollBar.getWidth(),S=y>0;if(S&&!m){const $=Rn()?"paddingLeft":"paddingRight";this._element.style[$]=`${y}px`}if(!S&&m){const $=Rn()?"paddingRight":"paddingLeft";this._element.style[$]=`${y}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(m,y){return this.each(function(){const S=Zr.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===S[m])throw new TypeError(`No method named "${m}"`);S[m](y)}})}}ee.on(document,Ns,'[data-bs-toggle="modal"]',function(x){const m=ae.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&x.preventDefault(),ee.one(m,cn,S=>{S.defaultPrevented||ee.one(m,ql,()=>{Ir(this)&&this.focus()})});const y=ae.findOne(".modal.show");y&&Zr.getInstance(y).hide(),Zr.getOrCreateInstance(m).toggle(this)}),dt(Zr),Je(Zr);const Xo=".bs.offcanvas",Vl=".data-api",As=`load${Xo}${Vl}`,_a="showing",Kl=".offcanvas.show",zd=`show${Xo}`,Hd=`shown${Xo}`,qd=`hide${Xo}`,Yl=`hidePrevented${Xo}`,Yt=`hidden${Xo}`,Wd=`resize${Xo}`,Ot=`click${Xo}${Vl}`,es=`keydown.dismiss${Xo}`,wa={backdrop:!0,keyboard:!0,scroll:!1},ie={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class sn extends no{constructor(m,y){super(m,y),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wa}static get DefaultType(){return ie}static get NAME(){return"offcanvas"}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||ee.trigger(this._element,zd,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Kn).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(_a),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add("show"),this._element.classList.remove(_a),ee.trigger(this._element,Hd,{relatedTarget:m})},this._element,!0))}hide(){this._isShown&&(ee.trigger(this._element,qd).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add("hiding"),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove("show","hiding"),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Kn).reset(),ee.trigger(this._element,Yt)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const m=!!this._config.backdrop;return new Mo({className:"offcanvas-backdrop",isVisible:m,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:m?()=>{"static"!==this._config.backdrop?this.hide():ee.trigger(this._element,Yl)}:null})}_initializeFocusTrap(){return new jd({trapElement:this._element})}_addEventListeners(){ee.on(this._element,es,m=>{"Escape"===m.key&&(this._config.keyboard?this.hide():ee.trigger(this._element,Yl))})}static jQueryInterface(m){return this.each(function(){const y=sn.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m](this)}})}}ee.on(document,Ot,'[data-bs-toggle="offcanvas"]',function(x){const m=ae.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&x.preventDefault(),ko(this))return;ee.one(m,Yt,()=>{Ir(this)&&this.focus()});const y=ae.findOne(Kl);y&&y!==m&&sn.getInstance(y).hide(),sn.getOrCreateInstance(m).toggle(this)}),ee.on(window,As,()=>{for(const x of ae.find(Kl))sn.getOrCreateInstance(x).show()}),ee.on(window,Wd,()=>{for(const x of ae.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(x).position&&sn.getOrCreateInstance(x).hide()}),dt(sn),Je(sn);const Ts={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},io=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ea=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Vd=(x,m)=>{const y=x.nodeName.toLowerCase();return m.includes(y)?!io.has(y)||!!Ea.test(x.nodeValue):m.filter(S=>S instanceof RegExp).some(S=>S.test(y))},ts={allowList:Ts,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Go={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Kd={entry:"(string|element|function|null)",selector:"(string|element)"};class Xl extends Zs{constructor(m){super(),this._config=this._getConfig(m)}static get Default(){return ts}static get DefaultType(){return Go}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(m=>this._resolvePossibleFunction(m)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(m){return this._checkContent(m),this._config.content={...this._config.content,...m},this}toHtml(){const m=document.createElement("div");m.innerHTML=this._maybeSanitize(this._config.template);for(const[$,I]of Object.entries(this._config.content))this._setContent(m,I,$);const y=m.children[0],S=this._resolvePossibleFunction(this._config.extraClass);return S&&y.classList.add(...S.split(" ")),y}_typeCheckConfig(m){super._typeCheckConfig(m),this._checkContent(m.content)}_checkContent(m){for(const[y,S]of Object.entries(m))super._typeCheckConfig({selector:y,entry:S},Kd)}_setContent(m,y,S){const $=ae.findOne(S,m);$&&((y=this._resolvePossibleFunction(y))?eo(y)?this._putElementInTemplate(lr(y),$):this._config.html?$.innerHTML=this._maybeSanitize(y):$.textContent=y:$.remove())}_maybeSanitize(m){return this._config.sanitize?function(y,S,$){if(!y.length)return y;if($&&"function"==typeof $)return $(y);const I=(new window.DOMParser).parseFromString(y,"text/html"),V=[].concat(...I.body.querySelectorAll("*"));for(const J of V){const ue=J.nodeName.toLowerCase();if(!Object.keys(S).includes(ue)){J.remove();continue}const Se=[].concat(...J.attributes),we=[].concat(S["*"]||[],S[ue]||[]);for(const ye of Se)Vd(ye,we)||J.removeAttribute(ye.nodeName)}return I.body.innerHTML}(m,this._config.allowList,this._config.sanitizeFn):m}_resolvePossibleFunction(m){return ct(m,[this])}_putElementInTemplate(m,y){if(this._config.html)return y.innerHTML="",void y.append(m);y.textContent=m.textContent}}const Y=new Set(["sanitize","allowList","sanitizeFn"]),Gl="fade",xa="show",Os="hide.bs.modal",ns="hover",ut="focus",Yd={AUTO:"auto",TOP:"top",RIGHT:Rn()?"left":"right",BOTTOM:"bottom",LEFT:Rn()?"right":"left"},Yn={allowList:Ts,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},st={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class jo extends no{constructor(m,y){if(void 0===Rd)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(m,y),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Yn}static get DefaultType(){return st}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),ee.off(this._element.closest(".modal"),Os,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const m=ee.trigger(this._element,this.constructor.eventName("show")),y=(Zi(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(m.defaultPrevented||!y)return;this._disposePopper();const S=this._getTipElement();this._element.setAttribute("aria-describedby",S.getAttribute("id"));const{container:$}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||($.append(S),ee.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(S),S.classList.add(xa),"ontouchstart"in document.documentElement)for(const I of[].concat(...document.body.children))ee.on(I,"mouseover",Js);this._queueCallback(()=>{ee.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!ee.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(xa),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))ee.off(m,"mouseover",Js);this._activeTrigger.click=!1,this._activeTrigger[ut]=!1,this._activeTrigger[ns]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),ee.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(m){const y=this._getTemplateFactory(m).toHtml();if(!y)return null;y.classList.remove(Gl,xa),y.classList.add(`bs-${this.constructor.NAME}-auto`);const S=($=>{do{$+=Math.floor(1e6*Math.random())}while(document.getElementById($));return $})(this.constructor.NAME).toString();return y.setAttribute("id",S),this._isAnimated()&&y.classList.add(Gl),y}setContent(m){this._newContent=m,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(m){return this._templateFactory?this._templateFactory.changeContent(m):this._templateFactory=new Xl({...this._config,content:m,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(m){return this.constructor.getOrCreateInstance(m.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Gl)}_isShown(){return this.tip&&this.tip.classList.contains(xa)}_createPopper(m){const y=ct(this._config.placement,[this,m,this._element]),S=Yd[y.toUpperCase()];return T(this._element,m,this._getPopperConfig(S))}_getOffset(){const{offset:m}=this._config;return"string"==typeof m?m.split(",").map(y=>Number.parseInt(y,10)):"function"==typeof m?y=>m(y,this._element):m}_resolvePossibleFunction(m){return ct(m,[this._element])}_getPopperConfig(m){const y={placement:m,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:S=>{this._getTipElement().setAttribute("data-popper-placement",S.state.placement)}}]};return{...y,...ct(this._config.popperConfig,[y])}}_setListeners(){const m=this._config.trigger.split(" ");for(const y of m)if("click"===y)ee.on(this._element,this.constructor.eventName("click"),this._config.selector,S=>{this._initializeOnDelegatedTarget(S).toggle()});else if("manual"!==y){const S=this.constructor.eventName(y===ns?"mouseenter":"focusin"),$=this.constructor.eventName(y===ns?"mouseleave":"focusout");ee.on(this._element,S,this._config.selector,I=>{const V=this._initializeOnDelegatedTarget(I);V._activeTrigger["focusin"===I.type?ut:ns]=!0,V._enter()}),ee.on(this._element,$,this._config.selector,I=>{const V=this._initializeOnDelegatedTarget(I);V._activeTrigger["focusout"===I.type?ut:ns]=V._element.contains(I.relatedTarget),V._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},ee.on(this._element.closest(".modal"),Os,this._hideModalHandler)}_fixTitle(){const m=this._element.getAttribute("title");m&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",m),this._element.setAttribute("data-bs-original-title",m),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(m,y){clearTimeout(this._timeout),this._timeout=setTimeout(m,y)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(m){const y=to.getDataAttributes(this._element);for(const S of Object.keys(y))Y.has(S)&&delete y[S];return m={...y,..."object"==typeof m&&m?m:{}},m=this._mergeConfigObj(m),m=this._configAfterMerge(m),this._typeCheckConfig(m),m}_configAfterMerge(m){return m.container=!1===m.container?document.body:lr(m.container),"number"==typeof m.delay&&(m.delay={show:m.delay,hide:m.delay}),"number"==typeof m.title&&(m.title=m.title.toString()),"number"==typeof m.content&&(m.content=m.content.toString()),m}_getDelegateConfig(){const m={};for(const[y,S]of Object.entries(this._config))this.constructor.Default[y]!==S&&(m[y]=S);return m.selector=!1,m.trigger="manual",m}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(m){return this.each(function(){const y=jo.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}}Je(jo);const Um={...jo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},$o={...jo.DefaultType,content:"(null|string|element|function)"};class ka extends jo{static get Default(){return Um}static get DefaultType(){return $o}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(m){return this.each(function(){const y=ka.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m]()}})}}Je(ka);const gi=".bs.scrollspy",zm=`activate${gi}`,Rs=`click${gi}`,Pt=`load${gi}.data-api`,Cr="active",hi="[href]",pi=".nav-link",Xd=`${pi}, .nav-item > ${pi}, .list-group-item`,Ds={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},os={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Bs extends no{constructor(m,y){super(m,y),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ds}static get DefaultType(){return os}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const m of this._observableSections.values())this._observer.observe(m)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(m){return m.target=lr(m.target)||document.body,m.rootMargin=m.offset?`${m.offset}px 0px -30%`:m.rootMargin,"string"==typeof m.threshold&&(m.threshold=m.threshold.split(",").map(y=>Number.parseFloat(y))),m}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(ee.off(this._config.target,Rs),ee.on(this._config.target,Rs,hi,m=>{const y=this._observableSections.get(m.target.hash);if(y){m.preventDefault();const S=this._rootElement||window,$=y.offsetTop-this._element.offsetTop;if(S.scrollTo)return void S.scrollTo({top:$,behavior:"smooth"});S.scrollTop=$}}))}_getNewObserver(){return new IntersectionObserver(y=>this._observerCallback(y),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(m){const y=V=>this._targetLinks.get(`#${V.target.id}`),S=V=>{this._previousScrollData.visibleEntryTop=V.target.offsetTop,this._process(y(V))},$=(this._rootElement||document.documentElement).scrollTop,I=$>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=$;for(const V of m){if(!V.isIntersecting){this._activeTarget=null,this._clearActiveClass(y(V));continue}const J=V.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(I&&J){if(S(V),!$)return}else I||J||S(V)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const m=ae.find(hi,this._config.target);for(const y of m){if(!y.hash||ko(y))continue;const S=ae.findOne(decodeURI(y.hash),this._element);Ir(S)&&(this._targetLinks.set(decodeURI(y.hash),y),this._observableSections.set(y.hash,S))}}_process(m){this._activeTarget!==m&&(this._clearActiveClass(this._config.target),this._activeTarget=m,m.classList.add(Cr),this._activateParents(m),ee.trigger(this._element,zm,{relatedTarget:m}))}_activateParents(m){if(m.classList.contains("dropdown-item"))ae.findOne(".dropdown-toggle",m.closest(".dropdown")).classList.add(Cr);else for(const y of ae.parents(m,".nav, .list-group"))for(const S of ae.prev(y,Xd))S.classList.add(Cr)}_clearActiveClass(m){m.classList.remove(Cr);const y=ae.find(`${hi}.${Cr}`,m);for(const S of y)S.classList.remove(Cr)}static jQueryInterface(m){return this.each(function(){const y=Bs.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}})}}ee.on(window,Pt,()=>{for(const x of ae.find('[data-bs-spy="scroll"]'))Bs.getOrCreateInstance(x)}),Je(Bs);const Jo=".bs.tab",bi=`hide${Jo}`,Hm=`hidden${Jo}`,vi=`show${Jo}`,Sa=`shown${Jo}`,yi=`click${Jo}`,wr=`keydown${Jo}`,Mt=`load${Jo}`,Na="ArrowLeft",bn="ArrowRight",qm="ArrowUp",rs="ArrowDown",Er="Home",Zo="End",Xt="active",_i="show",Aa=".dropdown-toggle",Ls=`:not(${Aa})`,Ci='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',wi=`.nav-link${Ls}, .list-group-item${Ls}, [role="tab"]${Ls}, ${Ci}`,Gd=`.${Xt}[data-bs-toggle="tab"], .${Xt}[data-bs-toggle="pill"], .${Xt}[data-bs-toggle="list"]`;class xr extends no{constructor(m){super(m),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),ee.on(this._element,wr,y=>this._keydown(y)))}static get NAME(){return"tab"}show(){const m=this._element;if(this._elemIsActive(m))return;const y=this._getActiveElem(),S=y?ee.trigger(y,bi,{relatedTarget:m}):null;ee.trigger(m,vi,{relatedTarget:y}).defaultPrevented||S&&S.defaultPrevented||(this._deactivate(y,m),this._activate(m,y))}_activate(m,y){m&&(m.classList.add(Xt),this._activate(ae.getElementFromSelector(m)),this._queueCallback(()=>{"tab"===m.getAttribute("role")?(m.removeAttribute("tabindex"),m.setAttribute("aria-selected",!0),this._toggleDropDown(m,!0),ee.trigger(m,Sa,{relatedTarget:y})):m.classList.add(_i)},m,m.classList.contains("fade")))}_deactivate(m,y){m&&(m.classList.remove(Xt),m.blur(),this._deactivate(ae.getElementFromSelector(m)),this._queueCallback(()=>{"tab"===m.getAttribute("role")?(m.setAttribute("aria-selected",!1),m.setAttribute("tabindex","-1"),this._toggleDropDown(m,!1),ee.trigger(m,Hm,{relatedTarget:y})):m.classList.remove(_i)},m,m.classList.contains("fade")))}_keydown(m){if(![Na,bn,qm,rs,Er,Zo].includes(m.key))return;m.stopPropagation(),m.preventDefault();const y=this._getChildren().filter($=>!ko($));let S;if([Er,Zo].includes(m.key))S=y[m.key===Er?0:y.length-1];else{const $=[bn,rs].includes(m.key);S=Bt(y,m.target,$,!0)}S&&(S.focus({preventScroll:!0}),xr.getOrCreateInstance(S).show())}_getChildren(){return ae.find(wi,this._parent)}_getActiveElem(){return this._getChildren().find(m=>this._elemIsActive(m))||null}_setInitialAttributes(m,y){this._setAttributeIfNotExists(m,"role","tablist");for(const S of y)this._setInitialAttributesOnChild(S)}_setInitialAttributesOnChild(m){m=this._getInnerElement(m);const y=this._elemIsActive(m),S=this._getOuterElement(m);m.setAttribute("aria-selected",y),S!==m&&this._setAttributeIfNotExists(S,"role","presentation"),y||m.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(m,"role","tab"),this._setInitialAttributesOnTargetPanel(m)}_setInitialAttributesOnTargetPanel(m){const y=ae.getElementFromSelector(m);y&&(this._setAttributeIfNotExists(y,"role","tabpanel"),m.id&&this._setAttributeIfNotExists(y,"aria-labelledby",`${m.id}`))}_toggleDropDown(m,y){const S=this._getOuterElement(m);if(!S.classList.contains("dropdown"))return;const $=(I,V)=>{const J=ae.findOne(I,S);J&&J.classList.toggle(V,y)};$(Aa,Xt),$(".dropdown-menu",_i),S.setAttribute("aria-expanded",y)}_setAttributeIfNotExists(m,y,S){m.hasAttribute(y)||m.setAttribute(y,S)}_elemIsActive(m){return m.classList.contains(Xt)}_getInnerElement(m){return m.matches(wi)?m:ae.findOne(wi,m)}_getOuterElement(m){return m.closest(".nav-item, .list-group-item")||m}static jQueryInterface(m){return this.each(function(){const y=xr.getOrCreateInstance(this);if("string"==typeof m){if(void 0===y[m]||m.startsWith("_")||"constructor"===m)throw new TypeError(`No method named "${m}"`);y[m]()}})}}ee.on(document,yi,Ci,function(x){["A","AREA"].includes(this.tagName)&&x.preventDefault(),ko(this)||xr.getOrCreateInstance(this).show()}),ee.on(window,Mt,()=>{for(const x of ae.find(Gd))xr.getOrCreateInstance(x)}),Je(xr);const kr=".bs.toast",Wm=`mouseover${kr}`,Vm=`mouseout${kr}`,Km=`focusin${kr}`,Qd=`focusout${kr}`,Ym=`hide${kr}`,Xm=`hidden${kr}`,Xn=`show${kr}`,Jl=`shown${kr}`,Ta="show",ao="showing",Gm={animation:"boolean",autohide:"boolean",delay:"number"},Jd={animation:!0,autohide:!0,delay:5e3};class Ps extends no{constructor(m,y){super(m,y),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Jd}static get DefaultType(){return Gm}static get NAME(){return"toast"}show(){ee.trigger(this._element,Xn).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove("hide"),this._element.classList.add(Ta,ao),this._queueCallback(()=>{this._element.classList.remove(ao),ee.trigger(this._element,Jl),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(ee.trigger(this._element,Ym).defaultPrevented||(this._element.classList.add(ao),this._queueCallback(()=>{this._element.classList.add("hide"),this._element.classList.remove(ao,Ta),ee.trigger(this._element,Xm)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ta),super.dispose()}isShown(){return this._element.classList.contains(Ta)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(m,y){switch(m.type){case"mouseover":case"mouseout":this._hasMouseInteraction=y;break;case"focusin":case"focusout":this._hasKeyboardInteraction=y}if(y)return void this._clearTimeout();const S=m.relatedTarget;this._element===S||this._element.contains(S)||this._maybeScheduleHide()}_setListeners(){ee.on(this._element,Wm,m=>this._onInteraction(m,!0)),ee.on(this._element,Vm,m=>this._onInteraction(m,!1)),ee.on(this._element,Km,m=>this._onInteraction(m,!0)),ee.on(this._element,Qd,m=>this._onInteraction(m,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(m){return this.each(function(){const y=Ps.getOrCreateInstance(this,m);if("string"==typeof m){if(void 0===y[m])throw new TypeError(`No method named "${m}"`);y[m](this)}})}}return dt(Ps),Je(Ps),{Alert:No,Button:Wo,Carousel:gr,Collapse:St,Dropdown:Ln,Modal:Zr,Offcanvas:sn,Popover:ka,ScrollSpy:Bs,Tab:xr,Toast:Ps,Tooltip:jo}}),function(){"use strict";var Un=function(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},Zn=function(e){return{eq:e}},dl=Zn(function(e,t){return e===t}),ul=function(e){return Zn(function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,r=0;r<o;r++)if(!e.eq(t[r],n[r]))return!1;return!0})},ml=function(e){return Zn(function(t,n){var l,d,u,o=Object.keys(t),r=Object.keys(n);if(!(l=dl,d=ul(l),u=function(d){return Array.prototype.slice.call(d).sort(void 0)},Zn(function(f,p){return d.eq(u(f),u(p))})).eq(o,r))return!1;for(var s=o.length,i=0;i<s;i++){var a=o[i];if(!e.eq(t[a],n[a]))return!1}return!0})},eo=Zn(function(e,t){if(e===t)return!0;var n=Un(e);return n===Un(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?ul(eo).eq(e,t):"object"===n&&ml(eo).eq(e,t))});const lr=Object.getPrototypeOf,Ir=(e,t,n)=>{var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},ko=e=>t=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Ir(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(t)===e,Zi=e=>t=>typeof t===e,Js=e=>t=>e===t,cr=(e,t)=>Vt(e)&&Ir(e,t,(n,o)=>lr(n)===o),ge=ko("string"),Vt=ko("object"),Rn=e=>cr(e,Object),Je=ko("array"),ct=Js(null),dr=Zi("boolean"),Bt=Js(void 0),kt=e=>null==e,Q=e=>!kt(e),Ke=Zi("function"),Dn=Zi("number"),Fr=(e,t)=>{if(Je(e)){for(let n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},Re=()=>{},So=(e,t)=>(...n)=>e(t.apply(null,n)),fl=(e,t)=>n=>e(t(n)),Z=e=>()=>e,tn=e=>e,gl=(e,t)=>e===t;function se(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const jr=e=>t=>!e(t),gd=e=>()=>{throw new Error(e)},ea=e=>e(),ee=e=>{e()},at=Z(!1),Ct=Z(!0);class w{constructor(t,n){this.tag=t,this.value=n}static some(t){return new w(!0,t)}static none(){return w.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?w.some(t(this.value)):w.none()}bind(t){return this.tag?t(this.value):w.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:w.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return Q(t)?w.some(t):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const to=Array.prototype.slice,Zs=Array.prototype.indexOf,no=Array.prototype.push,ta=(e,t)=>Zs.call(e,t),ae=(e,t)=>ta(e,t)>-1,dt=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return!0;return!1},ze=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=t(e[r],r);return o},W=(e,t)=>{for(let n=0,o=e.length;n<o;n++)t(e[n],n)},hd=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n],n)},No=(e,t)=>{const n=[],o=[];for(let r=0,s=e.length;r<s;r++){const i=e[r];(t(i,r)?n:o).push(i)}return{pass:n,fail:o}},ke=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const s=e[o];t(s,o)&&n.push(s)}return n},Wo=(e,t,n)=>(hd(e,(o,r)=>{n=t(n,o,r)}),n),$t=(e,t,n)=>(W(e,(o,r)=>{n=t(n,o,r)}),n),pd=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const s=e[o];if(t(s,o))return w.some(s);if(n(s,o))break}return w.none()},Tt=(e,t)=>pd(e,t,at),ei=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(t(e[n],n))return w.some(n);return w.none()},bd=e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!Je(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);no.apply(t,e[n])}return t},zn=(e,t)=>bd(ze(e,t)),ur=(e,t)=>{for(let n=0,o=e.length;n<o;++n)if(!0!==t(e[n],n))return!1;return!0},ti=e=>{const t=to.call(e,0);return t.reverse(),t},$r=(e,t)=>ke(e,n=>!ae(t,n)),Ao=(e,t)=>{const n={};for(let o=0,r=e.length;o<r;o++){const s=e[o];n[String(s)]=t(s,o)}return n},mr=(e,t)=>{const n=to.call(e,0);return n.sort(t),n},fr=(e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none(),Ut=e=>fr(e,0),Hn=e=>fr(e,e.length-1),nn=Ke(Array.from)?Array.from:e=>to.call(e),ms=(e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return w.none()},on=Object.keys,Im=Object.hasOwnProperty,tt=(e,t)=>{const n=on(e);for(let o=0,r=n.length;o<r;o++){const s=n[o];t(e[s],s)}},na=(e,t)=>Fm(e,(n,o)=>({k:o,v:t(n,o)})),Fm=(e,t)=>{const n={};return tt(e,(o,r)=>{const s=t(o,r);n[s.k]=s.v}),n},hl=e=>(t,n)=>{e[n]=t},vd=(e,t,n,o)=>{tt(e,(r,s)=>{(t(r,s)?n:o)(r,s)})},fs=(e,t)=>{const n={};return vd(e,t,hl(n),Re),n},Ur=(e,t)=>{const n=[];return tt(e,(o,r)=>{n.push(t(o,r))}),n},oa=e=>Ur(e,tn),nt=(e,t)=>Oe(e,t)?w.from(e[t]):w.none(),Oe=(e,t)=>Im.call(e,t),gs=(e,t)=>Oe(e,t)&&null!=e[t],yd=e=>{const t={};return W(e,n=>{t[n]={}}),on(t)},_d=e=>void 0!==e.length,gr=Array.isArray,hr=(e,t,n)=>{if(!e)return!1;if(n=n||e,_d(e)){for(let o=0,r=e.length;o<r;o++)if(!1===t.call(n,e[o],o,e))return!1}else for(const o in e)if(Oe(e,o)&&!1===t.call(n,e[o],o,e))return!1;return!0},pl=(e,t)=>{const n=[];return hr(e,(o,r)=>{n.push(t(o,r,e))}),n},ni=(e,t)=>{const n=[];return hr(e,(o,r)=>{t&&!t(o,r,e)||n.push(o)}),n},ra=(e,t,n,o)=>{let r=Bt(n)?e[0]:n;for(let s=0;s<e.length;s++)r=t.call(o,r,e[s],s);return r},Cd=(e,t,n)=>{for(let o=0,r=e.length;o<r;o++)if(t.call(n,e[o],o,e))return o;return-1},zr=e=>e[e.length-1],Vo=e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)},Hr=()=>hs(0,0),hs=(e,t)=>({major:e,minor:t}),oi={nu:hs,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?Hr():((o,r)=>{const s=((a,l)=>{for(let c=0;c<a.length;c++){const d=a[c];if(d.test(l))return d}})(o,r);if(!s)return{major:0,minor:0};const i=a=>Number(r.replace(s,"$"+a));return hs(i(1),i(2))})(e,n)},unknown:Hr},sa=(e,t)=>{const n=String(t).toLowerCase();return Tt(e,o=>o.search(n))},wd=(e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t,Ed=(e,t)=>Qe(e,t)?e.substring(t.length):e,St=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!Bt(o)||r+t.length<=o)},Qe=(e,t)=>wd(e,t,0),fn=(e,t)=>wd(e,t,e.length-t.length),gn=e=>t=>t.replace(e,""),zt=gn(/^\s+|\s+$/g),ia=gn(/^\s+/g),qr=gn(/\s+$/g),ln=e=>e.length>0,To=e=>!ln(e),ri=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?w.none():w.some(n)},si=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wn=e=>t=>St(t,e),xd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>St(e,"edge/")&&St(e,"chrome")&&St(e,"safari")&&St(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,si],search:e=>St(e,"chrome")&&!St(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>St(e,"msie")||St(e,"trident")},{name:"Opera",versionRegexes:[si,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wn("firefox")},{name:"Safari",versionRegexes:[si,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(St(e,"safari")||St(e,"mobile/"))&&St(e,"applewebkit")}],bl=[{name:"Windows",search:wn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>St(e,"iphone")||St(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:wn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wn("linux"),versionRegexes:[]},{name:"Solaris",search:wn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],aa={browsers:Z(xd),oses:Z(bl)},yl="Chromium",Cl="Firefox",El=e=>{const t=e.current,o=r=>()=>t===r;return{current:t,version:e.version,isEdge:o("Edge"),isChromium:o(yl),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Cl),isSafari:o("Safari")}},kd=()=>El({current:void 0,version:oi.unknown()}),Sd=El,xl=(Z("Edge"),Z(yl),Z("IE"),Z("Opera"),Z(Cl),Z("Safari"),"Windows"),kl="Android",pr="Solaris",Bn="FreeBSD",la="ChromeOS",ca=e=>{const t=e.current,o=r=>()=>t===r;return{current:t,version:e.version,isWindows:o(xl),isiOS:o("iOS"),isAndroid:o(kl),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(pr),isFreeBSD:o(Bn),isChromeOS:o(la)}},Oo=()=>ca({current:void 0,version:oi.unknown()}),Wr=ca,da=(Z(xl),Z("iOS"),Z(kl),Z("Linux"),Z("macOS"),Z(pr),Z(Bn),Z(la),e=>window.matchMedia(e).matches);let ps=Vo(()=>((e,t,n)=>{const o=aa.browsers(),r=aa.oses(),s=t.bind(l=>{return c=o,ms(l.brands,u=>{const f=u.brand.toLowerCase();return Tt(c,p=>{var g;return f===(null===(g=p.brand)||void 0===g?void 0:g.toLowerCase())}).map(p=>({current:p.name,version:oi.nu(parseInt(u.version,10),0)}))});var c}).orThunk(()=>{return sa(o,c=e).map(d=>{const u=oi.detect(d.versionRegexes,c);return{current:d.name,version:u}});var c}).fold(kd,Sd),i=(l=r,c=e,sa(l,c).map(d=>{const u=oi.detect(d.versionRegexes,c);return{current:d.name,version:u}})).fold(Oo,Wr),a=((l,c,d,u)=>{const f=l.isiOS()&&!0===/ipad/i.test(d),p=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),b=g||u("(pointer:coarse)"),h=f||!p&&g&&u("(min-device-width:768px)"),v=p||g&&!h,_=c.isSafari()&&l.isiOS()&&!1===/safari/i.test(d),C=!v&&!h&&!_;return{isiPad:Z(f),isiPhone:Z(p),isTablet:Z(h),isPhone:Z(v),isTouch:Z(b),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Z(_),isDesktop:Z(C)}})(i,s,e,n);var l,c;return{browser:s,os:i,deviceType:a}})(navigator.userAgent,w.from(navigator.userAgentData),da));const qn=()=>ps(),Nd=navigator.userAgent,br=qn(),Wn=br.browser,ro=br.os,hn=br.deviceType,jm=-1!==Nd.indexOf("Windows Phone"),Pe={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Wn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Wn.isIE(),windowsPhone:jm,browser:{current:Wn.current,version:Wn.version,isChromium:Wn.isChromium,isEdge:Wn.isEdge,isFirefox:Wn.isFirefox,isIE:Wn.isIE,isOpera:Wn.isOpera,isSafari:Wn.isSafari},os:{current:ro.current,version:ro.version,isAndroid:ro.isAndroid,isChromeOS:ro.isChromeOS,isFreeBSD:ro.isFreeBSD,isiOS:ro.isiOS,isLinux:ro.isLinux,isMacOS:ro.isMacOS,isSolaris:ro.isSolaris,isWindows:ro.isWindows},deviceType:{isDesktop:hn.isDesktop,isiPad:hn.isiPad,isiPhone:hn.isiPhone,isPhone:hn.isPhone,isTablet:hn.isTablet,isTouch:hn.isTouch,isWebView:hn.isWebView}},ua=/^\s*|\s*$/g,Sl=e=>kt(e)?"":(""+e).replace(ua,""),bs=function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),hr(e,(r,s)=>!1!==t.call(o,r,s,n)&&(bs(r,t,n,o),!0)))},X={trim:Sl,isArray:gr,is:(e,t)=>t?!("array"!==t||!gr(e))||typeof e===t:void 0!==e,toArray:e=>{if(gr(e))return e;{const t=[];for(let n=0,o=e.length;n<o;n++)t[n]=e[n];return t}},makeMap:(e,t,n={})=>{const o=ge(e)?e.split(t||","):e||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:hr,map:pl,grep:ni,inArray:(e,t)=>{if(e)for(let n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},hasOwn:Oe,extend:(e,...t)=>{for(let n=0;n<t.length;n++){const o=t[n];for(const r in o)if(Oe(o,r)){const s=o[r];void 0!==s&&(e[r]=s)}}return e},walk:bs,resolve:(e,t=window)=>{const n=e.split(".");for(let o=0,r=n.length;o<r&&(t=t[n[o]]);o++);return t},explode:(e,t)=>Je(e)?e:""===e?[]:pl(e.split(t||","),Sl),_addCacheSuffix:e=>{const t=Pe.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Ro=(e,t,n=gl)=>e.exists(o=>n(o,t)),Nl=(e,t,n=gl)=>Kt(e,t,n).getOr(e.isNone()&&t.isNone()),Kt=(e,t,n)=>e.isSome()&&t.isSome()?w.some(n(e.getOrDie(),t.getOrDie())):w.none(),Vr=(e,t)=>e?w.some(t):w.none(),vs=typeof window<"u"?window:Function("return this;")(),Ad=(e,t)=>((n,o)=>{let r=o??vs;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(e.split("."),t),Td=Object.getPrototypeOf,Fe=e=>e.dom.nodeName.toLowerCase(),ma=e=>e.dom.nodeType,fa=e=>t=>ma(t)===e,Kr=e=>xn(e)&&(e=>{const t=Ad("ownerDocument.defaultView",e);return Vt(e)&&((n=t,((o,r)=>{const s=Ad(o,r);if(null==s)throw new Error(o+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Td(e).constructor.name));var n})(e.dom),xn=fa(1),kn=fa(3),Tl=fa(9),Ol=fa(11),ys=e=>t=>xn(t)&&Fe(t)===e,Rl=(e,t,n)=>{if(!(ge(n)||dr(n)||Dn(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},wt=(e,t,n)=>{Rl(e.dom,t,n)},so=(e,t)=>{const n=e.dom;tt(t,(o,r)=>{Rl(n,r,o)})},pn=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},Do=(e,t)=>w.from(pn(e,t)),Bo=(e,t)=>{const n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Ht=(e,t)=>{e.dom.removeAttribute(t)},Dl=e=>$t(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),ga=(e,t)=>{const n=pn(e,t);return void 0===n||""===n?[]:n.split(" ")},_s=e=>void 0!==e.dom.classList,Bl=e=>ga(e,"class"),Ll=(e,t)=>((n,o,r)=>{const s=ga(n,o).concat([r]);return wt(n,o,s.join(" ")),!0})(e,"class",t),ha=(e,t)=>((n,o,r)=>{const s=ke(ga(n,o),i=>i!==r);return s.length>0?wt(n,o,s.join(" ")):Ht(n,o),!1})(e,"class",t),Yr=(e,t)=>{_s(e)?e.dom.classList.add(t):Ll(e,t)},Od=e=>{0===(_s(e)?e.dom.classList:Bl(e)).length&&Ht(e,"class")},ii=(e,t)=>{_s(e)?e.dom.classList.remove(t):ha(e,t),Od(e)},pa=(e,t)=>_s(e)&&e.dom.classList.contains(t),Cs=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},vr=(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Cs(n.childNodes[0])},Lt=(e,t)=>{const n=(t||document).createElement(e);return Cs(n)},ws=(e,t)=>{const n=(t||document).createTextNode(e);return Cs(n)},T=Cs,Pl=(e,t)=>{const n=[],o=s=>(n.push(s),t(s));let r=t(e);do{r=r.bind(o)}while(r.isSome());return n},rn=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},ba=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,We=(e,t)=>e.dom===t.dom,Lo=(e,t)=>{const n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Dd=e=>T(e.dom.ownerDocument),Ko=e=>Tl(e)?e:Dd(e),ai=e=>T(Ko(e).dom.defaultView),Vn=e=>w.from(e.dom.parentNode).map(T),li=e=>w.from(e.dom.parentElement).map(T),Ml=(e,t)=>{const n=Ke(t)?t:at;let o=e.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,i=T(s);if(r.push(i),!0===n(i))break;o=s}return r},Xr=e=>w.from(e.dom.previousSibling).map(T),Po=e=>w.from(e.dom.nextSibling).map(T),yr=e=>ti(Pl(e,Xr)),Bd=e=>Pl(e,Po),Nt=e=>ze(e.dom.childNodes,T),Es=(e,t)=>w.from(e.dom.childNodes[t]).map(T),Il=e=>Es(e,0),Fl=e=>Es(e,e.dom.childNodes.length-1),jl=e=>e.dom.childNodes.length,$l=e=>Ol(e)&&Q(e.dom.host),Ld=Ke(Element.prototype.attachShadow)&&Ke(Node.prototype.getRootNode),$m=Z(Ld),_r=Ld?e=>T(e.dom.getRootNode()):Ko,Ln=e=>$l(e)?e:(t=>{const n=t.dom.head;if(null==n)throw new Error("Head is not available yet");return T(n)})(Ko(e)),Pd=e=>T(e.dom.host),Ul=e=>{if($m()&&Q(e.target)){const t=T(e.target);if(xn(t)&&Md(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return Ut(n)}}return w.from(e.target)},Md=e=>Q(e.dom.shadowRoot),xs=e=>{const t=kn(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return(o=>{const r=_r(o);return $l(r)?w.some(r):w.none()})(T(t)).fold(()=>n.body.contains(t),fl(xs,Pd))};var Id=(e,t,n,o,r)=>e(n,o)?w.some(n):Ke(r)&&r(n)?w.none():t(n,o,r);const Mo=(e,t,n)=>{let o=e.dom;const r=Ke(n)?n:at;for(;o.parentNode;){o=o.parentNode;const s=T(o);if(t(s))return w.some(s);if(r(s))break}return w.none()},Io=(e,t,n)=>Id((o,r)=>r(o),Mo,e,t,n),Fd=(e,t)=>{const n=o=>{for(let r=0;r<o.childNodes.length;r++){const s=T(o.childNodes[r]);if(t(s))return w.some(s);const i=n(o.childNodes[r]);if(i.isSome())return i}return w.none()};return n(e.dom)},ci=(e,t,n)=>Mo(e,o=>rn(o,t),n),ks=(e,t)=>((n,o)=>{const r=void 0===o?document:o.dom;return ba(r)?w.none():w.from(r.querySelector(n)).map(T)})(t,e),Gr=(e,t,n)=>Id((o,r)=>rn(o,r),ci,e,t,n),Qr=(e,t=!1)=>{return xs(e)?e.dom.isContentEditable:(n=e,Gr(n,"[contenteditable]")).fold(Z(t),o=>"true"===jd(o));var n},jd=e=>e.dom.contentEditable,Ss=e=>void 0!==e.style&&Ke(e.style.getPropertyValue),zl=(e,t,n)=>{if(!ge(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Ss(e)&&e.style.setProperty(t,n)},di=(e,t,n)=>{zl(e.dom,t,n)},ui=(e,t)=>{const n=e.dom;tt(t,(o,r)=>{zl(n,r,o)})},Kn=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||xs(e)?o:Pn(n,t)},Pn=(e,t)=>Ss(e)?e.style.getPropertyValue(t):"",va=(e,t)=>{const o=Pn(e.dom,t);return w.from(o).filter(r=>r.length>0)},Hl=e=>{const t={},n=e.dom;if(Ss(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);t[r]=n.style[r]}return t},ql=(e,t)=>{var n,o;o=t,Ss(n=e.dom)&&n.style.removeProperty(o),Ro(Do(e,"style").map(zt),"")&&Ht(e,"style")},cn=(e,t)=>{Vn(e).each(n=>{n.dom.insertBefore(t.dom,e.dom)})},Yo=(e,t)=>{Po(e).fold(()=>{Vn(e).each(n=>{Et(n,t)})},n=>{cn(n,t)})},Wl=(e,t)=>{Il(e).fold(()=>{Et(e,t)},n=>{e.dom.insertBefore(t.dom,n.dom)})},Et=(e,t)=>{e.dom.appendChild(t.dom)},$d=(e,t)=>{cn(e,t),Et(t,e)},Jr=(e,t)=>{W(t,n=>{Et(e,n)})},Ns=e=>{e.dom.textContent="",W(Nt(e),t=>{ot(t)})},ot=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Fo=e=>{const t=Nt(e);var n,o;t.length>0&&(n=e,W(o=t,(r,s)=>{Yo(0===s?n:o[s-1],r)})),ot(e)},mi=e=>ze(e,T),Ud=e=>e.dom.innerHTML,ya=(e,t)=>{const n=Dd(e).dom,o=T(n.createDocumentFragment()),r=((s,i)=>{const a=(i||document).createElement("div");return a.innerHTML=s,Nt(T(a))})(t,n);Jr(o,r),Ns(e),Et(e,o)},Xo=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},Vl=(e,t)=>({left:e,top:t,translate:(n,o)=>Vl(e+n,t+o)}),As=Vl,fi=(e,t)=>void 0!==e?e:void 0!==t?t:0,_a=e=>{const t=e.dom,n=t.ownerDocument.body;return n===t?As(n.offsetLeft,n.offsetTop):xs(e)?(o=>{const r=o.getBoundingClientRect();return As(r.left,r.top)})(t):As(0,0)},Ca=e=>{const t=void 0!==e?e.dom:document;return As(t.body.scrollLeft||t.documentElement.scrollLeft,t.body.scrollTop||t.documentElement.scrollTop)},Kl=(e,t,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(e,t)},zd=(e,t)=>{qn().browser.isSafari()&&Ke(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Hd=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),qd=e=>{const t=void 0===e?window:e,o=Ca(T(t.document));return(r=>{const s=void 0===r?window:r;return qn().browser.isFirefox()?w.none():w.from(s.visualViewport)})(t).fold(()=>{const r=t.document.documentElement;return Hd(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Hd(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Yl=(e,t)=>{let n=[];return W(Nt(e),o=>{t(o)&&(n=n.concat([o])),n=n.concat(Yl(o,t))}),n},Yt=(e,t)=>((n,o)=>{const r=void 0===o?document:o.dom;return ba(r)?[]:ze(r.querySelectorAll(n),T)})(t,e),Wd=(e,t,n)=>ci(e,t,n).isSome();class Ot{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,o,r){if(t){if(!r&&t[n])return t[n];if(t!==this.rootNode){let s=t[o];if(s)return s;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(s=i[o],s)return s}}}findPreviousNode(t,n){if(t){const o=t.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=t.parentNode;if(r&&r!==this.rootNode)return r}}}const es=e=>t=>!!t&&t.nodeType===e,wa=e=>!!e&&!Object.getPrototypeOf(e),ie=es(1),sn=e=>ie(e)&&Kr(T(e)),Ts=e=>{const t=e.toLowerCase();return n=>Q(n)&&n.nodeName.toLowerCase()===t},io=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return ae(t,o)}return!1}},Ea=(e,t)=>{const n=t.toLowerCase().split(" ");return o=>{if(ie(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const i=r.getComputedStyle(o,null);if((i?i.getPropertyValue(e):null)===n[s])return!0}}return!1}},Vd=e=>t=>ie(t)&&t.hasAttribute(e),ts=e=>ie(e)&&e.hasAttribute("data-mce-bogus"),Go=e=>ie(e)&&"TABLE"===e.tagName,Kd=e=>t=>!(!sn(t)||t.contentEditable!==e&&t.getAttribute("data-mce-contenteditable")!==e),Xl=io(["textarea","input"]),Y=es(3),Gl=es(4),xa=es(7),Qo=es(8),Os=es(9),ns=es(11),ut=Ts("br"),Yd=Ts("img"),Yn=Kd("true"),st=Kd("false"),jo=io(["td","th"]),Um=io(["td","th","caption"]),$o=io(["video","audio","object","embed"]),ka=Ts("li"),gi=Ts("details"),zm=Ts("summary"),Pt="\xa0",Cr=e=>"\ufeff"===e,hi=((e,t)=>{const n=o=>e(o)?w.from(o.dom.nodeValue):w.none();return{get:o=>{if(!e(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!e(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(kn),pi=e=>hi.get(e),Xd=e=>hi.getOption(e),Ds=e=>{let t;return n=>(t=t||Ao(e,Ct),Oe(t,Fe(n)))},os=e=>xn(e)&&"br"===Fe(e),Bs=Ds(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Jo=Ds(["ul","ol","dl"]),bi=Ds(["li","dd","dt"]),Hm=Ds(["thead","tbody","tfoot"]),vi=Ds(["td","th"]),Sa=Ds(["pre","script","textarea","style"]),yi=()=>{const e=Lt("br");return wt(e,"data-mce-bogus","1"),e},wr=e=>{Ns(e),Et(e,yi())},Mt="\ufeff",Na=Cr,bn=e=>e.replace(/\uFEFF/g,""),qm=ie,rs=Y,Er=e=>(rs(e)&&(e=e.parentNode),qm(e)&&e.hasAttribute("data-mce-caret")),Zo=e=>rs(e)&&Na(e.data),Xt=e=>Er(e)||Zo(e),Ql=e=>e.firstChild!==e.lastChild||!ut(e.firstChild),_i=e=>{const t=e.container();return!!Y(t)&&(t.data.charAt(e.offset())===Mt||e.isAtStart()&&Zo(t.previousSibling))},Aa=e=>{const t=e.container();return!!Y(t)&&(t.data.charAt(e.offset()-1)===Mt||e.isAtEnd()&&Zo(t.nextSibling))},Ls=e=>rs(e)&&e.data[0]===Mt,Ci=e=>rs(e)&&e.data[e.data.length-1]===Mt,wi=e=>e&&e.hasAttribute("data-mce-caret")?((t=>{var n;const o=t.getElementsByTagName("br"),r=o[o.length-1];ts(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Gd=e=>Er(e.startContainer),xr=Yn,kr=st,Wm=ut,Vm=Y,Km=io(["script","style","textarea"]),Qd=io(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Ym=io(["table"]),Xm=Xt,Xn=e=>!Xm(e)&&(Vm(e)?!Km(e.parentNode):Qd(e)||Wm(e)||Ym(e)||Jl(e)),Jl=e=>{return!(ie(t=e)&&"true"===t.getAttribute("unselectable"))&&kr(e);var t},Zl=(e,t)=>Xn(e)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(Jl(r))return!1;if(xr(r))return!0}return!0})(e,t),Ta=/^[ \t\r\n]*$/,ao=e=>Ta.test(e),Gm=e=>{for(const t of e)if(!Cr(t))return!1;return!0},Jd=e=>"\n"===e||"\r"===e,Ps=(e,t=4,n=!0,o=!0)=>{const r=(l=t)<=0?"":new Array(l+1).join(" "),s=e.replace(/\t/g,r);var l;return $t(s,(a,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Pt?a.pcIsSpace||""===a.str&&n||a.str.length===s.length-1&&o||(d=a.str.length+1)<(c=s).length&&d>=0&&Jd(c[d])?{pcIsSpace:!1,str:a.str+Pt}:{pcIsSpace:!0,str:a.str+" "}:{pcIsSpace:Jd(l),str:a.str+l};var c,d},{pcIsSpace:!1,str:""}).str},x=(e,t)=>{return Xn(e)&&(o=t,!(Y(n=e)&&ao(n.data)&&!((r,s)=>{const i=T(s),a=T(r);return Wd(a,"pre,code",se(We,i))})(n,o)))||(n=>ie(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(e)||m(e);var n,o},m=Vd("data-mce-bookmark"),y=Vd("data-mce-bogus"),S=e=>ie(e)&&"all"===e.getAttribute("data-mce-bogus"),$=e=>li(T(e)).exists(t=>!Qr(t)),I=(e,t=!0)=>((n,o)=>{let r=0;if(x(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const i=new Ot(s,n);do{if(o){if(S(s)){s=i.next(!0);continue}if(y(s)){s=i.next();continue}}if(Yn(s)&&$(s))return!1;if(ut(s))r++,s=i.next();else{if(x(s,n))return!1;s=i.next()}}while(s);return r<=1}})(e.dom,t),V=e=>"svg"===e.toLowerCase(),J=e=>V(e.nodeName),ue=e=>"svg"===e?.nodeName?"svg":"html",Se=["svg"],we="data-mce-block",ye=e=>{return ze((t=e,ke(on(t),n=>!/[A-Z]/.test(n))),t=>`${t}:`+ze(Se,n=>`not(${n} ${t})`).join(":")).join(",");var t},qe=(e,t)=>Q(t.querySelector(e))?(t.setAttribute(we,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(we),!1),Me=(e,t)=>{const n=ye(e.getTransparentElements()),o=ye(e.getBlockElements());return ke(t.querySelectorAll(n),r=>qe(o,r))},He=(e,t)=>{var n;const o=t?"lastChild":"firstChild";for(let r=e[o];r;r=r[o])if(I(T(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},$e=(e,t)=>{const n=Me(e,t);var o,r,s;((e,t,n)=>{const o=e.getBlockElements(),r=T(t),s=a=>Fe(a)in o,i=a=>We(a,r);W(mi(n),a=>{Mo(a,s,i).each(l=>{const c=ke(Nt(a),f=>s(f)&&!e.isValidChild(Fe(l),Fe(f)));if(c.length>0){const d=li(l);W(c,u=>{Mo(u,s,i).each(f=>{((p,g)=>{const b=document.createRange(),h=p.parentNode;if(h){b.setStartBefore(p),b.setEndBefore(g);const v=b.extractContents();He(v,!0),b.setStartAfter(g),b.setEndAfter(p);const _=b.extractContents();He(_,!1),I(T(v))||h.insertBefore(v,p),I(T(g))||h.insertBefore(g,p),I(T(_))||h.insertBefore(_,p),h.removeChild(p)}})(f.dom,u.dom)})}),d.each(u=>Me(e,u.dom))}})})})(e,t,n),o=e,r=t,s=n,W([...s,...Ue(o,r)?[r]:[]],i=>W(Yt(T(i),i.nodeName.toLowerCase()),a=>{Xe(o,a.dom)&&Fo(a)}))},mt=(e,t)=>{if(Ze(e,t)){const n=ye(e.getBlockElements());qe(n,t)}},ft=e=>e.hasAttribute(we),Ve=(e,t)=>Oe(e.getTransparentElements(),t),Ze=(e,t)=>ie(t)&&Ve(e,t.nodeName),Ue=(e,t)=>Ze(e,t)&&ft(t),Xe=(e,t)=>Ze(e,t)&&!ft(t),it=(e,t)=>1===t.type&&Ve(e,t.name)&&ge(t.attr(we)),gt=qn().browser,lt=e=>Tt(e,xn),Rt=(e,t)=>e.children&&ae(e.children,t),Sn=(e,t={})=>{let n=0;const o={},r=T(e),s=Ko(r),i=u=>{Et(Ln(r),u)},a=u=>{const f=Ln(r);ks(f,"#"+u).each(ot)},l=u=>nt(o,u).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),c=u=>new Promise((f,p)=>{let g;const b=X._addCacheSuffix(u),h=l(b);o[b]=h,h.count++;const v=(E,N)=>{W(E,ee),h.status=N,h.passed=[],h.failed=[],g&&(g.onload=null,g.onerror=null,g=null)},_=()=>v(h.passed,2),C=()=>v(h.failed,3);if(f&&h.passed.push(f),p&&h.failed.push(p),1===h.status)return;if(2===h.status)return void _();if(3===h.status)return void C();h.status=1;const k=Lt("link",s.dom);so(k,{rel:"stylesheet",type:"text/css",id:h.id}),t.contentCssCors&&wt(k,"crossOrigin","anonymous"),t.referrerPolicy&&wt(k,"referrerpolicy",t.referrerPolicy),g=k.dom,g.onload=_,g.onerror=C,i(k),wt(k,"href",b)}),d=u=>{const f=X._addCacheSuffix(u);nt(o,f).each(p=>{0==--p.count&&(delete o[f],a(p.id))})};return{load:c,loadRawCss:(u,f)=>{const p=l(u);o[u]=p,p.count++;const g=Lt("style",s.dom);so(g,{rel:"stylesheet",type:"text/css",id:p.id}),g.dom.innerHTML=f,i(g)},loadAll:u=>Promise.allSettled(ze(u,f=>c(f).then(Z(f)))).then(f=>{const p=No(f,g=>"fulfilled"===g.status);return p.fail.length>0?Promise.reject(ze(p.fail,g=>g.reason)):ze(p.pass,g=>g.value)}),unload:d,unloadRawCss:u=>{nt(o,u).each(f=>{0==--f.count&&(delete o[u],a(f.id))})},unloadAll:u=>{W(u,f=>{d(f)})},_setReferrerPolicy:u=>{t.referrerPolicy=u},_setContentCssCors:u=>{t.contentCssCors=u}}},Gn=(()=>{const e=new WeakMap;return{forElement:(t,n)=>{const o=_r(t).dom;return w.from(e.get(o)).getOrThunk(()=>{const r=Sn(o,n);return e.set(o,r),r})}}})(),dn=(e,t,n)=>Q(e)&&(x(e,t)||n.isInline(e.nodeName.toLowerCase())),Mn=e=>"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type"),Nn=(e,t,n,o)=>{var r;const s=o||t;if(ie(t)&&Mn(t))return t;const i=t.childNodes;for(let a=i.length-1;a>=0;a--)Nn(e,i[a],n,s);if(ie(t)){const a=t.childNodes;1===a.length&&Mn(a[0])&&(null===(r=t.parentNode)||void 0===r||r.insertBefore(a[0],t))}return ns(a=t)||Os(a)||x(t,s)||(a=>!!ie(a)&&a.childNodes.length>0)(t)||((a,l,c)=>Y(a)&&a.data.length>0&&((d,u,f)=>{const p=new Ot(d,u).prev(!1),g=new Ot(d,u).next(!1),b=Bt(p)||dn(p,u,f),h=Bt(g)||dn(g,u,f);return b&&h})(a,l,c))(t,s,n)||e.remove(t),t;var a},Dt=X.makeMap,In=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fn=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ms=/[<>&\"\']/g,Zt=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,pt={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},It={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Qn={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},er=(e,t)=>{const n={};if(e){const o=e.split(",");t=t||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],t));if(!It[s]){const i="&"+o[r+1]+";";n[s]=i,n[i]=s}}return n}},Is=er("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ec=(e,t)=>e.replace(t?In:Fn,n=>It[n]||n),tc=(e,t)=>e.replace(t?In:Fn,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":It[n]||"&#"+n.charCodeAt(0)+";"),Fs=(e,t,n)=>{const o=n||Is;return e.replace(t?In:Fn,r=>It[r]||o[r]||r)},Sr={encodeRaw:ec,encodeAllRaw:e=>(""+e).replace(Ms,t=>It[t]||t),encodeNumeric:tc,encodeNamed:Fs,getEncodeFunc:(e,t)=>{const n=er(t)||Is,o=Dt(e.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?In:Fn,i=>void 0!==It[i]?It[i]:void 0!==n[i]?n[i]:i.length>1?"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";":"&#"+i.charCodeAt(0)+";"):o.named?t?(r,s)=>Fs(r,s,n):Fs:o.numeric?tc:ec},decode:e=>e.replace(Zt,(t,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):pt[n]||String.fromCharCode(n):Qn[t]||Is[t]||(o=>{const r=Lt("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(t))},Gt=(e,t)=>(e=X.trim(e))?e.split(t||" "):[],Oa=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Ra={},js=X.makeMap,lo=X.each,Da=X.extend,nc=X.explode,Zd=(e,t={})=>{const n=js(e," ",js(e.toUpperCase()," "));return Da(n,t)},eu=e=>Zd("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),tr=(e,t)=>{if(e){const n={};return ge(e)&&(e={"*":e}),lo(e,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===t?js(o,/[, ]/):nc(o,/[, ]/)}),n}},co=(e={})=>{var t;const n={},o={};let r=[];const s={},i={},a=(de,De,Le)=>{const Te=e[de];if(Te)return js(Te,/[, ]/,js(Te.toUpperCase(),/[, ]/));{let Ie=Ra[de];return Ie||(Ie=Zd(De,Le),Ra[de]=Ie),Ie}},l=null!==(t=e.schema)&&void 0!==t?t:"html5",c=(de=>{const{globalAttributes:De,phrasingContent:Le,flowContent:Te}=(bt=>{let Ft,en,Cn;Ft="id accesskey class dir lang style tabindex title role",en="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",Cn="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==bt&&(Ft+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",en+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",Cn+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==bt&&(Ft+=" xml:lang",Cn=[Cn,"acronym applet basefont big font strike tt"].join(" "),en=[en,"center dir isindex noframes"].join(" "));const Co=[en,Cn].join(" ");return{globalAttributes:Ft,blockContent:en,phrasingContent:Cn,flowContent:Co}})(de),Ie={},Wt=(bt,Ft,en)=>{Ie[bt]={attributes:Ao(Ft,Z({})),attributesOrder:Ft,children:Ao(en,Z({}))}},be=(bt,Ft="",en="")=>{const Cn=Gt(en),Co=Gt(bt);let an=Co.length;const wo=Gt([De,Ft].join(" "));for(;an--;)Wt(Co[an],wo.slice(),Cn)},Be=(bt,Ft)=>{const en=Gt(bt),Cn=Gt(Ft);let Co=en.length;for(;Co--;){const an=Ie[en[Co]];for(let wo=0,jt=Cn.length;wo<jt;wo++)an.attributes[Cn[wo]]={},an.attributesOrder.push(Cn[wo])}};return"html5-strict"!==de&&(W(Gt("acronym applet basefont big font strike tt"),bt=>{be(bt,"",Le)}),W(Gt("center dir isindex noframes"),bt=>{be(bt,"",Te)})),be("html","manifest","head body"),be("head","","base command link meta noscript script style title"),be("title hr noscript br"),be("base","href target"),be("link","href rel media hreflang type sizes hreflang"),be("meta","name http-equiv content charset"),be("style","media type scoped"),be("script","src async defer type charset"),be("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",Te),be("dd div","",Te),be("address dt caption","","html4"===de?Le:Te),be("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",Le),be("blockquote","cite",Te),be("ol","reversed start type","li"),be("ul","","li"),be("li","value",Te),be("dl","","dt dd"),be("a","href target rel media hreflang type","html4"===de?Le:Te),be("q","cite",Le),be("ins del","cite datetime",Te),be("img","src sizes srcset alt usemap ismap width height"),be("iframe","src name width height",Te),be("embed","src type width height"),be("object","data type typemustmatch name usemap form width height",[Te,"param"].join(" ")),be("param","name value"),be("map","name",[Te,"area"].join(" ")),be("area","alt coords shape href target rel media hreflang type"),be("table","border","caption colgroup thead tfoot tbody tr"+("html4"===de?" col":"")),be("colgroup","span","col"),be("col","span"),be("tbody thead tfoot","","tr"),be("tr","","td th"),be("td","colspan rowspan headers",Te),be("th","colspan rowspan headers scope abbr",Te),be("form","accept-charset action autocomplete enctype method name novalidate target",Te),be("fieldset","disabled form name",[Te,"legend"].join(" ")),be("label","form for",Le),be("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),be("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===de?Te:Le),be("select","disabled form multiple name required size","option optgroup"),be("optgroup","disabled label","option"),be("option","disabled label selected value"),be("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),be("menu","type label",[Te,"li"].join(" ")),be("noscript","",Te),"html4"!==de&&(be("wbr"),be("ruby","",[Le,"rt rp"].join(" ")),be("figcaption","",Te),be("mark rt rp bdi","",Le),be("summary","",[Le,"h1 h2 h3 h4 h5 h6"].join(" ")),be("canvas","width height",Te),be("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[Te,"track source"].join(" ")),be("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[Te,"track source"].join(" ")),be("picture","","img source"),be("source","src srcset type media sizes"),be("track","kind src srclang label default"),be("datalist","",[Le,"option"].join(" ")),be("article section nav aside main header footer","",Te),be("hgroup","","h1 h2 h3 h4 h5 h6"),be("figure","",[Te,"figcaption"].join(" ")),be("time","datetime",Le),be("dialog","open",Te),be("command","type label icon disabled checked radiogroup command"),be("output","for form name",Le),be("progress","value max",Le),be("meter","value min max low high optimum",Le),be("details","open",[Te,"summary"].join(" ")),be("keygen","autofocus challenge disabled form keytype name"),Wt("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==de&&(Be("script","language xml:space"),Be("style","xml:space"),Be("object","declare classid code codebase codetype archive standby align border hspace vspace"),Be("embed","align name hspace vspace"),Be("param","valuetype type"),Be("a","charset name rev shape coords"),Be("br","clear"),Be("applet","codebase archive code object alt name width height align hspace vspace"),Be("img","name longdesc align border hspace vspace"),Be("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Be("font basefont","size color face"),Be("input","usemap align"),Be("select"),Be("textarea"),Be("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Be("ul","type compact"),Be("li","type"),Be("ol dl menu dir","compact"),Be("pre","width xml:space"),Be("hr","align noshade size width"),Be("isindex","prompt"),Be("table","summary width frame rules cellspacing cellpadding align bgcolor"),Be("col","width align char charoff valign"),Be("colgroup","width align char charoff valign"),Be("thead","align char charoff valign"),Be("tr","align char charoff valign bgcolor"),Be("th","axis align char charoff valign nowrap bgcolor width height"),Be("form","accept"),Be("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Be("tfoot","align char charoff valign"),Be("tbody","align char charoff valign"),Be("area","nohref"),Be("body","background bgcolor text link vlink alink")),"html4"!==de&&(Be("input button select textarea","autofocus"),Be("input textarea","placeholder"),Be("a","download"),Be("link script img","crossorigin"),Be("img","loading"),Be("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==de&&W([Ie.video,Ie.audio],bt=>{delete bt.children.audio,delete bt.children.video}),W(Gt("a form meter progress dfn"),bt=>{Ie[bt]&&delete Ie[bt].children[bt]}),delete Ie.caption.children.table,delete Ie.script,Ie})(l);!1===e.verify_html&&(e.valid_elements="*[*]");const d=tr(e.valid_styles),u=tr(e.invalid_styles,"map"),f=tr(e.valid_classes,"map"),p=a("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=a("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=a("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=a("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",_=a("non_empty_elements",v+" pre svg",b),C=a("move_caret_before_on_enter_elements",v+" table",b),k="h1 h2 h3 h4 h5 h6",E=a("text_block_elements",k+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),N=a("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",E),R=a("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),L=a("transparent_elements","a ins del canvas map"),P=a("wrap_block_elements","pre "+k);lo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),de=>{i[de]=new RegExp("</"+de+"[^>]*>","gi")});const F=de=>{const De=w.from(n["@"]),Le=/[*?+]/;W(((Te,Ie)=>{const Wt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return zn(Gt(Ie,","),be=>{const Be=Wt.exec(be);if(Be){const bt=Be[1],Ft=Be[2],en=Be[3],Cn=Be[4],Co=Be[5],an={attributes:{},attributesOrder:[]};if(Te.each(wo=>{return ds=an,tt((jt=wo).attributes,(Eo,qo)=>{ds.attributes[qo]=Eo}),void ds.attributesOrder.push(...jt.attributesOrder);var jt,ds}),"#"===bt?an.paddEmpty=!0:"-"===bt&&(an.removeEmpty=!0),"!"===Cn&&(an.removeEmptyAttrs=!0),Co&&((wo,jt)=>{const ds=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Eo=/[*?+]/,{attributes:qo,attributesOrder:Xi}=jt;W(Gt(wo,"|"),ud=>{const Gi=ds.exec(ud);if(Gi){const xo={},Lm=Gi[1],vt=Gi[2].replace(/[\\:]:/g,":"),ar=Gi[3],Qi=Gi[4];if("!"===Lm&&(jt.attributesRequired=jt.attributesRequired||[],jt.attributesRequired.push(vt),xo.required=!0),"-"===Lm)return delete qo[vt],void Xi.splice(X.inArray(Xi,vt),1);if(ar&&("="===ar?(jt.attributesDefault=jt.attributesDefault||[],jt.attributesDefault.push({name:vt,value:Qi}),xo.defaultValue=Qi):"~"===ar?(jt.attributesForced=jt.attributesForced||[],jt.attributesForced.push({name:vt,value:Qi}),xo.forcedValue=Qi):"<"===ar&&(xo.validValues=X.makeMap(Qi,"?"))),Eo.test(vt)){const md=xo;jt.attributePatterns=jt.attributePatterns||[],md.pattern=Oa(vt),jt.attributePatterns.push(md)}else qo[vt]||Xi.push(vt),qo[vt]=xo}})})(Co,an),en&&(an.outputName=Ft),"@"===Ft){if(!Te.isNone())return[];Te=w.some(an)}return[en?{name:Ft,element:an,aliasName:en}:{name:Ft,element:an}]}return[]})})(De,de??""),({name:Te,element:Ie,aliasName:Wt})=>{if(Wt&&(n[Wt]=Ie),Le.test(Te)){const be=Ie;be.pattern=Oa(Te),r.push(be)}else n[Te]=Ie})},A=de=>{r=[],W(on(n),De=>{delete n[De]}),F(de)},D=de=>{delete Ra.text_block_elements,delete Ra.block_elements,W((De=>{const Le=/^(~)?(.+)$/;return zn(Gt(De,","),Te=>{const Ie=Le.exec(Te);if(Ie){const Wt="~"===Ie[1];return[{inline:Wt,cloneName:Wt?"span":"div",name:Ie[2]}]}return[]})})(de??""),({inline:De,name:Le,cloneName:Te})=>{if(o[Le]=o[Te],s[Le]=Te,_[Le.toUpperCase()]={},_[Le]={},De||(N[Le.toUpperCase()]={},N[Le]={}),!n[Le]){let Ie=n[Te];Ie=Da({},Ie),delete Ie.removeEmptyAttrs,delete Ie.removeEmpty,n[Le]=Ie}tt(o,(Ie,Wt)=>{Ie[Te]&&(o[Wt]=Ie=Da({},o[Wt]),Ie[Le]=Ie[Te])})})},M=de=>{W((De=>{const Le=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return zn(Gt(De,","),Te=>{const Ie=Le.exec(Te);if(Ie){const Wt=Ie[1];return[{operation:Wt?(Be=Wt,"-"===Be?"remove":"add"):"replace",name:Ie[2],validChildren:Gt(Ie[3],"|")}]}var Be;return[]})})(de??""),({operation:De,name:Le,validChildren:Te})=>{const Ie="replace"===De?{"#comment":{}}:o[Le];W(Te,Wt=>{"remove"===De?delete Ie[Wt]:Ie[Wt]={}}),o[Le]=Ie})},z=de=>{const De=n[de];if(De)return De;let Le=r.length;for(;Le--;){const Te=r[Le];if(Te.pattern.test(de))return Te}};e.valid_elements?(A(e.valid_elements),lo(c,(de,De)=>{o[De]=de.children})):(lo(c,(de,De)=>{n[De]={attributes:de.attributes,attributesOrder:de.attributesOrder},o[De]=de.children}),lo(Gt("strong/b em/i"),de=>{const De=Gt(de,"/");n[De[1]].outputName=De[0]}),lo(R,(de,De)=>{n[De]&&(e.padd_empty_block_inline_children&&(n[De].paddInEmptyBlock=!0),n[De].removeEmpty=!0)}),lo(Gt("ol ul blockquote a table tbody"),de=>{n[de]&&(n[de].removeEmpty=!0)}),lo(Gt("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),de=>{n[de]&&(n[de].paddEmpty=!0)}),lo(Gt("span"),de=>{n[de].removeEmptyAttrs=!0})),delete n.svg,D(e.custom_elements),M(e.valid_children),F(e.extended_valid_elements),M("+ol[ul|ol],+ul[ul|ol]"),lo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(de,De)=>{n[De]&&(n[De].parentsRequired=Gt(de))}),e.invalid_elements&&lo(nc(e.invalid_elements),de=>{n[de]&&delete n[de]}),z("span")||F("span[!data-mce-type|*]");const te=Z(d),G=Z(u),he=Z(f),me=Z(h),_e=Z(N),pe=Z(E),ne=Z(R),le=Z(Object.seal(b)),Ne=Z(g),O=Z(_),B=Z(C),H=Z(p),q=Z(L),K=Z(P),ce=Z(Object.seal(i)),ve=(de,De)=>{const Le=z(de);if(Le){if(!De)return!0;{if(Le.attributes[De])return!0;const Te=Le.attributePatterns;if(Te){let Ie=Te.length;for(;Ie--;)if(Te[Ie].pattern.test(De))return!0}}}return!1},Ae=de=>Oe(_e(),de),Ce=de=>!Qe(de,"#")&&ve(de)&&!Ae(de),et=Z(s);return{type:l,children:o,elements:n,getValidStyles:te,getValidClasses:he,getBlockElements:_e,getInvalidStyles:G,getVoidElements:le,getTextBlockElements:pe,getTextInlineElements:ne,getBoolAttrs:me,getElementRule:z,getSelfClosingElements:Ne,getNonEmptyElements:O,getMoveCaretBeforeOnEnterElements:B,getWhitespaceElements:H,getTransparentElements:q,getSpecialElements:ce,isValidChild:(de,De)=>{const Le=o[de.toLowerCase()];return!(!Le||!Le[De.toLowerCase()])},isValid:ve,isBlock:Ae,isInline:Ce,isWrapper:de=>Oe(K(),de)||Ce(de),getCustomElements:et,addValidElements:F,setValidElements:A,addCustomElements:D,addValidChildren:M}},Ba=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},tu=e=>{return{value:(n=Ba(e.red)+Ba(e.green)+Ba(e.blue),Ed(n,"#").toUpperCase())};var n},oc=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,nu=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,rc=(e,t,n,o)=>({red:e,green:t,blue:n,alpha:o}),sc=(e,t,n,o)=>{const r=parseInt(e,10),s=parseInt(t,10),i=parseInt(n,10),a=parseFloat(o);return rc(r,s,i,a)},ic=e=>{if("transparent"===e)return w.some(rc(0,0,0,0));const t=oc.exec(e);if(null!==t)return w.some(sc(t[1],t[2],t[3],"1"));const n=nu.exec(e);return null!==n?w.some(sc(n[1],n[2],n[3],n[4])):w.none()},Qm=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Ei=e=>ic(e).map(tu).map(t=>"#"+t.value).getOr(e),xi=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let i,a;t&&(i=t.getValidStyles(),a=t.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let u=0;u<c.length;u++)s[c[u]]="\ufeff"+u,s["\ufeff"+u]=c[u];const d={parse:u=>{const f={};let p=!1;const g=e.url_converter,b=e.url_converter_scope||d,h=(F,A,D)=>{const M=f[F+"-top"+A];if(!M)return;const z=f[F+"-right"+A];if(!z)return;const te=f[F+"-bottom"+A];if(!te)return;const G=f[F+"-left"+A];if(!G)return;const he=[M,z,te,G];let me=he.length-1;for(;me--&&he[me]===he[me+1];);me>-1&&D||(f[F+A]=-1===me?he[0]:he.join(" "),delete f[F+"-top"+A],delete f[F+"-right"+A],delete f[F+"-bottom"+A],delete f[F+"-left"+A])},v=F=>{const A=f[F];if(!A)return;const D=A.indexOf(",")>-1?[A]:A.split(" ");let M=D.length;for(;M--;)if(D[M]!==D[0])return!1;return f[F]=D[0],!0},_=F=>(p=!0,s[F]),C=(F,A)=>(p&&(F=F.replace(/\uFEFF[0-9]/g,D=>s[D])),A||(F=F.replace(/\\([\'\";:])/g,"$1")),F),k=F=>String.fromCharCode(parseInt(F.slice(1),16)),E=F=>F.replace(/\\[0-9a-f]+/gi,k),N=(F,A,D,M,z,te)=>{if(z=z||te)return"'"+(z=C(z)).replace(/\'/g,"\\'")+"'";if(A=C(A||D||M||""),!e.allow_script_urls){const G=A.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(G)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(G))return""}return g&&(A=g.call(b,A,"style")),"url('"+A.replace(/\'/g,"\\'")+"')"};if(u){let F;for(u=(u=u.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,_).replace(/\"[^\"]+\"|\'[^\']+\'/g,A=>A.replace(/[;:]/g,_));F=o.exec(u);){o.lastIndex=F.index+F[0].length;let A=F[1].replace(r,"").toLowerCase(),D=F[2].replace(r,"");if(A&&D){if(A=E(A),D=E(D),-1!==A.indexOf("\ufeff")||-1!==A.indexOf('"')||!e.allow_script_urls&&("behavior"===A||/expression\s*\(|\/\*|\*\//.test(D)))continue;"font-weight"===A&&"700"===D?D="bold":"color"!==A&&"background-color"!==A||(D=D.toLowerCase()),ge(e.force_hex_color)&&"off"!==e.force_hex_color&&ic(D).each(M=>{"always"!==e.force_hex_color&&1!==M.alpha||(D=Ei(Qm(M)))}),D=D.replace(n,N),f[A]=p?C(D,!0):D}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),L="border-style",P="border-color",v(R="border-width")&&v(L)&&v(P)&&(f.border=f[R]+" "+f[L]+" "+f[P],delete f[R],delete f[L],delete f[P]),"medium none"===f.border&&delete f.border,"none"===f["border-image"]&&delete f["border-image"]}var R,L,P;return f},serialize:(u,f)=>{let p="";const g=(b,h)=>{const v=h[b];if(v)for(let _=0,C=v.length;_<C;_++){const k=v[_],E=u[k];E&&(p+=(p.length>0?" ":"")+k+": "+E+";")}};return f&&i?(g("*",i),g(f,i)):tt(u,(b,h)=>{b&&((v,_)=>{if(!a||!_)return!0;let C=a["*"];return!(C&&C[v]||(C=a[_],C&&C[v]))})(h,f)&&(p+=(p.length>0?" ":"")+h+": "+b+";")}),p}};return d},ou={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Lp=(e,t)=>{const n=t??{};for(const o in e)Oe(ou,o)||(n[o]=e[o]);return Q(e.composedPath)&&(n.composedPath=()=>e.composedPath()),Q(e.getModifierState)&&(n.getModifierState=o=>e.getModifierState(o)),Q(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Jm=(e,t,n,o)=>{var r;const s=Lp(t,o);return s.type=e,kt(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(kt((i=t).preventDefault)||(a=i)instanceof Event||Ke(a.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ct,Ke(t.preventDefault)&&t.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ct,Ke(t.stopPropagation)&&t.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ct,s.stopPropagation()},(i=>i.isDefaultPrevented===Ct||i.isDefaultPrevented===at)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ct:at,s.isPropagationStopped=!0===s.cancelBubble?Ct:at,s.isImmediatePropagationStopped=at)),s;var i,a},Gx=/^(?:mouse|contextmenu)|click/,Zm=(e,t,n,o)=>{e.addEventListener(t,n,o||!1)},ru=(e,t,n,o)=>{e.removeEventListener(t,n,o||!1)},ac=(e,t)=>{const n=Jm(e.type,e,document,t);if(Q(o=e)&&Gx.test(o.type)&&Bt(e.pageX)&&!Bt(e.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,i=n;i.pageX=e.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),i.pageY=e.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},Qx=(e,t,n)=>{const o=e.document,r={type:"ready"};if(n.domLoaded)return void t(r);const s=()=>{ru(e,"DOMContentLoaded",s),ru(e,"load",s),n.domLoaded||(n.domLoaded=!0,t(r)),e=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Zm(e,"DOMContentLoaded",s),n.domLoaded||Zm(e,"load",s)};class ki{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,o,r){const s=this;let i;const a=window,l=f=>{s.executeHandlers(ac(f||a.event),c)};if(!t||Y(t)||Qo(t))return o;let c;t[s.expando]?c=t[s.expando]:(c=s.count++,t[s.expando]=c,s.events[c]={}),r=r||t;const d=n.split(" ");let u=d.length;for(;u--;){let f=d[u],p=l,g=!1,b=!1;"DOMContentLoaded"===f&&(f="ready"),s.domLoaded&&"ready"===f&&"complete"===t.readyState?o.call(r,ac({type:f})):(s.hasFocusIn||"focusin"!==f&&"focusout"!==f||(g=!0,b="focusin"===f?"focus":"blur",p=h=>{const v=ac(h||a.event);v.type="focus"===v.type?"focusin":"focusout",s.executeHandlers(v,c)}),i=s.events[c][f],i?"ready"===f&&s.domLoaded?o(ac({type:f})):i.push({func:o,scope:r}):(s.events[c][f]=i=[{func:o,scope:r}],i.fakeName=b,i.capture=g,i.nativeHandler=p,"ready"===f?Qx(t,p,s):Zm(t,b||f,p,g)))}return t=i=null,o}unbind(t,n,o){if(!t||Y(t)||Qo(t))return this;const r=t[this.expando];if(r){let s=this.events[r];if(n){const i=n.split(" ");let a=i.length;for(;a--;){const l=i[a],c=s[l];if(c){if(o){let d=c.length;for(;d--;)if(c[d].func===o){const u=c.nativeHandler,f=c.fakeName,p=c.capture,g=c.slice(0,d).concat(c.slice(d+1));g.nativeHandler=u,g.fakeName=f,g.capture=p,s[l]=g}}o&&0!==c.length||(delete s[l],ru(t,c.fakeName||l,c.nativeHandler,c.capture))}}}else tt(s,(i,a)=>{ru(t,i.fakeName||a,i.nativeHandler,i.capture)}),s={};for(const i in s)if(Oe(s,i))return this;delete this.events[r];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,o){return this.dispatch(t,n,o)}dispatch(t,n,o){if(!t||Y(t)||Qo(t))return this;const r=ac({type:n,target:t},o);do{const s=t[this.expando];s&&this.executeHandlers(r,s),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!r.isPropagationStopped());return this}clean(t){if(!t||Y(t)||Qo(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let o=n.length;for(;o--;)(t=n[o])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const o=this.events[n],r=o&&o[t.type];if(r)for(let s=0,i=r.length;s<i;s++){const a=r[s];if(a&&!1===a.func.call(a.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ki.Event=new ki;const ef=X.each,Jx=X.grep,tf="data-mce-style",Zx=X.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),lc=(e,t,n)=>{kt(n)||""===n?Ht(e,t):wt(e,t,n)},Pp=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),La=(e,t)=>{let n=0;if(e)for(let o=e.nodeType,r=e.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!t||!Y(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Mp=(e,t)=>{const n=pn(t,"style"),o=e.serialize(e.parse(n),Fe(t));lc(t,tf,o)},Ip=(e,t,n)=>{const o=Pp(t);var r,s;kt(n)||""===n?ql(e,o):di(e,o,(s=o,Dn(r=n)?Oe(Zx,s)?r+"":r+"px":r))},rt=(e,t={})=>{const n={},o=window,r={};let s=0;const i=Gn.forElement(T(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),a=[],l=t.schema?t.schema:co({}),c=xi({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),d=t.ownEvents?new ki:ki.Event,u=l.getBlockElements(),f=O=>O&&e&&ge(O)?e.getElementById(O):O,p=O=>{const B=f(O);return Q(B)?T(B):null},g=(O,B,H="")=>{let q;const K=p(O);if(Q(K)&&xn(K)){const ce=Ne[B];q=ce&&ce.get?ce.get(K.dom,B):pn(K,B)}return Q(q)?q:H},b=O=>{const B=f(O);return kt(B)?[]:B.attributes},h=(O,B,H)=>{L(O,q=>{if(ie(q)){const K=T(q),ce=""===H?null:H,ve=pn(K,B),Ae=Ne[B];Ae&&Ae.set?Ae.set(K.dom,ce,B):lc(K,B,ce),ve!==ce&&t.onSetAttrib&&t.onSetAttrib({attrElm:K.dom,attrName:B,attrValue:ce})}})},v=()=>t.root_element||e.body,_=(O,B)=>((H,q,K)=>{let ce=0,ve=0;const Ae=H.ownerDocument;if(K=K||H,q){if(K===H&&q.getBoundingClientRect&&"static"===Kn(T(H),"position")){const et=q.getBoundingClientRect();return ce=et.left+(Ae.documentElement.scrollLeft||H.scrollLeft)-Ae.documentElement.clientLeft,ve=et.top+(Ae.documentElement.scrollTop||H.scrollTop)-Ae.documentElement.clientTop,{x:ce,y:ve}}let Ce=q;for(;Ce&&Ce!==K&&Ce.nodeType&&!Rt(Ce,K);)ce+=Ce.offsetLeft||0,ve+=Ce.offsetTop||0,Ce=Ce.offsetParent;for(Ce=q.parentNode;Ce&&Ce!==K&&Ce.nodeType&&!Rt(Ce,K);)ce-=Ce.scrollLeft||0,ve-=Ce.scrollTop||0,Ce=Ce.parentNode;ve+=(et=T(q),gt.isFirefox()&&"table"===Fe(et)?lt(Nt(et)).filter(de=>"caption"===Fe(de)).bind(de=>lt(Bd(de)).map(De=>De.dom.offsetTop<=de.dom.offsetTop?-de.dom.offsetHeight:0)).getOr(0):0)}var et;return{x:ce,y:ve}})(e.body,f(O),B),C=(O,B,H)=>{const q=f(O);var K;if(!kt(q)&&(sn(q)||ie(K=q)&&"http://www.w3.org/2000/svg"===K.namespaceURI))return H?Kn(T(q),Pp(B)):("float"===(B=B.replace(/-(\D)/g,(ce,ve)=>ve.toUpperCase()))&&(B="cssFloat"),q.style?q.style[B]:void 0)},k=O=>{const B=f(O);if(!B)return{w:0,h:0};let H=C(B,"width"),q=C(B,"height");return H&&-1!==H.indexOf("px")||(H="0"),q&&-1!==q.indexOf("px")||(q="0"),{w:parseInt(H,10)||B.offsetWidth||B.clientWidth,h:parseInt(q,10)||B.offsetHeight||B.clientHeight}},E=(O,B)=>{if(!O)return!1;const H=Je(O)?O:[O];return dt(H,q=>rn(T(q),B))},N=(O,B,H,q)=>{const K=[];let ce=f(O);q=void 0===q;const ve=H||("BODY"!==v().nodeName?v().parentNode:null);if(ge(B))if("*"===B)B=ie;else{const Ae=B;B=Ce=>E(Ce,Ae)}for(;ce&&!(ce===ve||kt(ce.nodeType)||Os(ce)||ns(ce));){if(!B||B(ce)){if(!q)return[ce];K.push(ce)}ce=ce.parentNode}return q?K:null},R=(O,B,H)=>{let q=B;if(O){ge(B)&&(q=K=>E(K,B));for(let K=O[H];K;K=K[H])if(Ke(q)&&q(K))return K}return null},L=function(O,B,H){const q=H??this;if(Je(O)){const K=[];return ef(O,(ce,ve)=>{const Ae=f(ce);Ae&&K.push(B.call(q,Ae,ve))}),K}{const K=f(O);return!!K&&B.call(q,K)}},P=(O,B)=>{L(O,H=>{tt(B,(q,K)=>{h(H,K,q)})})},F=(O,B)=>{L(O,H=>{const q=T(H);ya(q,B)})},A=(O,B,H,q,K)=>L(O,ce=>{const ve=ge(B)?e.createElement(B):B;return Q(H)&&P(ve,H),q&&(!ge(q)&&q.nodeType?ve.appendChild(q):ge(q)&&F(ve,q)),K?ve:ce.appendChild(ve)}),D=(O,B,H)=>A(e.createElement(O),O,B,H,!0),M=Sr.encodeAllRaw,z=(O,B)=>L(O,H=>{const q=T(H);return B&&W(Nt(q),K=>{kn(K)&&0===K.dom.length?ot(K):cn(q,K)}),ot(q),q.dom}),te=(O,B,H)=>{L(O,q=>{if(ie(q)){const K=T(q),ce=B.split(" ");W(ce,ve=>{var Ae,Ce,de,De;Q(H)?(H?Yr:ii)(K,ve):(Ce=ve,_s(Ae=K)?Ae.dom.classList.toggle(Ce):(De=Ce,ae(Bl(de=Ae),De)?ha(de,De):Ll(de,De)),Od(Ae))})}})},G=(O,B,H)=>L(B,q=>{var K;const ce=Je(B)?O.cloneNode(!0):O;return H&&ef(Jx(q.childNodes),ve=>{ce.appendChild(ve)}),null===(K=q.parentNode)||void 0===K||K.replaceChild(ce,q),q}),he=O=>{if(ie(O)){const B="a"===O.nodeName.toLowerCase()&&!g(O,"href")&&g(O,"id");if(g(O,"name")||g(O,"data-mce-bookmark")||B)return!0}return!1},me=()=>e.createRange(),_e=(O,B,H,q)=>{if(Je(O)){let K=O.length;const ce=[];for(;K--;)ce[K]=_e(O[K],B,H,q);return ce}return!t.collect||O!==e&&O!==o||a.push([O,B,H,q]),d.bind(O,B,H,q||le)},pe=(O,B,H)=>{if(Je(O)){let q=O.length;const K=[];for(;q--;)K[q]=pe(O[q],B,H);return K}if(a.length>0&&(O===e||O===o)){let q=a.length;for(;q--;){const[K,ce,ve]=a[q];O!==K||B&&B!==ce||H&&H!==ve||d.unbind(K,ce,ve)}}return d.unbind(O,B,H)},ne=O=>{if(O&&sn(O)){const B=O.getAttribute("data-mce-contenteditable");return B&&"inherit"!==B?B:"inherit"!==O.contentEditable?O.contentEditable:null}return null},le={doc:e,settings:t,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:i,boundEvents:a,styles:c,schema:l,events:d,isBlock:O=>ge(O)?Oe(u,O):ie(O)&&(Oe(u,O.nodeName)||Ue(l,O)),root:null,clone:(O,B)=>O.cloneNode(B),getRoot:v,getViewPort:O=>{const B=qd(O);return{x:B.x,y:B.y,w:B.width,h:B.height}},getRect:O=>{const B=f(O),H=_(B),q=k(B);return{x:H.x,y:H.y,w:q.w,h:q.h}},getSize:k,getParent:(O,B,H)=>{const q=N(O,B,H,!1);return q&&q.length>0?q[0]:null},getParents:N,get:f,getNext:(O,B)=>R(O,B,"nextSibling"),getPrev:(O,B)=>R(O,B,"previousSibling"),select:(O,B)=>{var H,q;const K=null!==(q=null!==(H=f(B))&&void 0!==H?H:t.root_element)&&void 0!==q?q:e;return Ke(K.querySelectorAll)?nn(K.querySelectorAll(O)):[]},is:E,add:A,create:D,createHTML:(O,B,H="")=>{let q="<"+O;for(const K in B)gs(B,K)&&(q+=" "+K+'="'+M(B[K])+'"');return To(H)&&Oe(l.getVoidElements(),O)?q+" />":q+">"+H+"</"+O+">"},createFragment:O=>{const B=e.createElement("div"),H=e.createDocumentFragment();let q;for(H.appendChild(B),O&&(B.innerHTML=O);q=B.firstChild;)H.appendChild(q);return H.removeChild(B),H},remove:z,setStyle:(O,B,H)=>{L(O,q=>{const K=T(q);Ip(K,B,H),t.update_styles&&Mp(c,K)})},getStyle:C,setStyles:(O,B)=>{L(O,H=>{const q=T(H);tt(B,(K,ce)=>{Ip(q,ce,K)}),t.update_styles&&Mp(c,q)})},removeAllAttribs:O=>L(O,B=>{const H=B.attributes;for(let q=H.length-1;q>=0;q--)B.removeAttributeNode(H.item(q))}),setAttrib:h,setAttribs:P,getAttrib:g,getPos:_,parseStyle:O=>c.parse(O),serializeStyle:(O,B)=>c.serialize(O,B),addStyle:O=>{if(le!==rt.DOM&&e===document){if(n[O])return;n[O]=!0}let B=e.getElementById("mceDefaultStyles");if(!B){B=e.createElement("style"),B.id="mceDefaultStyles",B.type="text/css";const H=e.head;H.firstChild?H.insertBefore(B,H.firstChild):H.appendChild(B)}B.styleSheet?B.styleSheet.cssText+=O:B.appendChild(e.createTextNode(O))},loadCSS:O=>{O||(O=""),W(O.split(","),B=>{r[B]=!0,i.load(B).catch(Re)})},addClass:(O,B)=>{te(O,B,!0)},removeClass:(O,B)=>{te(O,B,!1)},hasClass:(O,B)=>{const H=p(O),q=B.split(" ");return Q(H)&&ur(q,K=>pa(H,K))},toggleClass:te,show:O=>{L(O,B=>ql(T(B),"display"))},hide:O=>{L(O,B=>di(T(B),"display","none"))},isHidden:O=>{const B=p(O);return Q(B)&&Ro(va(B,"display"),"none")},uniqueId:O=>(O||"mce_")+s++,setHTML:F,getOuterHTML:O=>{const B=p(O);return Q(B)?ie(B.dom)?B.dom.outerHTML:(H=>{const q=Lt("div"),K=T(H.dom.cloneNode(!0));return Et(q,K),Ud(q)})(B):""},setOuterHTML:(O,B)=>{L(O,H=>{ie(H)&&(H.outerHTML=B)})},decode:Sr.decode,encode:M,insertAfter:(O,B)=>{const H=f(B);return L(O,q=>{const K=H?.parentNode,ce=H?.nextSibling;return K&&(ce?K.insertBefore(q,ce):K.appendChild(q)),q})},replace:G,rename:(O,B)=>{if(O.nodeName!==B.toUpperCase()){const H=D(B);return ef(b(O),q=>{h(H,q.nodeName,g(O,q.nodeName))}),G(H,O,!0),H}return O},findCommonAncestor:(O,B)=>{let H=O;for(;H;){let q=B;for(;q&&H!==q;)q=q.parentNode;if(H===q)break;H=H.parentNode}return!H&&O.ownerDocument?O.ownerDocument.documentElement:H},run:L,getAttribs:b,isEmpty:(O,B,H)=>{let q=0;if(he(O))return!1;const K=O.firstChild;if(K){const ce=new Ot(K,O),ve=l?l.getWhitespaceElements():{},Ae=B||(l?l.getNonEmptyElements():null);let Ce=K;do{if(ie(Ce)){const et=Ce.getAttribute("data-mce-bogus");if(et){Ce=ce.next("all"===et);continue}const de=Ce.nodeName.toLowerCase();if(Ae&&Ae[de]){if("br"===de){q++,Ce=ce.next();continue}return!1}if(he(Ce))return!1}if(Qo(Ce)||Y(Ce)&&!ao(Ce.data)&&(!H?.includeZwsp||!Gm(Ce.data))||Y(Ce)&&Ce.parentNode&&ve[Ce.parentNode.nodeName]&&ao(Ce.data))return!1;Ce=ce.next()}while(Ce)}return q<=1},createRng:me,nodeIndex:La,split:(O,B,H)=>{let q,K,ce=me();if(O&&B&&O.parentNode&&B.parentNode){const ve=O.parentNode;return ce.setStart(ve,La(O)),ce.setEnd(B.parentNode,La(B)),q=ce.extractContents(),ce=me(),ce.setStart(B.parentNode,La(B)+1),ce.setEnd(ve,La(O)+1),K=ce.extractContents(),ve.insertBefore(Nn(le,q,l),O),ve.insertBefore(H||B,O),ve.insertBefore(Nn(le,K,l),O),z(O),H||B}},bind:_e,unbind:pe,fire:(O,B,H)=>d.dispatch(O,B,H),dispatch:(O,B,H)=>d.dispatch(O,B,H),getContentEditable:ne,getContentEditableParent:O=>{const B=v();let H=null;for(let q=O;q&&q!==B&&(H=ne(q),null===H);q=q.parentNode);return H},isEditable:O=>{if(Q(O)){const B=ie(O)?O:O.parentElement;return Q(B)&&sn(B)&&Qr(T(B))}return!1},destroy:()=>{if(a.length>0){let O=a.length;for(;O--;){const[B,H,q]=a[O];d.unbind(B,H,q)}}tt(r,(O,B)=>{i.unload(B),delete r[B]})},isChildOf:(O,B)=>O===B||B.contains(O),dumpRng:O=>"startContainer: "+O.startContainer.nodeName+", startOffset: "+O.startOffset+", endContainer: "+O.endContainer.nodeName+", endOffset: "+O.endOffset},Ne=((O,B,H)=>{const q=B.keep_values,ce={style:{set:(ve,Ae)=>{const Ce=T(ve);q&&lc(Ce,tf,Ae),Ht(Ce,"style"),ge(Ae)&&ui(Ce,O.parse(Ae))},get:ve=>{const Ae=T(ve),Ce=pn(Ae,tf)||pn(Ae,"style");return O.serialize(O.parse(Ce),Fe(Ae))}}};return q&&(ce.href=ce.src={set:(ve,Ae,Ce)=>{const et=T(ve);Ke(B.url_converter)&&Q(Ae)&&(Ae=B.url_converter.call(B.url_converter_scope||H(),String(Ae),Ce,ve)),lc(et,"data-mce-"+Ce,Ae),lc(et,Ce,Ae)},get:(ve,Ae)=>{const Ce=T(ve);return pn(Ce,"data-mce-"+Ae)||pn(Ce,Ae)}}),ce})(c,t,Z(le));return le};rt.DOM=rt(document),rt.nodeIndex=La;const ek=rt.DOM;class ss{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,o)=>{const r=ek;let s;const i=()=>{r.remove(a),s&&(s.onerror=s.onload=s=null)},a=r.uniqueId();s=document.createElement("script"),s.id=a,s.type="text/javascript",s.src=X._addCacheSuffix(t),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{i(),n()},s.onerror=()=>{i(),o("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const n=this;return n.queue.push(t),void 0===n.states[t]&&(n.states[t]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,o=(l,c)=>{nt(n.scriptLoadedCallbacks,c).each(d=>{W(d,u=>u[l](c))}),delete n.scriptLoadedCallbacks[c]},r=l=>{const c=ke(l,d=>"rejected"===d.status);return c.length>0?Promise.reject(zn(c,({reason:d})=>Je(d)?d:[d])):Promise.resolve()},s=l=>Promise.allSettled(ze(l,c=>2===n.states[c]?(o("resolve",c),Promise.resolve()):3===n.states[c]?(o("reject",c),Promise.reject(c)):(n.states[c]=1,n.loadScript(c).then(()=>{n.states[c]=2,o("resolve",c);const d=n.queue;return d.length>0?(n.queue=[],s(d).then(r)):Promise.resolve()},()=>(n.states[c]=3,o("reject",c),Promise.reject(c)))))),i=l=>(n.loading=!0,s(l).then(c=>{n.loading=!1;const d=n.queueLoadedCallbacks.shift();return w.from(d).each(ee),r(c)})),a=yd(t);return n.loading?new Promise((l,c)=>{n.queueLoadedCallbacks.push(()=>{i(a).then(l,c)})}):i(a)}}ss.ScriptLoader=new ss;const Qt=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}},cc={},nf=Qt("en"),Fp=()=>nt(cc,nf.get()),nr={getData:()=>na(cc,e=>({...e})),setCode:e=>{e&&nf.set(e)},getCode:()=>nf.get(),add:(e,t)=>{let n=cc[e];n||(cc[e]=n={});const o=ze(on(t),r=>r.toLowerCase());tt(t,(r,s)=>{const i=s.toLowerCase();i!==s&&((a,l)=>{const c=a.indexOf(l);return-1!==c&&a.indexOf(l,c+1)>c})(o,i)?(Oe(t,i)||(n[i]=r),n[s]=r):n[i]=r})},translate:e=>{const t=Fp().getOr({}),n=a=>Ke(a)?Object.prototype.toString.call(a):o(a)?"":""+a,o=a=>""===a||null==a,r=a=>{const l=n(a);return Oe(t,l)?n(t[l]):nt(t,l.toLowerCase()).map(n).getOr(l)},s=a=>a.replace(/{context:\w+}$/,"");if(o(e))return"";if(Vt(i=e)&&Oe(i,"raw"))return n(e.raw);var i,a;if(Je(a=e)&&a.length>1){const a=e.slice(1);return s(r(e[0]).replace(/\{([0-9]+)\}/g,(l,c)=>Oe(a,c)?n(a[c]):l))}return s(r(e))},isRtl:()=>Fp().bind(e=>nt(e,"_dir")).exists(e=>"rtl"===e),hasCode:e=>Oe(cc,e)},vn=()=>{const e=[],t={},n={},o=[],r=(l,c)=>{const d=ke(o,u=>u.name===l&&u.state===c);W(d,u=>u.resolve())},s=l=>Oe(t,l),i=(l,c)=>{const d=nr.getCode();!d||c&&-1===(","+(c||"")+",").indexOf(","+d+",")||ss.ScriptLoader.add(t[l]+"/langs/"+d+".js")},a=(l,c="added")=>"added"===c&&Oe(n,l)||"loaded"===c&&s(l)?Promise.resolve():new Promise(d=>{o.push({name:l,state:c,resolve:d})});return{items:e,urls:t,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,c)=>{!1!==vn.languageLoad&&(s(l)?i(l,c):a(l,"loaded").then(()=>i(l,c)))},add:(l,c)=>(e.push(c),n[l]={instance:c},r(l,"added"),c),remove:l=>{delete t[l],delete n[l]},createUrl:(l,c)=>ge(c)?ge(l)?{prefix:"",resource:c,suffix:""}:{prefix:l.prefix,resource:c,suffix:l.suffix}:c,load:(l,c)=>{if(t[l])return Promise.resolve();let d=ge(c)?c:c.prefix+c.resource+c.suffix;0!==d.indexOf("/")&&-1===d.indexOf("://")&&(d=vn.baseURL+"/"+d),t[l]=d.substring(0,d.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():ss.ScriptLoader.add(d).then(u)},waitFor:a}};vn.languageLoad=!0,vn.baseURL="",vn.PluginManager=vn(),vn.ThemeManager=vn(),vn.ModelManager=vn();const tk=e=>{const t=Qt(w.none()),n=()=>t.get().each(o=>clearInterval(o));return{clear:()=>{n(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:o=>{n(),t.set(w.some(setInterval(o,e)))}}},$s=()=>{const e=(t=>{const n=Qt(w.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(w.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(w.some(r))}}})(Re);return{...e,on:t=>e.get().each(t)}},su=(e,t)=>{let n=null;return{cancel:()=>{ct(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{ct(n)&&(n=setTimeout(()=>{n=null,e.apply(null,o)},t))}}},of=(e,t)=>{let n=null;const o=()=>{ct(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},dc=Z("mce-annotation"),Si=Z("data-mce-annotation"),Pa=Z("data-mce-annotation-uid"),uc=Z("data-mce-annotation-active"),mc=Z("data-mce-annotation-classes"),fc=Z("data-mce-annotation-attrs"),jp=e=>t=>We(t,e),$p=(e,t)=>{const n=e.selection.getRng(),o=T(n.startContainer),r=T(e.getBody()),s=t.fold(()=>"."+dc(),a=>`[${Si()}="${a}"]`),i=Es(o,n.startOffset).getOr(o);return Gr(i,s,jp(r)).bind(a=>Do(a,`${Pa()}`).bind(l=>Do(a,`${Si()}`).map(c=>{const d=zp(e,l);return{uid:l,name:c,elements:d}})))},Up=(e,t)=>Bo(e,"data-mce-bogus")||Wd(e,'[data-mce-bogus="all"]',jp(t)),zp=(e,t)=>{const n=T(e.getBody()),o=Yt(n,`[${Pa()}="${t}"]`);return ke(o,r=>!Up(r,n))},Hp=(e,t)=>{const n=T(e.getBody()),o=Yt(n,`[${Si()}="${t}"]`),r={};return W(o,s=>{if(!Up(s,n)){const i=pn(s,Pa()),a=nt(r,i).getOr([]);r[i]=a.concat([s])}}),r};let qp=0;const gc=e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return qp++,e+"_"+n+qp+String(t)},Wp=(e,t)=>T(e.dom.cloneNode(t)),Ni=e=>Wp(e,!1),Vp=e=>Wp(e,!0),Kp=(e,t,n=at)=>{const o=new Ot(e,t),r=s=>{let i;do{i=o[s]()}while(i&&!Y(i)&&!n(i));return w.from(i).filter(Y)};return{current:()=>w.from(o.current()).filter(Y),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Ai=(e,t)=>{const n=t||(r=>e.isBlock(r)||ut(r)||st(r)),o=(r,s,i,a)=>{if(Y(r)){const l=a(r,s,r.data);if(-1!==l)return w.some({container:r,offset:l})}return i().bind(l=>o(l.container,l.offset,i,a))};return{backwards:(r,s,i,a)=>{const l=Kp(r,a??e.getRoot(),n);return o(r,s,()=>l.prev().map(c=>({container:c,offset:c.length})),i).getOrNull()},forwards:(r,s,i,a)=>{const l=Kp(r,a??e.getRoot(),n);return o(r,s,()=>l.next().map(c=>({container:c,offset:0})),i).getOrNull()}}},Ma=Math.round,Ti=e=>e?{left:Ma(e.left),top:Ma(e.top),bottom:Ma(e.bottom),right:Ma(e.right),width:Ma(e.width),height:Ma(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Yp=(e,t)=>(e=Ti(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Xp=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,hc=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Xp(t.top-e.bottom,e,t)},pc=(e,t)=>e.top>t.bottom||!(e.bottom<t.top)&&Xp(t.bottom-e.top,e,t),Gp=(e,t,n)=>{const o=Math.max(Math.min(t,e.left+e.width),e.left),r=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-r)*(n-r))},iu=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Us=(e,t)=>{if(ie(e)&&e.hasChildNodes()){const n=e.childNodes;return n[(i=n.length-1,Math.min(Math.max(t,0),i))]}var i;return e},nk=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Qp=e=>ge(e)&&e.charCodeAt(0)>=768&&nk.test(e),Jp=ie,ok=Xn,Zp=Ea("display","block table"),rk=Ea("float","left right"),bc=((...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0})(Jp,ok,jr(rk)),sk=jr(Ea("white-space","pre pre-line pre-wrap")),vc=Y,rf=ut,eb=rt.nodeIndex,au=(e,t)=>t<0&&ie(e)&&e.hasChildNodes()?void 0:Us(e,t),sf=e=>e?e.createRange():rt.DOM.createRng(),af=e=>ge(e)&&/[\r\n\t ]/.test(e),tb=e=>!!e.setStart&&!!e.setEnd,lf=e=>{const t=e.startContainer,n=e.startOffset;if(af(e.toString())&&sk(t.parentNode)&&Y(t)){const o=t.data;if(af(o[n-1])||af(o[n+1]))return!0}return!1},nb=e=>0===e.left&&0===e.right&&0===e.top&&0===e.bottom,zs=e=>{var t;let n;const o=e.getClientRects();return n=Ti(o.length>0?o[0]:e.getBoundingClientRect()),!tb(e)&&rf(e)&&nb(n)?(r=>{const s=r.ownerDocument,i=sf(s),a=s.createTextNode(Pt),l=r.parentNode;l.insertBefore(a,r),i.setStart(a,0),i.setEnd(a,1);const c=Ti(i.getBoundingClientRect());return l.removeChild(a),c})(e):nb(n)&&tb(e)&&null!==(t=(r=>{const i=r.endContainer,a=r.startOffset,l=r.endOffset;if(r.startContainer===i&&Y(i)&&0===a&&1===l){const c=r.cloneRange();return c.setEndAfter(i),zs(c)}return null})(e))&&void 0!==t?t:n},Oi=(e,t)=>{const n=Yp(e,t);return n.width=1,n.right=n.left+1,n},U=(e,t,n)=>{const o=()=>(n||(n=(r=>{const s=[],i=d=>{var u,f;0!==d.height&&(s.length>0&&(u=d).left===(f=s[s.length-1]).left&&u.top===f.top&&u.bottom===f.bottom&&u.right===f.right||s.push(d))},a=(d,u)=>{const f=sf(d.ownerDocument);if(u<d.data.length){if(Qp(d.data[u]))return;if(Qp(d.data[u-1])&&(f.setStart(d,u),f.setEnd(d,u+1),!lf(f)))return void i(Oi(zs(f),!1))}u>0&&(f.setStart(d,u-1),f.setEnd(d,u),lf(f)||i(Oi(zs(f),!1))),u<d.data.length&&(f.setStart(d,u),f.setEnd(d,u+1),lf(f)||i(Oi(zs(f),!0)))},l=r.container(),c=r.offset();if(vc(l))return a(l,c),s;if(Jp(l))if(r.isAtEnd()){const d=au(l,c);vc(d)&&a(d,d.data.length),bc(d)&&!rf(d)&&i(Oi(zs(d),!1))}else{const d=au(l,c);if(vc(d)&&a(d,0),bc(d)&&r.isAtEnd())return i(Oi(zs(d),!1)),s;const u=au(r.container(),r.offset()-1);bc(u)&&!rf(u)&&(Zp(u)||Zp(d)||!bc(d))&&i(Oi(zs(u),!1)),bc(d)&&i(Oi(zs(d),!0))}return s})(U(e,t))),n);return{container:Z(e),offset:Z(t),toRange:()=>{const r=sf(e.ownerDocument);return r.setStart(e,t),r.setEnd(e,t),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(vc(e),0===t),isAtEnd:()=>vc(e)?t>=e.data.length:t>=e.childNodes.length,isEqual:r=>r&&e===r.container()&&t===r.offset(),getNode:r=>au(e,r?t-1:t)}};U.fromRangeStart=e=>U(e.startContainer,e.startOffset),U.fromRangeEnd=e=>U(e.endContainer,e.endOffset),U.after=e=>U(e.parentNode,eb(e)+1),U.before=e=>U(e.parentNode,eb(e)),U.isAbove=(e,t)=>Kt(Ut(t.getClientRects()),Hn(e.getClientRects()),hc).getOr(!1),U.isBelow=(e,t)=>Kt(Hn(t.getClientRects()),Ut(e.getClientRects()),pc).getOr(!1),U.isAtStart=e=>!!e&&e.isAtStart(),U.isAtEnd=e=>!!e&&e.isAtEnd(),U.isTextPosition=e=>!!e&&Y(e.container()),U.isElementPosition=e=>!U.isTextPosition(e);const lu=(e,t)=>{Y(t)&&0===t.data.length&&e.remove(t)},cf=(e,t,n)=>{var o,s;ns(n)?((o,r,s)=>{const i=w.from(s.firstChild),a=w.from(s.lastChild);r.insertNode(s),i.each(l=>lu(o,l.previousSibling)),a.each(l=>lu(o,l.nextSibling))})(e,t,n):(o=e,t.insertNode(s=n),lu(o,s.previousSibling),lu(o,s.nextSibling))},or=Y,ob=ts,rb=rt.nodeIndex,sb=e=>{const t=e.parentNode;return ob(t)?sb(t):t},df=e=>e?ra(e.childNodes,(t,n)=>(ob(n)&&"BR"!==n.nodeName?t=t.concat(df(n)):t.push(n),t),[]):[],ib=e=>t=>e===t,ab=e=>(or(e)?"text()":e.nodeName.toLowerCase())+"["+(t=>{let n,o;n=df(sb(t)),o=Cd(n,ib(t),t),n=n.slice(0,o+1);const r=ra(n,(s,i,a)=>(or(i)&&or(n[a-1])&&s++,s),0);return n=ni(n,io([t.nodeName])),o=Cd(n,ib(t),t),o-r})(e)+"]",lb=(e,t)=>{let n,o=[],r=t.container(),s=t.offset();if(or(r))n=((a,l)=>{let c=a;for(;(c=c.previousSibling)&&or(c);)l+=c.data.length;return l})(r,s);else{const a=r.childNodes;s>=a.length?(n="after",s=a.length-1):n="before",r=a[s]}o.push(ab(r));let i=((a,l,c)=>{const d=[];for(let u=l.parentNode;u&&u!==a;u=u.parentNode)d.push(u);return d})(e,r);return i=ni(i,jr(ts)),o=o.concat(pl(i,a=>ab(a))),o.reverse().join("/")+","+n},cb=(e,t)=>{if(!t)return null;const n=t.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=ra(o,(i,a)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(a);return l?("text()"===l[1]&&(l[1]="#text"),((c,d,u)=>{let f=df(c);return f=ni(f,(p,g)=>!or(p)||!or(f[g-1])),f=ni(f,io([d])),f[u]})(i,l[1],parseInt(l[2],10))):null},e);if(!s)return null;if(!or(s)&&s.parentNode){let i;return i="after"===r?rb(s)+1:rb(s),U(s.parentNode,i)}return((i,a)=>{let l=i,c=0;for(;or(l);){const d=l.data.length;if(a>=c&&a<=c+d){i=l,a-=c;break}if(!or(l.nextSibling)){i=l,a=d;break}c+=d,l=l.nextSibling}return or(i)&&a>i.data.length&&(a=i.data.length),U(i,a)})(s,parseInt(r,10))},cu=st,db=(e,t,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let i=r?o.startOffset:o.endOffset;const a=[],l=e.getRoot();if(Y(s))a.push(n?((c,d,u)=>{let f=c(d.data.slice(0,u)).length;for(let p=d.previousSibling;p&&Y(p);p=p.previousSibling)f+=c(p.data).length;return f})(t,s,i):i);else{let c=0;const d=s.childNodes;i>=d.length&&d.length&&(c=1,i=Math.max(0,d.length-1)),a.push(e.nodeIndex(d[i],n)+c)}for(let c=s;c&&c!==l;c=c.parentNode)a.push(e.nodeIndex(c,n));return a},uf=(e,t,n)=>{let o=0;return X.each(e.select(t),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},ub=(e,t)=>{let n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(ie(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(t?o:o-1,r.length-1)],n&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},mb=e=>(ub(e,!0),ub(e,!1),e),fb=(e,t)=>{if(ie(e)&&(e=Us(e,t),cu(e)))return e;if(Xt(e)){Y(e)&&Er(e)&&(e=e.parentNode);let n=e.previousSibling;if(cu(n)||(n=e.nextSibling,cu(n)))return n}},gb=(e,t,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||cu(o)){const i=o.nodeName;return{name:i,index:uf(n.dom,i,o)}}const s=fb((i=r).startContainer,i.startOffset)||fb(i.endContainer,i.endOffset);var i;if(s){const i=s.tagName;return{name:i,index:uf(n.dom,i,s)}}return((i,a,l,c)=>{const d=a.dom,u=db(d,i,l,c,!0),f=a.isForward(),p=Gd(c)?{isFakeCaret:!0}:{};return a.isCollapsed()?{start:u,forward:f,...p}:{start:u,end:db(d,i,l,c,!1),forward:f,...p}})(e,n,t,r)},hb=(e,t,n)=>{const o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},pb=(e,t)=>{const n=e.dom;let o=e.getRng();const r=n.uniqueId(),s=e.isCollapsed(),i=e.getNode(),a=i.nodeName,l=e.isForward();if("IMG"===a)return{name:a,index:uf(n,a,i)};const c=mb(o.cloneRange());if(!s){c.collapse(!1);const u=hb(n,r+"_end",t);cf(n,c,u)}o=mb(o),o.collapse(!0);const d=hb(n,r+"_start",t);return cf(n,o,d),e.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},mf=se(gb,tn,!0),bb=e=>{const t=s=>s(e),n=Z(e),o=()=>r,r={tag:!0,inner:e,fold:(s,i)=>i(e),isValue:Ct,isError:at,map:s=>An.value(s(e)),mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(e)},toOptional:()=>w.some(e)};return r},vb=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(o,r)=>o(e),isValue:at,isError:Ct,map:t,mapError:o=>An.error(o(e)),bind:t,exists:at,forall:Ct,getOr:tn,or:tn,getOrThunk:ea,orThunk:ea,getOrDie:gd(String(e)),each:Re,toOptional:w.none};return n},An={value:bb,error:vb,fromOption:(e,t)=>e.fold(()=>vb(t),bb)},Nr=e=>{if(!Je(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],n={};return W(e,(o,r)=>{const s=on(o);if(1!==s.length)throw new Error("one and only one name per case");const i=s[0],a=o[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!Je(a))throw new Error("case arguments must be an array");t.push(i),n[i]=(...l)=>{const c=l.length;if(c!==a.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+a.length+" ("+a+"), got "+c);return{fold:(...d)=>{if(d.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+d.length);return d[r].apply(null,l)},match:d=>{const u=on(d);if(t.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+u.join(","));if(!ur(t,f=>ae(u,f)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+t.join(", "));return d[i].apply(null,l)},log:d=>{console.log(d,{constructors:t,constructor:i,params:l})}}}}),n};Nr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const ik=e=>"inline-command"===e.type||"inline-format"===e.type,ak=e=>"block-command"===e.type||"block-format"===e.type,lk=e=>{const t=o=>An.error({message:o,pattern:e}),n=(o,r,s)=>{if(void 0!==e.format){let i;if(Je(e.format)){if(!ur(e.format,ge))return t(o+" pattern has non-string items in the `format` array");i=e.format}else{if(!ge(e.format))return t(o+" pattern has non-string `format` parameter");i=[e.format]}return An.value(r(i))}return void 0!==e.cmd?ge(e.cmd)?An.value(s(e.cmd,e.value)):t(o+" pattern has non-string `cmd` parameter"):t(o+" pattern is missing both `format` and `cmd` parameters")};if(!Vt(e))return t("Raw pattern is not an object");if(!ge(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!ge(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,i)=>({type:"inline-command",start:o,end:r,cmd:s,value:i}))}return void 0!==e.replacement?ge(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):An.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:e.start,format:o[0]}),(o,r)=>({type:"block-command",start:e.start,cmd:o,value:r}))},yb=e=>ke(e,ak),_b=e=>ke(e,ik),Cb=e=>{const t=(n=>{const o=[],r=[];return W(n,s=>{s.fold(i=>{o.push(i)},i=>{r.push(i)})}),{errors:o,values:r}})(ze(e,lk));return W(t.errors,n=>console.error(n.message,n.pattern)),t.values},ff=qn().deviceType,ck=ff.isTouch(),dk=rt.DOM,wb=e=>cr(e,RegExp),re=e=>t=>t.options.get(e),gf=e=>ge(e)||Vt(e),Eb=(e,t="")=>n=>{const o=ge(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const i=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return $t(i,(a,l)=>{const c=l.split("="),d=c[0],u=c.length>1?c[1]:d;return a[zt(d)]=zt(u),a},{})})(n);return{value:nt(r,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},uk=re("iframe_attrs"),mk=re("doctype"),xb=re("document_base_url"),fk=re("body_id"),gk=re("body_class"),kb=re("content_security_policy"),hk=re("br_in_pre"),un=re("forced_root_block"),yc=re("forced_root_block_attrs"),pk=re("newline_behavior"),bk=re("br_newline_selector"),vk=re("no_newline_selector"),yk=re("keep_styles"),_k=re("end_container_on_empty_block"),Sb=re("automatic_uploads"),Nb=re("images_reuse_filename"),Ck=re("images_replace_blob_uris"),Ab=re("icons"),wk=re("icons_url"),Ek=re("images_upload_url"),xk=re("images_upload_base_path"),kk=re("images_upload_credentials"),Sk=re("images_upload_handler"),Nk=re("content_css_cors"),hf=re("referrer_policy"),Tb=re("language"),Ak=re("language_url"),Ob=re("indent_use_margin"),Tk=re("indentation"),Ok=re("content_css"),Rk=re("content_style"),Rb=re("font_css"),Dk=re("directionality"),Bk=re("inline_boundaries_selector"),Db=re("object_resizing"),Lk=re("resize_img_proportional"),Pk=re("placeholder"),Bb=re("event_root"),Mk=re("service_message"),Ia=re("theme"),Ik=re("theme_url"),pf=re("model"),Fk=re("model_url"),_c=re("inline_boundaries"),jk=re("formats"),$k=re("preview_styles"),Uk=re("format_empty_lines"),zk=re("format_noneditable_selector"),Hk=re("custom_ui_selector"),bf=re("inline"),qk=re("hidden_input"),Wk=re("submit_patch"),Vk=re("add_form_submit_trigger"),Kk=re("add_unload_trigger"),Yk=re("custom_undo_redo_levels"),Xk=re("disable_nodechange"),Lb=re("readonly"),Gk=re("editable_root"),Pb=re("content_css_cors"),du=re("plugins"),Qk=re("external_plugins"),Jk=re("block_unsupported_drop"),Zk=re("visual"),eS=re("visual_table_class"),Mb=re("visual_anchor_class"),tS=re("iframe_aria_text"),nS=re("setup"),oS=re("init_instance_callback"),rS=re("urlconverter_callback"),sS=re("auto_focus"),iS=re("browser_spellcheck"),aS=re("protect"),lS=re("paste_block_drop"),uu=re("paste_data_images"),cS=re("paste_preprocess"),dS=re("paste_postprocess"),uS=re("newdocument_content"),mS=re("paste_webkit_styles"),fS=re("paste_remove_styles_if_webkit"),gS=re("paste_merge_formats"),hS=re("smart_paste"),pS=re("paste_as_text"),bS=re("paste_tab_spaces"),vS=re("allow_html_data_urls"),yS=re("text_patterns"),_S=re("text_patterns_lookup"),Ib=re("noneditable_class"),CS=re("editable_class"),wS=re("noneditable_regexp"),ES=re("preserve_cdata"),xS=re("highlight_on_focus"),vf=re("xss_sanitization"),kS=re("init_content_sync"),Fb=e=>X.explode(e.options.get("images_file_types")),SS=re("table_tab_navigation"),NS=re("details_initial_state"),AS=re("details_serialized_state"),TS=re("force_hex_color"),yf=re("sandbox_iframes"),OS=ie,jb=Y,$b=e=>{const t=e.parentNode;t&&t.removeChild(e)},Ub=e=>{const t=bn(e);return{count:e.length-t.length,text:t}},zb=e=>{let t;for(;-1!==(t=e.data.lastIndexOf(Mt));)e.deleteData(t,1)},Hb=(e,t)=>(Ri(e),t),Ri=e=>{OS(e)&&Xt(e)&&(Ql(e)?e.removeAttribute("data-mce-caret"):$b(e)),jb(e)&&(zb(e),0===e.data.length&&$b(e))},DS=st,BS=$o,LS=jo,qb=(e,t,n)=>{const o=Yp(t.getBoundingClientRect(),n);let r,s;if("BODY"===e.tagName){const a=e.ownerDocument.documentElement;r=e.scrollLeft||a.scrollLeft,s=e.scrollTop||a.scrollTop}else{const a=e.getBoundingClientRect();r=e.scrollLeft-a.left,s=e.scrollTop-a.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),o.left+=i,o.right+=i),o},Wb=()=>Pe.browser.isFirefox(),Cc=e=>DS(e)||BS(e),wc=e=>(Cc(e)||Go(e)&&Wb())&&li(T(e)).exists(Qr),MS=Yn,_f=st,IS=$o,Vb=Ea("display","block table table-cell table-caption list-item"),Kb=Xt,Yb=Er,FS=ie,jS=Y,$S=Xn,Fa=e=>e>0,Di=e=>e<0,mu=(e,t)=>{let n;for(;n=e(t);)if(!Yb(n))return n;return null},Ec=(e,t,n,o,r)=>{const s=new Ot(e,o),i=_f(e)||Yb(e);let a;if(Di(t)){if(i&&(a=mu(s.prev.bind(s),!0),n(a)))return a;for(;a=mu(s.prev.bind(s),r);)if(n(a))return a}if(Fa(t)){if(i&&(a=mu(s.next.bind(s),!0),n(a)))return a;for(;a=mu(s.next.bind(s),r);)if(n(a))return a}return null},Hs=(e,t)=>{for(;e&&e!==t;){if(Vb(e))return e;e=e.parentNode}return null},Ar=(e,t,n)=>Hs(e.container(),n)===Hs(t.container(),n),Cf=(e,t)=>{if(!t)return w.none();const n=t.container(),o=t.offset();return FS(n)?w.from(n.childNodes[o+e]):w.none()},Xb=(e,t)=>{var n;const o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},US=(e,t,n)=>Hs(t,e)===Hs(n,e),Gb=(e,t,n)=>{const o=e?"previousSibling":"nextSibling";let r=n;for(;r&&r!==t;){let s=r[o];if(s&&Kb(s)&&(s=s[o]),_f(s)||IS(s)){if(US(t,s,r))return s;break}if($S(s))break;r=r.parentNode}return null},xc=se(Xb,!0),kc=se(Xb,!1),wf=(e,t,n)=>{let o;const r=se(Gb,!0,t),s=se(Gb,!1,t),i=n.startContainer,a=n.startOffset;if(Er(i)){const l=jS(i)?i.parentNode:i,c=l.getAttribute("data-mce-caret");if("before"===c&&(o=l.nextSibling,wc(o)))return xc(o);if("after"===c&&(o=l.previousSibling,wc(o)))return kc(o)}if(!n.collapsed)return n;if(Y(i)){if(Kb(i)){if(1===e){if(o=s(i),o)return xc(o);if(o=r(i),o)return kc(o)}if(-1===e){if(o=r(i),o)return kc(o);if(o=s(i),o)return xc(o)}return n}if(Ci(i)&&a>=i.data.length-1)return 1===e&&(o=s(i),o)?xc(o):n;if(Ls(i)&&a<=1)return-1===e&&(o=r(i),o)?kc(o):n;if(a===i.data.length)return o=s(i),o?xc(o):n;if(0===a)return o=r(i),o?kc(o):n}return n},Qb=(e,t)=>Cf(e?0:-1,t).filter(_f),Sc=(e,t,n)=>{const o=wf(e,t,n);return-1===e?U.fromRangeStart(o):U.fromRangeEnd(o)},fu=e=>w.from(e.getNode()).map(T),Ef=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},gu=(e,t)=>{const n=Ar(e,t);return!(n||!ut(e.getNode()))||n};var Jt,e;(e=Jt||(Jt={}))[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards";const zS=st,Tr=Y,Jb=ie,xf=ut,ja=Xn,Zb=e=>{return Qd(e)||!!Jl(t=e)&&!$t(nn(t.getElementsByTagName("*")),(n,o)=>n||xr(o),!1);var t},hu=Zl,ev=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,tv=(e,t)=>{if(Fa(e)){if(ja(t.previousSibling)&&!Tr(t.previousSibling))return U.before(t);if(Tr(t))return U(t,0)}if(Di(e)){if(ja(t.nextSibling)&&!Tr(t.nextSibling))return U.after(t);if(Tr(t))return U(t,t.data.length)}return Di(e)?xf(t)?U.before(t):U.after(t):U.before(t)},kf=(e,t,n)=>{let o,r,s,i;if(!Jb(n)||!t)return null;if(t.isEqual(U.after(n))&&n.lastChild){if(i=U.after(n.lastChild),Di(e)&&ja(n.lastChild)&&Jb(n.lastChild))return xf(n.lastChild)?U.before(n.lastChild):i}else i=t;const a=i.container();let l=i.offset();if(Tr(a)){if(Di(e)&&l>0)return U(a,--l);if(Fa(e)&&l<a.length)return U(a,++l);o=a}else{if(Di(e)&&l>0&&(r=ev(a,l-1),ja(r)))return!Zb(r)&&(s=Ec(r,e,hu,r),s)?Tr(s)?U(s,s.data.length):U.after(s):Tr(r)?U(r,r.data.length):U.before(r);if(Fa(e)&&l<a.childNodes.length&&(r=ev(a,l),ja(r)))return xf(r)?((d,u)=>{const f=u.nextSibling;return f&&ja(f)?Tr(f)?U(f,0):U.before(f):kf(Jt.Forwards,U.after(u),d)})(n,r):!Zb(r)&&(s=Ec(r,e,hu,r),s)?Tr(s)?U(s,0):U.before(s):Tr(r)?U(r,0):U.after(r);o=r||i.getNode()}if(o&&(Fa(e)&&i.isAtEnd()||Di(e)&&i.isAtStart())&&(o=Ec(o,e,Ct,n,!0),hu(o,n)))return tv(e,o);r=o&&Ec(o,e,hu,n);const c=zr(ke(((d,u)=>{const f=[];let p=d;for(;p&&p!==u;)f.push(p),p=p.parentNode;return f})(a,n),zS));return!c||r&&c.contains(r)?r?tv(e,r):null:(i=Fa(e)?U.after(c):U.before(c),i)},Or=e=>({next:t=>kf(Jt.Forwards,t,e),prev:t=>kf(Jt.Backwards,t,e)}),nv=e=>U.isTextPosition(e)?0===e.offset():Xn(e.getNode()),ov=e=>{if(U.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}return Xn(e.getNode(!0))},rv=(e,t)=>!U.isTextPosition(e)&&!U.isTextPosition(t)&&e.getNode()===t.getNode(!0),uo=(e,t,n)=>{const o=Or(t);return w.from(e?o.next(n):o.prev(n))},$a=(e,t,n)=>uo(e,t,n).bind(o=>{return Ar(n,o,t)&&(s=n,i=o,e?!rv(s,i)&&(U.isTextPosition(a=s)||!ut(a.getNode()))&&ov(s)&&nv(i):!rv(i,s)&&nv(s)&&ov(i))?uo(e,t,o):w.some(o);var s,i,a}),sv=(e,t,n,o)=>$a(e,t,n).bind(r=>o(r)?sv(e,t,r,o):w.some(r)),Ua=(e,t)=>{const n=e?t.firstChild:t.lastChild;return Y(n)?w.some(U(n,e?0:n.data.length)):n?Xn(n)?w.some(e?U.before(n):ut(o=n)?U.before(o):U.after(o)):((r,s,i)=>{const a=r?U.before(i):U.after(i);return uo(r,s,a)})(e,t,n):w.none();var o},Tn=se(uo,!0),jn=se(uo,!1),mn=se(Ua,!0),Uo=se(Ua,!1),Sf="_mce_caret",mo=e=>ie(e)&&e.id===Sf,Bi=(e,t)=>{let n=t;for(;n&&n!==e;){if(mo(n))return n;n=n.parentNode}return null},iv=e=>Oe(e,"name"),av=e=>X.isArray(e.start),pu=e=>!(!iv(e)&&dr(e.forward))||e.forward,lv=(e,t)=>(ie(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),HS=(e,t)=>Uo(e).fold(at,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),cv=(e,t,n)=>!(t.hasChildNodes()||!Bi(e,t)||(((o,r)=>{var s;const i=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(Mt);o.appendChild(i),r.setStart(i,0),r.setEnd(i,0)})(t,n),0)),dv=(e,t,n,o)=>{const r=n[t?"start":"end"],s=e.getRoot();if(r){let i=s,a=r[0];for(let l=r.length-1;i&&l>=1;l--){const c=i.childNodes;if(cv(s,i,o))return!0;if(r[l]>c.length-1)return!!cv(s,i,o)||HS(i,o);i=c[r[l]]}Y(i)&&(a=Math.min(r[0],i.data.length)),ie(i)&&(a=Math.min(r[0],i.childNodes.length)),t?o.setStart(i,a):o.setEnd(i,a)}return!0},Nf=e=>Y(e)&&e.data.length>0,uv=(e,t,n)=>{const o=e.get(n.id+"_"+t),r=o?.parentNode,s=n.keep;if(o&&r){let i,a;if("start"===t?s?o.hasChildNodes()?(i=o.firstChild,a=1):Nf(o.nextSibling)?(i=o.nextSibling,a=0):Nf(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=e.nodeIndex(o)+1):(i=r,a=e.nodeIndex(o)):s?o.hasChildNodes()?(i=o.firstChild,a=1):Nf(o.previousSibling)?(i=o.previousSibling,a=o.previousSibling.data.length):(i=r,a=e.nodeIndex(o)):(i=r,a=e.nodeIndex(o)),!s){const l=o.previousSibling,c=o.nextSibling;let d;for(X.each(X.grep(o.childNodes),u=>{Y(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});d=e.get(n.id+"_"+t);)e.remove(d,!0);if(Y(c)&&Y(l)&&!Pe.browser.isOpera()){const u=l.data.length;l.appendData(c.data),e.remove(c),i=l,a=u}}return w.some(U(i,a))}return w.none()},qS=(e,t,n)=>((o,r,s=!1)=>{return 2===r?gb(bn,s,o):3===r?(i=>{const a=i.getRng();return{start:lb(i.dom.getRoot(),U.fromRangeStart(a)),end:lb(i.dom.getRoot(),U.fromRangeEnd(a)),forward:i.isForward()}})(o):r?{rng:(i=o).getRng(),forward:i.isForward()}:pb(o,!1);var i})(e,t,n),WS=(e,t)=>{((n,o)=>{const r=n.dom;if(o){if(av(o))return((s,i)=>{const a=s.createRng();return dv(s,!0,i,a)&&dv(s,!1,i,a)?w.some({range:a,forward:pu(i)}):w.none()})(r,o);if(ge(o.start))return((s,i)=>{const a=w.from(cb(s.getRoot(),i.start)),l=w.from(cb(s.getRoot(),i.end));return Kt(a,l,(c,d)=>{const u=s.createRng();return u.setStart(c.container(),c.offset()),u.setEnd(d.container(),d.offset()),{range:u,forward:pu(i)}})})(r,o);if(Oe(o,"id"))return((s,i)=>{const a=uv(s,"start",i),l=uv(s,"end",i);return Kt(a,l.or(a),(c,d)=>{const u=s.createRng();return u.setStart(lv(s,c.container()),c.offset()),u.setEnd(lv(s,d.container()),d.offset()),{range:u,forward:pu(i)}})})(r,o);if(iv(o))return((s,i)=>w.from(s.select(i.name)[i.index]).map(a=>{const l=s.createRng();return l.selectNode(a),{range:l,forward:!0}}))(r,o);if((s=>Oe(s,"rng"))(o))return w.some({range:o.rng,forward:pu(o)})}return w.none()})(e,t).each(({range:n,forward:o})=>{e.setRng(n,o)})},fo=e=>ie(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type"),bu=(mv=Pt,e=>mv===e);var mv;const za=e=>""!==e&&-1!==" \f\n\r\t\v".indexOf(e),Af=e=>!za(e)&&!bu(e)&&!Cr(e),Tf=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},fv=(e,t)=>{const n=Yt(t,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:ke(zn(e,s=>{const i=iu(s);return i?[T(i)]:[]}),vi)},Ha=e=>fv(Tf(e.selection.getSel()),T(e.getBody())),Nc=(e,t)=>ci(e,"table",t),gv=e=>Il(e).fold(Z([e]),t=>[e].concat(gv(t))),Of=e=>Fl(e).fold(Z([e]),t=>"br"===Fe(t)?Xr(t).map(n=>[e].concat(Of(n))).getOr([]):[e].concat(Of(t))),Rf=(e,t)=>Kt((n=>{const o=n.startContainer,r=n.startOffset;return Y(o)?0===r?w.some(T(o)):w.none():w.from(o.childNodes[r]).map(T)})(t),(n=>{const o=n.endContainer,r=n.endOffset;return Y(o)?r===o.data.length?w.some(T(o)):w.none():w.from(o.childNodes[r-1]).map(T)})(t),(n,o)=>{const r=Tt(gv(e),se(We,n)),s=Tt(Of(e),se(We,o));return r.isSome()&&s.isSome()}).getOr(!1),Df=(e,t,n,o)=>{const r=n,s=new Ot(n,r),i=fs(e.schema.getMoveCaretBeforeOnEnterElements(),(l,c)=>!ae(["td","th","table"],c.toLowerCase()));let a=n;do{if(Y(a)&&0!==X.trim(a.data).length)return void(o?t.setStart(a,0):t.setEnd(a,a.data.length));if(i[a.nodeName])return void(o?t.setStartBefore(a):"BR"===a.nodeName?t.setEndBefore(a):t.setEndAfter(a))}while(a=o?s.next():s.prev());"BODY"===r.nodeName&&(o?t.setStart(r,0):t.setEnd(r,r.childNodes.length))},vu=e=>{const t=e.selection.getSel();return Q(t)&&t.rangeCount>0},Bf=(e,t)=>{const n=Ha(e);n.length>0?W(n,o=>{const r=o.dom,s=e.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),t(s,!0)}):t(e.selection.getRng(),!1)},hv=(e,t,n)=>{const o=pb(e,t);n(o),e.moveToBookmark(o)},Ac=e=>Dn(e?.nodeType),Lf=e=>ie(e)&&!fo(e)&&!mo(e)&&!ts(e),pv=(e,t,n)=>{const{selection:o,dom:r}=e,s=o.getNode(),i=st(s);hv(o,!0,()=>{t()}),i&&st(s)&&r.isChildOf(s,e.getBody())?e.selection.select(s):n(o.getStart())&&VS(r,o)},VS=(e,t)=>{var n,o;const r=t.getRng(),{startContainer:s,startOffset:i}=r;if(!((a,l)=>{if(Lf(l)&&!/^(TD|TH)$/.test(l.nodeName)){const c=a.getAttrib(l,"data-mce-selected"),d=parseInt(c,10);return!isNaN(d)&&d>0}return!1})(e,t.getNode())&&ie(s)){const a=s.childNodes,l=e.getRoot();let c;if(i<a.length){const d=a[i];c=new Ot(d,null!==(n=e.getParent(d,e.isBlock))&&void 0!==n?n:l)}else{const d=a[a.length-1];c=new Ot(d,null!==(o=e.getParent(d,e.isBlock))&&void 0!==o?o:l),c.next(!0)}for(let d=c.current();d;d=c.next()){if("false"===e.getContentEditable(d))return;if(Y(d)&&!Mf(d))return r.setStart(d,0),void t.setRng(r)}}},bv=(e,t,n)=>{if(e){const o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(ie(e)||!Mf(e))return e}},Pf=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Ue(e,t),qa=(e,t,n)=>e.schema.isValidChild(t,n),Mf=(e,t=!1)=>{if(Q(e)&&Y(e)){const n=t?e.data.replace(/ /g,"\xa0"):e.data;return ao(n)}return!1},vv=(e,t)=>{const n=e.dom;return Lf(t)&&"false"===n.getContentEditable(t)&&((o,r)=>{const s="[data-mce-cef-wrappable]",i=zk(o),a=To(i)?s:`${s},${i}`;return rn(T(r),a)})(e,t)&&0===n.select('[contenteditable="true"]',t).length},qs=(e,t)=>Ke(e)?e(t):(Q(t)&&(e=e.replace(/%(\w+)/g,(n,o)=>t[o]||n)),e),If=(e,t)=>(e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()),Ff=(e,t)=>{if(kt(e))return null;{let n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=Ei(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},yu=(e,t,n)=>{const o=e.getStyle(t,n);return Ff(o,n)},yv=(e,t)=>{let n;return e.getParent(t,o=>!!ie(o)&&(n=e.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},_u=(e,t,n)=>e.getParents(t,n,e.getRoot()),jf=(e,t,n)=>{const o=e.formatter.get(t);return Q(o)&&dt(o,n)},Rr=e=>gs(e,"block"),go=e=>gs(e,"selector"),qt=e=>gs(e,"inline"),$f=e=>go(e)&&!1!==e.expand&&!qt(e),_v=e=>(t=>{const n=[];let o=t;for(;o;){if(Y(o)&&o.data!==Mt||o.childNodes.length>1)return[];ie(o)&&n.push(o),o=o.firstChild}return n})(e).length>0,Uf=e=>mo(e.dom)&&_v(e.dom),Wa=fo,Cv=_u,wv=Mf,KS=Pf,Ev=(e,t)=>{let n=t;for(;n;){if(ie(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},xv=(e,t,n,o)=>{const r=t.data;if(e){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},YS=(e,t,n)=>xv(e,t,n,o=>bu(o)||za(o)),XS=(e,t,n)=>xv(e,t,n,Af),kv=(e,t,n,o,r,s)=>{let i;const a=e.getParent(n,e.isBlock)||t,l=(c,d,u)=>{const f=Ai(e);return w.from((r?f.backwards:f.forwards)(c,d,(g,b)=>Wa(g.parentNode)?-1:(i=g,u(r,g,b)),a))};return l(n,o,YS).bind(c=>s?l(c.container,c.offset+(r?-1:0),XS):w.some(c)).orThunk(()=>i?w.some({container:i,offset:r?0:i.length}):w.none())},Sv=(e,t,n,o,r)=>{const s=o[r];Y(o)&&To(o.data)&&s&&(o=s);const i=Cv(e,o);for(let a=0;a<i.length;a++)for(let l=0;l<t.length;l++){const c=t[l];if((!Q(c.collapsed)||c.collapsed===n.collapsed)&&go(c)&&e.is(i[a],c.selector))return i[a]}return o},Nv=(e,t,n,o)=>{var r;let s=n;const i=e.getRoot(),a=t[0];if(Rr(a)&&(s=a.wrapper?null:e.getParent(n,a.block,i)),!s){const l=null!==(r=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:i;s=e.getParent(Y(n)?n.parentNode:n,c=>c!==i&&KS(e.schema,c),l)}if(s&&Rr(a)&&a.wrapper&&(s=Cv(e,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!e.isBlock(s[o])&&(s=s[o],!If(s,"br")););return s||n},Av=(e,t,n,o)=>{const r=n.parentNode;return!Q(n[o])&&(!(r!==t&&!kt(r)&&!e.isBlock(r))||Av(e,t,r,o))},Cu=(e,t,n,o,r)=>{let s=n;const i=r?"previousSibling":"nextSibling",a=e.getRoot();if(Y(n)&&!wv(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!t[0].block_expand&&e.isBlock(s))return s;for(let c=s[i];c;c=c[i]){const d=Y(c)&&!Av(e,a,c,i);if(!Wa(c)&&(!ut(l=c)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!wv(c,d))return s}if(s===a||s.parentNode===a){n=s;break}s=s.parentNode}var l;return n},Tv=e=>Wa(e.parentNode)||Wa(e),Li=(e,t,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:i,endOffset:a}=t;const l=n[0];return ie(r)&&r.hasChildNodes()&&(r=Us(r,s),Y(r)&&(s=0)),ie(i)&&i.hasChildNodes()&&(i=Us(i,t.collapsed?a:a-1),Y(i)&&(a=i.data.length)),r=Ev(e,r),i=Ev(e,i),Tv(r)&&(r=Wa(r)?r:r.parentNode,r=t.collapsed?r.previousSibling||r:r.nextSibling||r,Y(r)&&(s=t.collapsed?r.length:0)),Tv(i)&&(i=Wa(i)?i:i.parentNode,i=t.collapsed?i.nextSibling||i:i.previousSibling||i,Y(i)&&(a=t.collapsed?0:i.length)),t.collapsed&&(kv(e,e.getRoot(),r,s,!0,o).each(({container:c,offset:d})=>{r=c,s=d}),kv(e,e.getRoot(),i,a,!1,o).each(({container:c,offset:d})=>{i=c,a=d})),(qt(l)||l.block_expand)&&(qt(l)&&Y(r)&&0!==s||(r=Cu(e,n,r,s,!0)),qt(l)&&Y(i)&&a!==i.data.length||(i=Cu(e,n,i,a,!1))),$f(l)&&(r=Sv(e,n,t,r,"previousSibling"),i=Sv(e,n,t,i,"nextSibling")),(Rr(l)||go(l))&&(r=Nv(e,n,r,"previousSibling"),i=Nv(e,n,i,"nextSibling"),Rr(l)&&(e.isBlock(r)||(r=Cu(e,n,r,s,!0)),e.isBlock(i)||(i=Cu(e,n,i,a,!1)))),ie(r)&&r.parentNode&&(s=e.nodeIndex(r),r=r.parentNode),ie(i)&&i.parentNode&&(a=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:r,startOffset:s,endContainer:i,endOffset:a}},Tc=(e,t,n)=>{var o;const r=t.startOffset,s=Us(t.startContainer,r),i=t.endOffset,a=Us(t.endContainer,i-1),l=h=>{const v=h[0];Y(v)&&v===s&&r>=v.data.length&&h.splice(0,1);const _=h[h.length-1];return 0===i&&h.length>0&&_===a&&Y(_)&&h.splice(h.length-1,1),h},c=(h,v,_)=>{const C=[];for(;h&&h!==_;h=h[v])C.push(h);return C},d=(h,v)=>e.getParent(h,_=>_.parentNode===v,v),u=(h,v,_)=>{const C=_?"nextSibling":"previousSibling";for(let k=h,E=k.parentNode;k&&k!==v;k=E){E=k.parentNode;const N=c(k===h?k:k[C],C);N.length&&(_||N.reverse(),n(l(N)))}};if(s===a)return n(l([s]));const f=null!==(o=e.findCommonAncestor(s,a))&&void 0!==o?o:e.getRoot();if(e.isChildOf(s,a))return u(s,f,!0);if(e.isChildOf(a,s))return u(a,f);const p=d(s,f)||s,g=d(a,f)||a;u(s,p,!0);const b=c(p===s?p:p.nextSibling,"nextSibling",g===a?g.nextSibling:g);b.length&&n(l(b)),u(a,g)},GS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Ov=(e,t,n,o,r,s)=>{const{uid:i=t,...a}=n;Yr(e,dc()),wt(e,`${Pa()}`,i),wt(e,`${Si()}`,o);const{attributes:l={},classes:c=[]}=r(i,a);if(so(e,l),d=e,W(c,f=>{Yr(d,f)}),s){c.length>0&&wt(e,`${mc()}`,c.join(","));const d=on(l);d.length>0&&wt(e,`${fc()}`,d.join(","))}var d},Rv=(e,t,n,o,r)=>{const s=Lt("span",e);return Ov(s,t,n,o,r,!1),s},Dv=e=>{const t=(()=>{const s={};return{register:(i,a)=>{s[i]={name:i,settings:a}},lookup:i=>nt(s,i).map(a=>a.settings),getNames:()=>on(s)}})();((s,i)=>{const a=Si(),l=d=>w.from(d.attr(a)).bind(i.lookup),c=d=>{var u,f;d.attr(Pa(),null),d.attr(Si(),null),d.attr(uc(),null);const p=w.from(d.attr(fc())).map(v=>v.split(",")).getOr([]),g=w.from(d.attr(mc())).map(v=>v.split(",")).getOr([]);W(p,v=>d.attr(v,null));const b=null!==(f=null===(u=d.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==f?f:[],h=$r(b,[dc()].concat(g));d.attr("class",h.length>0?h.join(" "):null),d.attr(mc(),null),d.attr(fc(),null)};s.serializer.addTempAttr(uc()),s.serializer.addAttributeFilter(a,d=>{for(const u of d)l(u).each(f=>{!1===f.persistent&&("span"===u.name?u.unwrap():c(u))})})})(e,t);const n=((s,i)=>{const a=Qt({}),l=()=>({listeners:[],previous:$s()}),c=(p,g)=>{d(p,b=>(g(b),b))},d=(p,g)=>{const b=a.get(),h=g(nt(b,p).getOrThunk(l));b[p]=h,a.set(b)},u=(p,g)=>{W(zp(s,p),b=>{g?wt(b,uc(),"true"):Ht(b,uc())})},f=of(()=>{const p=mr(i.getNames());W(p,g=>{d(g,b=>{const h=b.previous.get();return $p(s,w.some(g)).fold(()=>{h.each(v=>{var _;c(_=g,C=>{W(C.listeners,k=>k(!1,_))}),b.previous.clear(),u(v,!1)})},({uid:v,name:_,elements:C})=>{var k,E,N;Ro(h,v)||(h.each(k=>u(k,!1)),E=v,N=C,c(k=_,R=>{W(R.listeners,L=>L(!0,k,{uid:E,nodes:ze(N,P=>P.dom)}))}),b.previous.set(v),u(v,!0))}),{previous:b.previous,listeners:b.listeners}})})},30);return s.on("remove",()=>{f.cancel()}),s.on("NodeChange",()=>{f.throttle()}),{addListener:(p,g)=>{d(p,b=>({previous:b.previous,listeners:b.listeners.concat([g])}))}}})(e,t),o=ys("span"),r=s=>{W(s,i=>{o(i)?Fo(i):(a=>{ii(a,dc()),Ht(a,`${Pa()}`),Ht(a,`${Si()}`),Ht(a,`${uc()}`);const l=Do(a,`${fc()}`).map(u=>u.split(",")).getOr([]),c=Do(a,`${mc()}`).map(u=>u.split(",")).getOr([]);var d;W(l,u=>Ht(a,u)),d=a,W(c,u=>{ii(d,u)}),Ht(a,`${mc()}`),Ht(a,`${fc()}`)})(i)})};return{register:(s,i)=>{t.register(s,i)},annotate:(s,i)=>{t.lookup(s).each(a=>{var l,c,d,u;c=s,d=a,u=i,(l=e).undoManager.transact(()=>{const f=l.selection,p=f.getRng(),g=Ha(l).length>0,b=gc("mce-annotation");if(p.collapsed&&!g&&((h,v)=>{const _=Li(h.dom,v,[{inline:"span"}]);v.setStart(_.startContainer,_.startOffset),v.setEnd(_.endContainer,_.endOffset),h.selection.setRng(v)})(l,p),f.getRng().collapsed&&!g){const h=Rv(l.getDoc(),b,u,c,d.decorate);ya(h,Pt),f.getRng().insertNode(h.dom),f.select(h.dom)}else hv(f,!1,()=>{Bf(l,h=>{((e,t,n,o,r,s)=>{const i=[],a=Rv(e.getDoc(),n,s,o,r),l=$s(),c=()=>{l.clear()},d=f=>{W(f,u)},u=f=>{switch(p=e,g=f,b="span",h=Fe(f),Vn(g).fold(()=>"skipping",v=>{return"br"===h||kn(_=g)&&pi(_)===Mt?"valid":(_=>xn(_)&&pa(_,dc()))(g)?"existing":mo(g.dom)?"caret":dt(GS,_=>rn(g,_))?"valid-block":qa(p,b,h)&&qa(p,Fe(v),b)?"valid":"invalid-child";var _})){case"invalid-child":{c();const p=Nt(f);d(p),c();break}case"valid-block":c(),Ov(f,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const g=Ni(a);return i.push(g),l.set(g),g});$d(f,p);break}}var p,g,b,h};Tc(e.dom,t,f=>{c(),(p=>{const g=ze(p,T);d(g)})(f)})})(l,h,b,c,d.decorate,u)})})})})},annotationChanged:(s,i)=>{n.addListener(s,i)},remove:s=>{$p(e,w.some(s)).each(({elements:i})=>{const a=e.selection.getBookmark();r(i),e.selection.moveToBookmark(a)})},removeAll:s=>{const i=e.selection.getBookmark();tt(Hp(e,s),(a,l)=>{r(a)}),e.selection.moveToBookmark(i)},getAll:s=>{const i=Hp(e,s);return na(i,a=>ze(a,l=>l.dom))}}},Oc=e=>({getBookmark:se(qS,e),moveToBookmark:se(WS,e)});Oc.isBookmarkNode=fo;const Bv=(e,t,n)=>!n.collapsed&&dt(n.getClientRects(),o=>{return i=t,(s=e)>=(r=o).left&&s<=r.right&&i>=r.top&&i<=r.bottom;var r,s,i}),Lv=(e,t,n)=>{e.dispatch(t,n)},Pv=(e,t,n,o)=>{e.dispatch("FormatApply",{format:t,node:n,vars:o})},Mv=(e,t,n,o)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:o})},Iv=(e,t)=>e.dispatch("SetContent",t),Fv=(e,t)=>e.dispatch("GetContent",t),jv=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),oe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||oe.metaKeyPressed(e),metaKeyPressed:e=>Pe.os.isMacOS()||Pe.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Pi="data-mce-selected",$v=Math.abs,wu=Math.round,zf={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Uv=(e,t)=>{const n=t.dom,o=t.getDoc(),r=document,s=t.getBody();let i,a,l,c,d,u,f,p,g,b,h,v,_,C,k;const E=ne=>Q(ne)&&(Yd(ne)||n.is(ne,"figure.image")),N=ne=>$o(ne)||n.hasClass(ne,"mce-preview-object"),R=ne=>{const le=ne.target;((Ne,O)=>{if("longpress"===(B=Ne).type||0===B.type.indexOf("touch")){const B=Ne.touches[0];return E(Ne.target)&&!Bv(B.clientX,B.clientY,O)}var B;return E(Ne.target)&&!Bv(Ne.clientX,Ne.clientY,O)})(ne,t.selection.getRng())&&!ne.isDefaultPrevented()&&t.selection.select(le)},L=ne=>n.hasClass(ne,"mce-preview-object")&&Q(ne.firstElementChild)?[ne,ne.firstElementChild]:n.is(ne,"figure.image")?[ne.querySelector("img")]:[ne],P=ne=>{const le=Db(t);return!!le&&"false"!==ne.getAttribute("data-mce-resize")&&ne!==t.getBody()&&(n.hasClass(ne,"mce-preview-object")&&Q(ne.firstElementChild)?rn(T(ne.firstElementChild),le):rn(T(ne),le))},F=(ne,le,Ne)=>{if(Q(Ne)){const O=L(ne);W(O,B=>{B.style[le]||!t.schema.isValid(B.nodeName.toLowerCase(),le)?n.setStyle(B,le,Ne):n.setAttrib(B,le,""+Ne)})}},A=(ne,le,Ne)=>{F(ne,"width",le),F(ne,"height",Ne)},D=ne=>{let le,Ne,O,B,H;le=ne.screenX-u,Ne=ne.screenY-f,v=le*c[2]+p,_=Ne*c[3]+g,v=v<5?5:v,_=_<5?5:_,O=(E(i)||N(i))&&!1!==Lk(t)?!oe.modifierPressed(ne):oe.modifierPressed(ne),O&&($v(le)>$v(Ne)?(_=wu(v*b),v=wu(_/b)):(v=wu(_/b),_=wu(v*b))),A(a,v,_),B=c.startPos.x+le,H=c.startPos.y+Ne,B=B>0?B:0,H=H>0?H:0,n.setStyles(l,{left:B,top:H,display:"block"}),l.innerHTML=v+" &times; "+_,c[2]<0&&a.clientWidth<=v&&n.setStyle(a,"left",void 0+(p-v)),c[3]<0&&a.clientHeight<=_&&n.setStyle(a,"top",void 0+(g-_)),le=s.scrollWidth-C,Ne=s.scrollHeight-k,le+Ne!==0&&n.setStyles(l,{left:B-le,top:H-Ne}),h||(t.dispatch("ObjectResizeStart",{target:i,width:p,height:g,origin:"corner-"+c.name}),h=!0)},M=()=>{const ne=h;h=!1,ne&&(F(i,"width",v),F(i,"height",_)),n.unbind(o,"mousemove",D),n.unbind(o,"mouseup",M),r!==o&&(n.unbind(r,"mousemove",D),n.unbind(r,"mouseup",M)),n.remove(a),n.remove(l),n.remove(d),z(i),ne&&(t.dispatch("ObjectResized",{target:i,width:v,height:_,origin:"corner-"+c.name}),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},z=ne=>{_e();const le=n.getPos(ne,s),Ne=le.x,O=le.y,B=ne.getBoundingClientRect(),H=B.width||B.right-B.left,q=B.height||B.bottom-B.top;i!==ne&&(G(),i=ne,v=_=0);const K=t.dispatch("ObjectSelected",{target:ne});P(ne)&&!K.isDefaultPrevented()?tt(zf,(ce,ve)=>{let Ae=n.get("mceResizeHandle"+ve);Ae&&n.remove(Ae),Ae=n.add(s,"div",{id:"mceResizeHandle"+ve,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+ve+"-resize; margin:0; padding:0"}),n.bind(Ae,"mousedown",Ce=>{Ce.stopImmediatePropagation(),Ce.preventDefault(),(et=>{const de=L(i)[0];var De;u=et.screenX,f=et.screenY,p=de.clientWidth,g=de.clientHeight,b=g/p,c=ce,c.name=ve,c.startPos={x:H*ce[0]+Ne,y:q*ce[1]+O},C=s.scrollWidth,k=s.scrollHeight,d=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(d,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),a=N(De=i)?n.create("img",{src:Pe.transparentSrc}):De.cloneNode(!0),n.addClass(a,"mce-clonedresizable"),n.setAttrib(a,"data-mce-bogus","all"),a.contentEditable="false",n.setStyles(a,{left:Ne,top:O,margin:0}),A(a,H,q),a.removeAttribute(Pi),s.appendChild(a),n.bind(o,"mousemove",D),n.bind(o,"mouseup",M),r!==o&&(n.bind(r,"mousemove",D),n.bind(r,"mouseup",M)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+g)})(Ce)}),ce.elm=Ae,n.setStyles(Ae,{left:H*ce[0]+Ne-Ae.offsetWidth/2,top:q*ce[1]+O-Ae.offsetHeight/2})}):G(!1)},te=su(z,0),G=(ne=!0)=>{te.cancel(),_e(),i&&ne&&i.removeAttribute(Pi),tt(zf,(le,Ne)=>{const O=n.get("mceResizeHandle"+Ne);O&&(n.unbind(O),n.remove(O))})},he=(ne,le)=>n.isChildOf(ne,le),me=ne=>{if(h||t.removed||t.composing)return;const le="mousedown"===ne.type?ne.target:e.getNode(),Ne=Gr(T(le),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(B=>B.dom).filter(B=>n.isEditable(B.parentElement)||"IMG"===B.nodeName&&n.isEditable(B)).getOrUndefined(),O=Q(Ne)?n.getAttrib(Ne,Pi,"1"):"1";if(W(n.select(`img[${Pi}],hr[${Pi}]`),B=>{B.removeAttribute(Pi)}),Q(Ne)&&he(Ne,s)&&t.hasFocus()){pe();const B=e.getStart(!0);if(he(B,Ne)&&he(e.getEnd(!0),Ne))return n.setAttrib(Ne,Pi,O),void te.throttle(Ne)}G()},_e=()=>{tt(zf,ne=>{ne.elm&&(n.unbind(ne.elm),delete ne.elm)})},pe=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{pe(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",me),t.on("keyup compositionend",ne=>{i&&"TABLE"===i.nodeName&&me(ne)}),t.on("hide blur",G),t.on("contextmenu longpress",R,!0)}),t.on("remove",_e),{isResizable:P,showResizeRect:z,hideResizeRect:G,updateResizeRect:me,destroy:()=>{te.cancel(),i=a=d=null}}},zv=(e,t,n)=>{const o=e.document.createRange();var r,s;return r=o,t.fold(s=>{r.setStartBefore(s.dom)},(s,i)=>{r.setStart(s.dom,i)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(a=>{s.setEndBefore(a.dom)},(a,l)=>{s.setEnd(a.dom,l)},a=>{s.setEndAfter(a.dom)}),o},Hf=(e,t,n,o,r)=>{const s=e.document.createRange();return s.setStart(t.dom,n),s.setEnd(o.dom,r),s},Rc=Nr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Hv=(e,t,n)=>t(T(n.startContainer),n.startOffset,T(n.endContainer),n.endOffset),qv=(e,t,n,o)=>({start:e,soffset:t,finish:n,foffset:o}),JS=document.caretPositionFromPoint?(e,t,n)=>{var o,r;return w.from(null===(r=(o=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,t,n)).bind(s=>{if(null===s.offsetNode)return w.none();const i=e.dom.createRange();return i.setStart(s.offsetNode,s.offset),i.collapse(),w.some(i)})}:document.caretRangeFromPoint?(e,t,n)=>{var o,r;return w.from(null===(r=(o=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,t,n))}:w.none,qf=Nr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),is={before:qf.before,on:qf.on,after:qf.after,cata:(e,t,n,o)=>e.fold(t,n,o),getStart:e=>e.fold(tn,tn,tn)},Eu=Nr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Va={domRange:Eu.domRange,relative:Eu.relative,exact:Eu.exact,exactFromRange:e=>Eu.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=e.match({domRange:o=>T(o.startContainer),relative:(o,r)=>is.getStart(o),exact:(o,r,s,i)=>o});return ai(t)},range:qv},xu=(e,t)=>{const n=Fe(e);return"input"===n?is.after(e):ae(["br","img"],n)?0===t?is.before(e):is.after(e):is.on(e,t)},ZS=(e,t)=>{const n=e.fold(is.before,xu,is.after),o=t.fold(is.before,xu,is.after);return Va.relative(n,o)},Wv=(e,t,n,o)=>{const r=xu(e,t),s=xu(n,o);return Va.relative(r,s)},Wf=(e,t)=>{const n=(t||document).createDocumentFragment();return W(e,o=>{n.appendChild(o.dom)}),T(n)},Vv=(e,t,n)=>{return(o=ai(T(n)).dom,r=e,s=t,((i,a,l)=>{const c=T(i.document);return JS(c,a,l).map(d=>qv(T(d.startContainer),d.startOffset,T(d.endContainer),d.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},Vf=(e,t)=>Q(e)&&Q(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,Kv=(e,t,n)=>null!==((o,r,s)=>{let i=o;for(;i&&i!==r;){if(s(i))return i;i=i.parentNode}return null})(e,t,n),tN=(e,t,n)=>Kv(e,t,o=>o.nodeName===n),nN=(e,t)=>Xt(e)&&!Kv(e,t,mo),Yv=(e,t,n)=>{const o=t.parentNode;if(o){const r=new Ot(t,e.getParent(o,e.isBlock)||e.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(ut(s))return!0}return!1},Kf=(e,t,n,o,r)=>{const s=e.getRoot(),i=e.schema.getNonEmptyElements(),a=r.parentNode;let l,c;if(!a)return w.none();const d=e.getParent(a,e.isBlock)||s;if(o&&ut(r)&&t&&e.isEmpty(d))return w.some(U(a,e.nodeIndex(r)));const u=new Ot(r,d);for(;c=u[o?"prev":"next"]();){if("false"===e.getContentEditableParent(c)||nN(c,s))return w.none();if(Y(c)&&c.data.length>0)return tN(c,s,"A")?w.none():w.some(U(c,o?c.data.length:0));if(e.isBlock(c)||i[c.nodeName.toLowerCase()])return w.none();l=c}return Qo(l)?w.none():n&&l?w.some(U(l,0)):w.none()},Xv=(e,t,n,o)=>{const r=e.getRoot();let s,i=!1,a=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const c=ie(a)&&l===a.childNodes.length,d=e.schema.getNonEmptyElements();let u=n;if(Xt(a))return w.none();if(ie(a)&&l>a.childNodes.length-1&&(u=!1),Os(a)&&(a=r,l=0),a===r){if(u&&(s=a.childNodes[l>0?l-1:0],s)&&(Xt(s)||d[s.nodeName]||Go(s)))return w.none();if(a.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,a.childNodes.length-1),a=a.childNodes[l],l=Y(a)&&c?a.data.length:0,!t&&a===r.lastChild&&Go(a)||((f,p)=>{let g=p;for(;g&&g!==f;){if(st(g))return!0;g=g.parentNode}return!1})(r,a)||Xt(a)||gi(a))return w.none();if(a.hasChildNodes()&&!Go(a)){s=a;const f=new Ot(a,r);do{if(st(s)||Xt(s)){i=!1;break}if(Y(s)&&s.data.length>0){l=u?0:s.data.length,a=s,i=!0;break}if(d[s.nodeName.toLowerCase()]&&!Um(s)){l=e.nodeIndex(s),a=s.parentNode,u||l++,i=!0;break}}while(s=u?f.next():f.prev())}}}return t&&(Y(a)&&0===l&&Kf(e,c,t,!0,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),ie(a)&&(s=a.childNodes[l],s||(s=a.childNodes[l-1]),!s||!ut(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||Yv(e,s,!1)||Yv(e,s,!0)||Kf(e,c,t,!0,s).each(f=>{a=f.container(),l=f.offset(),i=!0}))),u&&!t&&Y(a)&&l===a.data.length&&Kf(e,c,t,!1,a).each(f=>{a=f.container(),l=f.offset(),i=!0}),i&&a?w.some(U(a,l)):w.none();var g},ku=(e,t)=>{const n=t.collapsed,o=t.cloneRange(),r=U.fromRangeStart(t);return Xv(e,n,!0,o).each(s=>{n&&U.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||Xv(e,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),Vf(t,o)?w.none():w.some(o)},Su=(e,t)=>e.splitText(t),Nu=e=>{let t=e.startContainer,n=e.startOffset,o=e.endContainer,r=e.endOffset;if(t===o&&Y(t)){if(n>0&&n<t.data.length)if(o=Su(t,n),t=o.previousSibling,r>n){r-=n;const s=Su(o,r).previousSibling;t=o=s,r=s.data.length,n=0}else r=0}else if(Y(t)&&n>0&&n<t.data.length&&(t=Su(t,n),n=0),Y(o)&&r>0&&r<o.data.length){const s=Su(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:r}},Mi=e=>({walk:(t,n)=>Tc(e,t,n),split:Nu,expand:(t,n={type:"word"})=>{if("word"===n.type){const o=Li(e,t,[{inline:"span"}]),r=e.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return t},normalize:t=>ku(e,t).fold(at,n=>(t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),!0))});Mi.compareRanges=Vf,Mi.getCaretRangeFromPoint=Vv,Mi.getSelectedNode=iu,Mi.getNode=Us;const oN=((e,t)=>{const n=r=>{const s=(i=>{const a=i.dom;return xs(i)?a.getBoundingClientRect().height:a.offsetHeight})(r);if(s<=0||null===s){const i=Kn(r,e);return parseFloat(i)||0}return s},o=(r,s)=>$t(s,(i,a)=>{const l=Kn(r,a),c=void 0===l?0:parseInt(l,10);return isNaN(c)?i:i+c},0);return{set:(r,s)=>{if(!Dn(s)&&!s.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+s);const i=r.dom;Ss(i)&&(i.style[e]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,i)=>{const a=o(r,i);return s>a?s-a:0}}})("height"),Gv=()=>T(document),Qv=(e,t)=>e.view(t).fold(Z([]),n=>{const o=e.owner(n),r=Qv(e,o);return[n].concat(r)});var rN=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?w.none():w.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(T)},owner:e=>Ko(e)});const Yf=e=>"textarea"===Fe(e),Jv=(e,t)=>{const n=(r=>{const s=r.dom.ownerDocument,i=s.body,a=s.defaultView,l=s.documentElement;if(i===r.dom)return As(i.offsetLeft,i.offsetTop);const c=fi(a?.pageYOffset,l.scrollTop),d=fi(a?.pageXOffset,l.scrollLeft),u=fi(l.clientTop,i.clientTop),f=fi(l.clientLeft,i.clientLeft);return _a(r).translate(d-f,c-u)})(e),o=oN.get(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},Zv=(e,t,n,o)=>{iN(e,(r,s)=>sN(e,t,n,o),n)},e0=(e,t,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};e.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,t,Ca(t).top,o,r),e.dispatch("AfterScrollIntoView",s))},sN=(e,t,n,o)=>{T(e.getBody());const s=T(e.getDoc()),i=((a,l)=>{const c=((u,f)=>{const p=Nt(u);if(0===p.length||Yf(u))return{element:u,offset:f};if(f<p.length&&!Yf(p[f]))return{element:p[f],offset:0};{const g=p[p.length-1];return Yf(g)?{element:u,offset:f}:"img"===Fe(g)?{element:g,offset:1}:kn(g)?{element:g,offset:pi(g).length}:{element:g,offset:Nt(g).length}}})(a,l),d=vr('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return cn(c.element,d),Jv(d,()=>ot(d))})(T(n.startContainer),n.startOffset);e0(e,s,t,i,o),i.cleanup()},t0=(e,t,n,o)=>{const r=T(e.getDoc());e0(e,r,n,Jv(T(t),Re),o)},iN=(e,t,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,i=n.endOffset;t(T(o),T(s));const a=e.dom.createRng();a.setStart(o,r),a.setEnd(s,i),e.selection.setRng(n)},Xf=(e,t,n,o,r)=>{const s=t.pos;if(o)Kl(s.left,s.top,r);else{const i=s.top-n+t.height;Kl(-e.getBody().getBoundingClientRect().left,i,r)}},n0=(e,t,n,o,r,s)=>{const i=o+n,a=r.pos.top,l=r.bottom,c=l-a>=o;a<n?Xf(e,r,o,!1!==s,t):a>i?Xf(e,r,o,c?!1!==s:!0===s,t):l>i&&!c&&Xf(e,r,o,!0===s,t)},o0=(e,t,n,o,r)=>{const s=ai(t).dom.innerHeight;n0(e,t,n,s,o,r)},r0=(e,t,n,o,r)=>{const s=ai(t).dom.innerHeight;n0(e,t,n,s,o,r);const i=(l=>{const c=Gv(),d=Ca(c),u=((g,b)=>{const h=b.owner(g);return Qv(b,h)})(l,rN),f=_a(l),p=Wo(u,(g,b)=>{const h=_a(b);return{left:g.left+h.left,top:g.top+h.top}},{left:0,top:0});return As(p.left+f.left+d.left,p.top+f.top+d.top)})(o.element),a=qd(window);i.top<a.y?zd(o.element,!1!==r):i.top>a.bottom&&zd(o.element,!0===r)},aN=(e,t,n)=>Zv(e,o0,t,n),lN=(e,t,n)=>t0(e,t,o0,n),cN=(e,t,n)=>Zv(e,r0,t,n),dN=(e,t,n)=>t0(e,t,r0,n),Dc=(e,t,n)=>{(e.inline?aN:cN)(e,t,n)},s0=(e,t=!1)=>e.dom.focus({preventScroll:t}),i0=e=>{const t=_r(e).dom;return e.dom===t.activeElement},Gf=(e=Gv())=>w.from(e.dom.activeElement).map(T),a0=(e,t)=>{const n=kn(t)?pi(t).length:Nt(t).length+1;return e>n?n:e<0?0:e},uN=e=>Va.range(e.start,a0(e.soffset,e.start),e.finish,a0(e.foffset,e.finish)),l0=(e,t)=>!wa(t.dom)&&(Lo(e,t)||We(e,t)),c0=e=>t=>l0(e,t.start)&&l0(e,t.finish),mN=e=>Va.range(T(e.startContainer),e.startOffset,T(e.endContainer),e.endOffset),fN=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),w.some(t)}catch{return w.none()}},Qf=e=>{const t=e.inline||Pe.browser.isFirefox()?(n=T(e.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?w.from(r.getRangeAt(0)):w.none()).map(mN)})(ai(n).dom).filter(c0(n))):w.none();var n;e.bookmark=t.isSome()?t:e.bookmark},Jf=e=>(e.bookmark?e.bookmark:w.none()).bind(t=>{return n=T(e.getBody()),w.from(t).filter(c0(n)).map(uN);var n}).bind(fN),d0={isEditorUIElement:e=>{const t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},ho={setEditorTimeout:(e,t,n)=>{return Dn(r=n)||(r=0),setTimeout(()=>{e.removed||t()},r);var r},setEditorInterval:(e,t,n)=>{const o=(Dn(s=n)||(s=0),setInterval(()=>{e.removed?clearInterval(o):t()},s));var s;return o}};let Ka;const Zf=rt.DOM,eg=e=>{const t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},Au=(e,t)=>{const n=Hk(e);return null!==Zf.getParent(t,r=>{return ie(s=r)&&d0.isEditorUIElement(s)||!!n&&e.dom.is(r,n);var s})},tg=e=>{try{const t=_r(T(e.getElement()));return Gf(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},gN=(e,t)=>{const n=t.editor;(r=>{const s=su(()=>{Qf(r)},0);r.on("init",()=>{var i,c;r.inline&&((i,a)=>{const l=()=>{a.throttle()};rt.DOM.bind(document,"mouseup",l),i.on("remove",()=>{rt.DOM.unbind(document,"mouseup",l)})})(r,s),c=s,(i=r).on("mouseup touchend",d=>{c.throttle()}),i.on("keyup NodeChange AfterSetSelectionRange",l=>{(c=>"nodechange"===c.type&&c.selectionChange)(l)||Qf(i)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{xS(r)&&!0!==r.inline&&s(T(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=e.focusedEditor;eg(tg(n))&&o(n,Yr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{ho.setEditorTimeout(n,()=>{const r=e.focusedEditor;eg(tg(n))&&r===n||o(n,ii),Au(n,tg(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Ka||(Ka=r=>{const s=e.activeEditor;s&&Ul(r).each(i=>{i.ownerDocument===document&&(i===document.body||Au(s,i)||e.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))})},Zf.bind(document,"focusin",Ka))},hN=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Ka&&(Zf.unbind(document,"focusin",Ka),Ka=null)},u0=(e,t)=>{var n,o,r;(n=T(e.getBody()),o=t,(r=o,r.collapsed?w.from(Us(r.startContainer,r.startOffset)).map(T):w.none()).bind(r=>Hm(r)?w.some(r):Lo(n,r)?w.none():w.some(n))).bind(n=>mn(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},ng=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Ii=e=>{return e.inline?(t=>{const n=t.getBody();return n&&(o=T(n),i0(o)||(r=o,Gf(_r(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(e):Q((t=e).iframeElement)&&i0(T(t.iframeElement));var t},m0=e=>Ii(e)||(t=>{const n=_r(T(t.getElement()));return Gf(n).filter(o=>!eg(o.dom)&&Au(t,o.dom)).isSome()})(e),og=e=>e.editorManager.setActive(e),f0=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),g0=(e,t,n,o,r)=>{const i=n?t.startOffset:t.endOffset;return w.from(n?t.startContainer:t.endContainer).map(T).map(a=>o&&t.collapsed?a:Es(a,r(a,i)).getOr(a)).bind(a=>xn(a)?w.some(a):Vn(a).filter(xn)).map(a=>a.dom).getOr(e)},h0=(e,t,n=!1)=>g0(e,t,!0,n,(o,r)=>Math.min(jl(o),r)),p0=(e,t,n=!1)=>g0(e,t,!1,n,(o,r)=>r>0?r-1:r),b0=(e,t)=>{const n=e;for(;e&&Y(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},rg=(e,t)=>ze(t,n=>{const o=e.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),pN=["img","br"],v0=e=>{return Xd(e).filter(n=>0!==n.trim().length||n.indexOf(Pt)>-1).isSome()||ae(pN,Fe(e))||Kr(n=e)&&"false"===pn(n,"contenteditable");var n},y0="[data-mce-autocompleter]",_0=e=>ks(e,y0),vN={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Tu=(e,t,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(e[o])return e[o];if(e!==t){let s=e[r];if(s)return s;for(let i=e.parent;i&&i!==t;i=i.parent)if(s=i[r],s)return s}},yN=e=>{var t;const n=null!==(t=e.value)&&void 0!==t?t:"";if(!ao(n))return!1;const o=e.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},C0=e=>{const t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class yn{static create(t,n){const o=new yn(t,vN[t]||1);return n&&tt(n,(r,s)=>{o.attr(s,r)}),o}constructor(t,n){this.name=t,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const o=this;if(!ge(t))return Q(t)&&tt(t,(s,i)=>{o.attr(i,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(t in r.map){delete r.map[t];let s=r.length;for(;s--;)if(r[s].name===t)return r.splice(s,1),o}return o}if(t in r.map){let s=r.length;for(;s--;)if(r[s].name===t){r[s].value=n;break}}else r.push({name:t,value:n});return r.map[t]=n,o}return r.map[t]}}clone(){const t=this,n=new yn(t.name,t.type),o=t.attributes;if(o){const r=[];r.map={};for(let s=0,i=o.length;s<i;s++){const a=o[s];"id"!==a.name&&(r[r.length]={name:a.name,value:a.value},r.map[a.name]=a.value)}n.attributes=r}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const o=n.next;t.insert(n,t,!0),n=o}t.remove()}remove(){const t=this,n=t.parent,o=t.next,r=t.prev;return n&&(n.firstChild===t?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===t?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const o=n.lastChild;return o?(o.next=t,t.prev=o,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,o){t.parent&&t.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===r.lastChild?r.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=r,t}getAll(t){const n=this,o=[];for(let r=n.firstChild;r;r=Tu(r,n))r.name===t&&o.push(r);return o}children(){const t=[];for(let n=this.firstChild;n;n=n.next)t.push(n);return t}empty(){const t=this;if(t.firstChild){const n=[];for(let r=t.firstChild;r;r=Tu(r,t))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},o){var r;const s=this;let i=s.firstChild;if(C0(s))return!1;if(i)do{if(1===i.type){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||C0(i))return!1}if(8===i.type||3===i.type&&!yN(i)||3===i.type&&i.parent&&n[i.parent.name]&&ao(null!==(r=i.value)&&void 0!==r?r:"")||o&&o(i))return!1}while(i=Tu(i,s));return!0}walk(t){return Tu(this,null,t)}}const _N=X.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),w0=e=>ge(e.nodeValue)&&e.nodeValue.includes(Mt),E0=e=>(0===e.length?"":`${ze(e,t=>`[${t}]`).join(",")},`)+'[data-mce-bogus="all"]',x0=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>w0(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),k0=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(w0(t)){const n=t.parentNode;return n&&Oe(_N,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),CN=e=>null!==x0(e).nextNode(),wN=e=>null!==k0(e).nextNode(),EN=(e,t)=>null!==t.querySelector(E0(e)),xN=(e,t)=>{W(t.querySelectorAll(E0(e)),n=>{const o=T(n);"all"===pn(o,"data-mce-bogus")?ot(o):W(e,r=>{Bo(o,r)&&Ht(o,r)})})},S0=e=>{let t=e.nextNode();for(;null!==t;)t.nodeValue=null,t=e.nextNode()},kN=So(S0,x0),SN=So(S0,k0),N0=(e,t)=>{const n=[{condition:se(EN,t),action:se(xN,t)},{condition:CN,action:kN},{condition:wN,action:SN}];let o=e,r=!1;return W(n,({condition:s,action:i})=>{s(o)&&(r||(o=e.cloneNode(!0),r=!0),i(o))}),o},A0=e=>{const t=Yt(e,"[data-mce-bogus]");W(t,n=>{"all"===pn(n,"data-mce-bogus")?ot(n):os(n)?(cn(n,ws("\ufeff")),ot(n)):Fo(n)})},T0=e=>{const t=Yt(e,"input");W(t,n=>{Ht(n,"name")})},O0=X.makeMap,R0=e=>{const t=[],n=(e=e||{}).indent,o=O0(e.indent_before||""),r=O0(e.indent_after||""),s=Sr.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="xhtml"!==e.element_format;return{start:(a,l,c)=>{if(n&&o[a]&&t.length>0){const d=t[t.length-1];d.length>0&&"\n"!==d&&t.push("\n")}if(t.push("<",a),l)for(let d=0,u=l.length;d<u;d++){const f=l[d];t.push(" ",f.name,'="',s(f.value,!0),'"')}if(t[t.length]=!c||i?">":" />",c&&n&&r[a]&&t.length>0){const d=t[t.length-1];d.length>0&&"\n"!==d&&t.push("\n")}},end:a=>{let l;t.push("</",a,">"),n&&r[a]&&t.length>0&&(l=t[t.length-1],l.length>0&&"\n"!==l&&t.push("\n"))},text:(a,l)=>{a.length>0&&(t[t.length]=l?a:s(a))},cdata:a=>{t.push("<![CDATA[",a,"]]>")},comment:a=>{t.push("\x3c!--",a,"--\x3e")},pi:(a,l)=>{l?t.push("<?",a," ",s(l),"?>"):t.push("<?",a,"?>"),n&&t.push("\n")},doctype:a=>{t.push("<!DOCTYPE",a,">",n?"\n":"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},Ws=(e={},t=co())=>{const n=R0(e);return e.validate=!("validate"in e)||e.validate,{serialize:o=>{const r=e.validate,s={3:a=>{var l;n.text(null!==(l=a.value)&&void 0!==l?l:"",a.raw)},8:a=>{var l;n.comment(null!==(l=a.value)&&void 0!==l?l:"")},7:a=>{n.pi(a.name,a.value)},10:a=>{var l;n.doctype(null!==(l=a.value)&&void 0!==l?l:"")},4:a=>{var l;n.cdata(null!==(l=a.value)&&void 0!==l?l:"")},11:a=>{let l=a;if(l=l.firstChild)do{i(l)}while(l=l.next)}};n.reset();const i=a=>{var l;const c=s[a.type];if(c)c(a);else{const d=a.name,u=d in t.getVoidElements();let f=a.attributes;if(r&&f&&f.length>1){const p=[];p.map={};const g=t.getElementRule(a.name);if(g){for(let b=0,h=g.attributesOrder.length;b<h;b++){const v=g.attributesOrder[b];if(v in f.map){const _=f.map[v];p.map[v]=_,p.push({name:v,value:_})}}for(let b=0,h=f.length;b<h;b++){const v=f[b].name;if(!(v in p.map)){const _=f.map[v];p.map[v]=_,p.push({name:v,value:_})}}f=p}}if(n.start(d,f,u),V(d))ge(a.value)&&n.text(a.value,!0),n.end(d);else if(!u){let p=a.firstChild;if(p){"pre"!==d&&"textarea"!==d||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{i(p)}while(p=p.next)}n.end(d)}}};return 1!==o.type||e.inner?3===o.type?s[3](o):s[11](o):i(o),n.getContent()}}},D0=new Set;W(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{D0.add(e)});const B0=["font","text-decoration","text-emphasis"],sg=(e,t)=>on(e.parseStyle(e.getAttrib(t,"style"))),AN=(e,t,n)=>{const o=sg(e,t),r=sg(e,n),s=i=>{var a,l;const c=null!==(a=e.getStyle(t,i))&&void 0!==a?a:"",d=null!==(l=e.getStyle(n,i))&&void 0!==l?l:"";return ln(c)&&ln(d)&&c!==d};return dt(o,i=>{const a=l=>dt(l,c=>c===i);if(!a(r)&&a(B0)){const l=ke(r,c=>dt(B0,d=>Qe(c,d)));return dt(l,s)}return s(i)})},L0=(e,t,n)=>w.from(n.container()).filter(Y).exists(o=>{const r=e?0:-1;return t(o.data.charAt(n.offset()+r))}),ig=se(L0,!0,za),ag=se(L0,!1,za),TN=e=>{const t=e.container();return Y(t)&&(0===t.data.length||Na(t.data)&&Oc.isBookmarkNode(t.parentNode))},Vs=(e,t)=>n=>Cf(e?0:-1,n).filter(t).isSome(),P0=e=>Yd(e)&&"block"===Kn(T(e),"display"),M0=e=>{return st(e)&&!(ie(t=e)&&"all"===t.getAttribute("data-mce-bogus"));var t},ON=Vs(!0,P0),RN=Vs(!1,P0),Bc=Vs(!0,$o),Lc=Vs(!1,$o),I0=Vs(!0,Go),F0=Vs(!1,Go),Ks=Vs(!0,M0),Ys=Vs(!1,M0),j0=(e,t)=>{return r=at,Lo(o=t,n=e)?Ml(n,s=>r(s)||We(s,o)).slice(0,-1):[];var n,o,r},as=(e,t)=>[e].concat(j0(e,t)),lg=(e,t,n)=>sv(e,t,n,TN),$0=(e,t,n)=>{return Tt(as(T(t.container()),e),(o=n,r=>o.isBlock(Fe(r))));var o},U0=(e,t,n,o)=>lg(e,t.dom,n).forall(r=>$0(t,n,o).fold(()=>!Ar(r,n,t.dom),s=>!Ar(r,n,t.dom)&&Lo(s,T(r.container())))),z0=(e,t,n,o)=>$0(t,n,o).fold(()=>lg(e,t.dom,n).forall(r=>!Ar(r,n,t.dom)),r=>lg(e,r.dom,n).isNone()),cg=se(z0,!1),H0=se(z0,!0),DN=se(U0,!1),BN=se(U0,!0),LN=e=>fu(e).exists(os),Ou=(e,t,n,o)=>{const r=ke(as(T(n.container()),t),i=>o.isBlock(Fe(i))),s=Ut(r).getOr(t);return uo(e,s.dom,n).filter(LN)},dg=(e,t,n)=>fu(t).exists(os)||Ou(!0,e,t,n).isSome(),ug=(e,t,n)=>{return(o=t,w.from(o.getNode(!0)).map(T)).exists(os)||Ou(!1,e,t,n).isSome();var o},PN=se(Ou,!1),MN=se(Ou,!0),q0=e=>U.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),W0=(e,t,n)=>{const o=ke(as(T(t.container()),e),r=>n.isBlock(Fe(r)));return Ut(o).getOr(e)},V0=(e,t,n)=>q0(t)?ag(t):ag(t)||jn(W0(e,t,n).dom,t).exists(ag),K0=(e,t,n)=>q0(t)?ig(t):ig(t)||Tn(W0(e,t,n).dom,t).exists(ig),mg=e=>fu(e).bind(t=>Io(t,xn)).exists(t=>{return n=Kn(t,"white-space"),ae(["pre","pre-wrap"],n);var n}),Y0=(e,t)=>n=>{return o=new Ot(n,e)[t](),Q(o)&&st(o)&&Vb(o);var o},X0=(e,t,n)=>{return!mg(t)&&(s=n,jn((o=e).dom,r=t).isNone()||Tn(o.dom,r).isNone()||cg(o,r,s)||H0(o,r,s)||ug(o,r,s)||dg(o,r,s)||V0(e,t,n)||K0(e,t,n));var o,r,s},Pc=(e,t,n)=>!mg(t)&&(cg(e,t,n)||DN(e,t,n)||ug(e,t,n)||V0(e,t,n)||((o,r)=>{const s=jn(o.dom,r).getOr(r),i=Y0(o.dom,"prev");return r.isAtStart()&&(i(r.container())||i(s.container()))})(e,t)),Mc=(e,t,n)=>!mg(t)&&(H0(e,t,n)||BN(e,t,n)||dg(e,t,n)||K0(e,t,n)||((o,r)=>{const s=Tn(o.dom,r).getOr(r),i=Y0(o.dom,"next");return r.isAtEnd()&&(i(r.container())||i(s.container()))})(e,t)),fg=(e,t,n)=>Pc(e,t,n)||Mc(e,(o=>{const r=o.container(),s=o.offset();return Y(r)&&s<r.data.length?U(r,s+1):o})(t),n),G0=(e,t)=>bu(e.charAt(t)),Q0=(e,t)=>za(e.charAt(t)),J0=(e,t,n,o)=>{const r=t.data,s=U(t,0);return n||!G0(r,0)||fg(e,s,o)?!!(n&&Q0(r,0)&&Pc(e,s,o))&&(t.data=Pt+r.slice(1),!0):(t.data=" "+r.slice(1),!0)},Z0=(e,t,n,o)=>{const r=t.data,s=U(t,r.length-1);return n||!G0(r,r.length-1)||fg(e,s,o)?!!(n&&Q0(r,r.length-1)&&Mc(e,s,o))&&(t.data=r.slice(0,-1)+Pt,!0):(t.data=r.slice(0,-1)+" ",!0)},ey=(e,t,n,o)=>{if(0===n)return;const r=T(e),s=Mo(r,c=>o.isBlock(Fe(c))).getOr(r),i=e.data.slice(t,t+n),a=t+n>=e.data.length&&Mc(s,U(e,e.data.length),o),l=0===t&&Pc(s,U(e,0),o);e.replaceData(t,n,Ps(i,4,l,a))},Ru=(e,t,n)=>{const o=e.data.slice(t),r=o.length-ia(o).length;ey(e,t,r,n)},gg=(e,t,n)=>{const o=e.data.slice(0,t),r=o.length-qr(o).length;ey(e,t-r,r,n)},hg=(e,t,n,o,r=!0)=>{const s=qr(e.data).length,i=r?e:t,a=r?t:e;return r?i.appendData(a.data):i.insertData(0,a.data),ot(T(a)),o&&Ru(i,s,n),i},FN=(e,t)=>((n,o)=>{const r=n.container(),s=n.offset();return!U.isTextPosition(n)&&r===o.parentNode&&s>U.before(o).offset()})(t,e)?U(t.container(),t.offset()-1):t,ty=e=>{return Xn(e.previousSibling)?w.some(Y(t=e.previousSibling)?U(t,t.data.length):U.after(t)):e.previousSibling?Uo(e.previousSibling):w.none();var t},ny=e=>{return Xn(e.nextSibling)?w.some(Y(t=e.nextSibling)?U(t,0):U.before(t)):e.nextSibling?mn(e.nextSibling):w.none();var t},oy=(e,t,n)=>{n.fold(()=>{e.focus()},o=>{e.selection.setRng(o.toRange(),t)})},$N=(e,t)=>t&&Oe(e.schema.getBlockElements(),Fe(t)),Fi=(e,t,n,o=!0,r=!1)=>{const s=((e,t,n)=>{return(o=e,r=t,s=n,o?(i=r,ny(a=s).orThunk(()=>ty(a)).orThunk(()=>{return Tn(l=i,U.after(c=a)).orThunk(()=>jn(l,U.before(c)));var l,c})):((i,a)=>ty(a).orThunk(()=>ny(a)).orThunk(()=>{return l=i,w.from((c=a).previousSibling?c.previousSibling:c.parentNode).bind(d=>jn(l,U.before(d))).orThunk(()=>Tn(l,U.after(c)));var l,c}))(r,s)).map(se(FN,n));var o,r,s,i,a})(t,e.getBody(),n.dom),i=Mo(n,se($N,e),(a=e.getBody(),c=>c.dom===a));var a;const l=((c,d,u,f)=>{const p=Xr(c).filter(kn),g=Po(c).filter(kn);return ot(c),(b=p,h=g,v=d,_=(C,k,E)=>{const N=C.dom,R=k.dom,L=N.data.length;return hg(N,R,u,f),E.container()===R?U(N,L):E},b.isSome()&&h.isSome()&&v.isSome()?w.some(_(b.getOrDie(),h.getOrDie(),v.getOrDie())):w.none()).orThunk(()=>(f&&(p.each(C=>gg(C.dom,C.dom.length,u)),g.each(C=>Ru(C.dom,0,u))),d));var b,h,v,_})(n,s,e.schema,(d=n,Oe(e.schema.getTextInlineElements(),Fe(d))));var d;e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(c=>((d,u)=>{if(I(d)){const f=vr('<br data-mce-bogus="1">');return u?W(Nt(d),p=>{Uf(p)||ot(p)}):Ns(d),Et(d,f),w.some(U.before(f.dom))}return w.none()})(c,r)).fold(()=>{o&&oy(e,t,l)},c=>{o&&oy(e,t,w.some(c))})},UN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ji=(e,t)=>rn(T(t),Bk(e))&&!Ue(e.schema,t)&&e.dom.isEditable(t),ry=e=>{var t,n;return"rtl"===rt.DOM.getStyle(e,"direction",!0)||(n=null!==(t=e.textContent)&&void 0!==t?t:"",UN.test(n))},Xs=(e,t,n)=>{const o=(r=e,s=t,ke(rt.DOM.getParents(n.container(),"*",s),r));var r,s;return w.from(o[o.length-1])},po=(e,t)=>{const n=t.container(),o=t.offset();return e?Zo(n)?Y(n.nextSibling)?U(n.nextSibling,0):U.after(n):_i(t)?U(n,o+1):t:Zo(n)?Y(n.previousSibling)?U(n.previousSibling,n.previousSibling.data.length):U.before(n):Aa(t)?U(n,o-1):t},sy=se(po,!0),iy=se(po,!1),ay=(e,t)=>{const n=o=>o.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},pg=e=>ay(e,"Delete"),zN=e=>Bs(e)||bi(e),Du=(e,t)=>{return Lo(e,t)?Io(t,zN,(n=e,o=>Ro(Vn(o),n,We))):w.none();var n},bg=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},ly=(e,t,n)=>Kt(mn(n),Uo(n),(o,r)=>{const s=po(!0,o),i=po(!1,r),a=po(!1,t);return e?Tn(n,a).exists(l=>l.isEqual(i)&&t.isEqual(s)):jn(n,a).exists(l=>l.isEqual(s)&&t.isEqual(i))}).getOr(!0),cy=e=>{var t;return(8===ma(t=e)||"#comment"===Fe(t)?Xr(e):Fl(e)).bind(cy).orThunk(()=>w.some(e))},dy=(e,t,n,o=!0)=>{var r;t.deleteContents();const s=cy(n).getOr(n),i=T(null!==(r=e.dom.getParent(s.dom,e.dom.isBlock))&&void 0!==r?r:n.dom);if(i.dom===e.getBody()?bg(e,o):I(i)&&(wr(i),o&&e.selection.setCursorLocation(i.dom,0)),!We(n,i)){const l=Ro(Vn(i),n)?[]:Vn(a=i).map(Nt).map(c=>ke(c,d=>!We(a,d))).getOr([]);W(l.concat(Nt(n)),c=>{We(c,i)||Lo(c,i)||!I(c)||ot(c)})}var a},uy=(e,t)=>Fd(e,t).isSome(),vg=e=>Yt(e,"td,th"),my=(e,t)=>Nc(T(e),t),yg=(e,t)=>({start:e,end:t}),Ic=Nr([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Bu=(e,t)=>Gr(T(e),"td,th",t),fy=e=>!We(e.start,e.end),gy=(e,t)=>Nc(e.start,t).bind(n=>Nc(e.end,t).bind(o=>Vr(We(n,o),n))),_g=e=>t=>gy(t,e).map(n=>({rng:t,table:n,cells:vg(n)})),hy=(e,t,n,o)=>{if(n.collapsed||!e.forall(fy))return w.none();if(t.isSameTable){const r=e.bind(_g(o));return w.some({start:r,end:r})}{const r=Bu(n.startContainer,o),s=Bu(n.endContainer,o),i=r.bind((l=o,c=>Nc(c,l).bind(d=>Hn(vg(d)).map(u=>yg(c,u))))).bind(_g(o)),a=s.bind((l=>c=>Nc(c,l).bind(d=>Ut(vg(d)).map(u=>yg(u,c))))(o)).bind(_g(o));return w.some({start:i,end:a})}var l},py=(e,t)=>ei(e,n=>We(n,t)),Cg=e=>Kt(py(e.cells,e.rng.start),py(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),by=(e,t)=>{const{startTable:n,endTable:o}=t,r=e.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},vy=e=>W(e,t=>{Ht(t,"contenteditable"),wr(t)}),wg=(e,t,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(t.dom.lastChild)):(r.setStartBefore(t.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Eg(e,r,t,!1).each(s=>s())},yy=e=>{const t=Ha(e),n=T(e.selection.getNode());jo(n.dom)&&I(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&dt(t,o=>We(o,n))&&wt(n,"data-mce-selected","1")},_y=(e,t,n)=>w.some(()=>{const o=e.selection.getRng(),r=n.bind(({rng:s,isStartInTable:i})=>{const a=w.from((c=e).dom.getParent(i?s.endContainer:s.startContainer,c.dom.isBlock)).map(T);var c;s.deleteContents(),((c,d,u)=>{u.each(f=>{d?ot(f):(wr(f),c.selection.setCursorLocation(f.dom,0))})})(e,i,a.filter(I));const l=i?t[0]:t[t.length-1];return wg(e,l,o,i),I(l)?w.none():w.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);vy(r),yy(e)}),WN=(e,t,n,o)=>w.some(()=>{const r=e.selection.getRng(),s=t[0],i=n[n.length-1];wg(e,s,r,!0),wg(e,i,r,!1);const a=I(s)?t:t.slice(1),l=I(i)?n:n.slice(0,-1);vy(a.concat(l)),o.deleteContents(),yy(e)}),Eg=(e,t,n,o=!0)=>w.some(()=>{dy(e,t,n,o)}),VN=(e,t)=>w.some(()=>Fi(e,!1,t)),Cy=(e,t)=>Tt(as(t,e),vi),xg=(e,t)=>Tt(as(t,e),ys("caption")),Lu=(e,t)=>w.some(()=>{wr(t),e.selection.setCursorLocation(t.dom,0)}),wy=(e,t)=>e?I0(t):F0(t),kg=(e,t)=>{const n=T(e.selection.getStart(!0)),o=Ha(e);return e.selection.isCollapsed()&&0===o.length?((e,t,n)=>{const o=T(e.getBody());return xg(o,n).fold(()=>((r,s,i,a)=>{const l=U.fromRangeStart(r.selection.getRng());return Cy(i,a).bind(c=>{return I(c)?Lu(r,c):(u=i,p=c,g=l,$a(s,r.getBody(),g).bind(b=>Cy(u,T(b.getNode())).bind(h=>We(h,p)?w.none():w.some(Re))));var u,p,g})})(e,t,o,n).orThunk(()=>Vr(((r,s)=>{const i=U.fromRangeStart(r.selection.getRng());return wy(s,i)||uo(s,r.getBody(),i).exists(a=>wy(s,a))})(e,t),Re)),r=>((s,i,a,l)=>{const c=U.fromRangeStart(s.selection.getRng());return I(l)?Lu(s,l):(u=a,p=l,g=c,$a(f=i,(d=s).getBody(),g).fold(()=>w.some(Re),b=>{return v=f,_=g,C=b,mn((h=p).dom).bind(k=>Uo(h.dom).map(E=>v?_.isEqual(k)&&C.isEqual(E):_.isEqual(E)&&C.isEqual(k))).getOr(!0)?((h,v)=>Lu(h,v))(d,p):((h,v,_)=>xg(h,T(_.getNode())).fold(()=>w.some(Re),C=>Vr(!We(C,v),Re)))(u,p,b);var h,v,_,C}));var d,u,f,p,g})(e,t,o,r))})(e,t,n):((r,s,i)=>{const a=T(r.getBody()),l=r.selection.getRng();return 0!==i.length?_y(r,i,w.none()):(c=r,u=l,xg(d=a,s).fold(()=>{return p=c,((e,t)=>{const n=(s=e,i=>We(s,i)),o=((s,i)=>{const a=Bu(s.startContainer,i),l=Bu(s.endContainer,i);return Kt(a,l,yg)})(t,n),r=((s,i)=>{const a=my(s.startContainer,i),l=my(s.endContainer,i),c=a.isSome(),d=l.isSome(),u=Kt(a,l,We).getOr(!1);return Kt((f={startTable:a,endTable:l,isStartInTable:c,isEndInTable:d,isSameTable:u,isMultiTable:!u&&c&&d}).startTable,f.endTable,(p,g)=>{const b=uy(p,v=>We(v,g)),h=uy(g,v=>We(v,p));return b||h?{...f,startTable:b?w.none():f.startTable,endTable:h?w.none():f.endTable,isSameTable:!1,isMultiTable:!1}:f}).getOr(f);var f})(t,n);var s;return((s,i,a)=>s.exists(l=>{return d=a,!fy(c=l)&&gy(c,d).exists(u=>{const f=u.dom.rows;return 1===f.length&&1===f[0].cells.length})&&Rf(l.start,i);var c,d}))(o,t,n)?o.map(s=>Ic.singleCellTable(t,s.start)):r.isMultiTable?((s,i,a,l)=>hy(s,i,a,l).bind(({start:c,end:d})=>{const u=c.bind(Cg).getOr([]),f=d.bind(Cg).getOr([]);if(u.length>0&&f.length>0){const p=by(a,i);return w.some(Ic.multiTable(u,f,p))}return w.none()}))(o,r,t,n):((s,i,a,l)=>hy(s,i,a,l).bind(({start:c,end:d})=>c.or(d)).bind(c=>{const{isSameTable:d}=i,u=Cg(c).getOr([]);if(d&&c.cells.length===u.length)return w.some(Ic.fullTable(c.table));if(u.length>0){if(d)return w.some(Ic.partialTable(u,w.none()));{const f=by(a,i);return w.some(Ic.partialTable(u,w.some({...i,rng:f})))}}return w.none()}))(o,r,t,n)})(d,u).bind(h=>h.fold(se(Eg,p),se(VN,p),se(_y,p),se(WN,p)));var p},p=>Lu(c,p)));var c,d,u})(e,n,o)},$i=(e,t)=>{let n=t;for(;n&&n!==e;){if(Yn(n)||st(n))return n;n=n.parentNode}return null},YN=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],XN=X.each,Sg=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=r=>dt(YN,s=>Qe(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const i=l=>{const c={};return XN(t.getAttribs(l),d=>{const u=d.nodeName.toLowerCase();"style"===u||o(u)||(c[u]=t.getAttrib(l,u))}),c},a=(l,c)=>{for(const d in l)if(Oe(l,d)){const u=c[d];if(Bt(u)||l[d]!==u)return!1;delete c[d]}for(const d in c)if(Oe(c,d))return!1;return!0};return!(ie(r)&&ie(s)&&(!a(i(r),i(s))||!a(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(s,"style"))))||fo(r)||fo(s))},isAttributeInternal:o}},Ey=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),xy=(e,t,n,o)=>{const r=n.name;for(let s=0,i=e.length;s<i;s++){const a=e[s];if(a.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:a,nodes:[n]}}}if(n.attributes)for(let s=0,i=t.length;s<i;s++){const a=t[s],l=a.name;if(l in n.attributes.map){const c=o.attributes[l];c?c.nodes.push(n):o.attributes[l]={filter:a,nodes:[n]}}}},ky=(e,t)=>{const n=(o,r)=>{tt(o,s=>{const i=nn(s.nodes);W(s.filter.callbacks,a=>{for(let l=i.length-1;l>=0;l--){const c=i[l];(r?void 0!==c.attr(s.filter.name):c.name===s.filter.name)&&!kt(c.parent)||i.splice(l,1)}i.length>0&&a(i,s.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},Sy=(e,t,n,o={})=>{const r=((s,i,a)=>{const l={nodes:{},attributes:{}};return a.firstChild&&((c,d)=>{let u=c;for(;u=u.walk();)xy(s,i,u,l)})(a),l})(e,t,n);ky(r,o)},Ng=(e,t,n,o)=>{if((e.pad_empty_with_br||t.insert)&&n(o)){const r=new yn("br",1);t.insert&&r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new yn("#text",3)).value=Pt},Ny=(e,t)=>{const n=e?.firstChild;return Q(n)&&n===e.lastChild&&n.name===t},Fc=(e,t,n,o)=>o.isEmpty(t,n,r=>((s,i)=>{const a=s.getElementRule(i.name);return!0===a?.paddEmpty})(e,r)),GN=e=>{let t;for(let n=e;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(t=n)}return w.from(t)},Ag=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const o=e.children();for(const r of o)n&&!t.isValidChild(n.name,r.name)&&Ag(r,t,n);e.unwrap()}},Tg=(e,t,n,o=Re)=>{const r=t.getTextBlockElements(),s=t.getNonEmptyElements(),i=t.getWhitespaceElements(),a=X.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=d=>d!==n&&!a[d.name];for(let d=0;d<e.length;d++){const u=e[d];let f,p,g;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let h=u.next;for(;h&&r[h.name];)h.name="li",l.add(h),u.parent.insert(h,u.parent),h=h.next;u.unwrap();continue}const b=[u];for(f=u.parent;f&&!t.isValidChild(f.name,u.name)&&c(f);f=f.parent)b.push(f);if(f&&b.length>1)if(Og(t,u,f))Ag(u,t);else{b.reverse(),p=b[0].clone(),o(p);let h=p;for(let v=0;v<b.length-1;v++){t.isValidChild(h.name,b[v].name)&&v>0?(g=b[v].clone(),o(g),h.append(g)):g=h;for(let _=b[v].firstChild;_&&_!==b[v+1];){const C=_.next;g.append(_),_=C}h=g}Fc(t,s,i,p)?f.insert(u,b[0],!0):(f.insert(p,b[0],!0),f.insert(u,p)),f=b[0],(Fc(t,s,i,f)||Ny(f,"br"))&&f.empty().remove()}else if(u.parent){if("li"===u.name){let h=u.prev;if(h&&("ul"===h.name||"ol"===h.name)){h.append(u);continue}if(h=u.next,h&&("ul"===h.name||"ol"===h.name)&&h.firstChild){h.insert(u,h.firstChild,!0);continue}const v=new yn("ul",1);o(v),u.wrap(v);continue}if(t.isValidChild(u.parent.name,"div")&&t.isValidChild("div",u.name)){const h=new yn("div",1);o(h),u.wrap(h)}else Ag(u,t)}}},Og=(e,t,n=t.parent)=>{return!(!n||(!e.children[t.name]||e.isValidChild(n.name,t.name))&&("a"!==t.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n))&&(o=n,"summary"!==o.name||!Ey(t)||n?.firstChild===t&&n?.lastChild===t));var o},Rg=e=>e.collapsed?e:(t=>{const n=U.fromRangeStart(t),o=U.fromRangeEnd(t),r=t.commonAncestorContainer;return uo(!1,r,o).map(s=>!Ar(n,o,r)&&Ar(n,s,r)?((i,a,l,c)=>{const d=document.createRange();return d.setStart(i,a),d.setEnd(l,c),d})(n.container(),n.offset(),s.container(),s.offset()):t).getOr(t)})(e),Dg=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},Ay=(e,t)=>{const n=U.after(e),o=Or(t).prev(n);return o?o.toRange():null},eA=["pre"],Bg=jo,tA=(e,t,n)=>{var o,r;const s=e.selection,i=e.dom,a=e.parser,l=n.merge,c=Ws({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=bn(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);let u=s.getRng();const f=u.startContainer,p=e.getBody();var C,k;f===p&&s.isCollapsed()&&i.isBlock(p.firstChild)&&(C=e,Q(k=p.firstChild)&&!C.schema.getVoidElements()[k.nodeName])&&i.isEmpty(p.firstChild)&&(u=i.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(C=>{const k=C.dom,E=Rg(C.selection.getRng());C.selection.setRng(E);const N=k.getParent(E.startContainer,Bg);var R,L,P;R=k,L=E,Q(P=N)&&P===R.getParent(L.endContainer,Bg)&&Rf(T(P),L)?Eg(C,E,T(N)):E.startContainer===E.endContainer&&E.endOffset-E.startOffset==1&&Y(E.startContainer.childNodes[E.startOffset])?E.deleteContents():C.getDoc().execCommand("Delete",!1)})(e);const g=s.getNode(),b={context:g.nodeName.toLowerCase(),data:n.data,insert:!0},h=a.parse(t,b);if(!0===n.paste&&((e,t)=>{let n=t.firstChild,o=t.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const i=r.getNonEmptyElements();return Q(s)&&(s.isEmpty(i)||(l=s,r.getBlockElements()[l.name]&&Q((c=l).firstChild)&&c.firstChild===c.lastChild&&(c=>"br"===c.name||c.value===Pt)(l.firstChild)));var l,c})(e,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(e.schema,h)&&((C,k)=>!!Dg(C,k))(i,g))return u=((e,t,n,o)=>{const r=((u,f,p)=>{const g=f.serialize(p);return(b=>{var h,v;const _=b.firstChild,C=b.lastChild;return _&&"META"===_.nodeName&&(null===(h=_.parentNode)||void 0===h||h.removeChild(_)),C&&"mce_marker"===C.id&&(null===(v=C.parentNode)||void 0===v||v.removeChild(C)),b})(u.createFragment(g))})(t,e,o),s=Dg(t,n.startContainer),i=(e=>{return e.length>0&&(!(n=e[e.length-1]).firstChild||Q(null==(t=n)?void 0:t.firstChild)&&t.firstChild===t.lastChild&&((o=t.firstChild).data===Pt||ut(o)))?e.slice(0,-1):e;var o,t,n})((a=r.firstChild,ke(null!==(l=a?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName)));var a,l;const c=t.getRoot(),d=u=>{const f=U.fromRangeStart(n),p=Or(t.getRoot()),g=1===u?p.prev(f):p.next(f),b=g?.getNode();return!b||Dg(t,b)!==s};return s?d(1)?((u,f,p)=>{const g=u.parentNode;return g&&X.each(f,b=>{g.insertBefore(b,u)}),((b,h)=>{const v=U.before(b),_=Or(h).next(v);return _?_.toRange():null})(u,p)})(s,i,c):d(2)?(u=s,p=c,t.insertAfter((f=i).reverse(),u),Ay(f[0],p)):((u,f,p,g)=>{const b=((v,_)=>{const C=_.cloneRange(),k=_.cloneRange();return C.setStartBefore(v),k.setEndAfter(v),[C.cloneContents(),k.cloneContents()]})(u,g),h=u.parentNode;return h&&(h.insertBefore(b[0],u),X.each(f,v=>{h.insertBefore(v,u)}),h.insertBefore(b[1],u),h.removeChild(u)),Ay(f[f.length-1],p)})(s,i,c,n):null;var u,f,p})(c,i,s.getRng(),h),u&&s.setRng(u),t;!0===n.paste&&((C,k,E,N)=>{var R;const L=k.firstChild,P=k.lastChild,F=L===("bookmark"===P.attr("data-mce-type")?P.prev:P),A=ae(eA,L.name);if(F&&A){const D="false"!==L.attr("contenteditable"),M=(null===(R=C.getParent(E,C.isBlock))||void 0===R?void 0:R.nodeName.toLowerCase())===L.name,z=w.from($i(N,E)).forall(Yn);return D&&M&&z}return!1})(i,h,g,e.getBody())&&(null===(o=h.firstChild)||void 0===o||o.unwrap()),(C=>{let k=C;for(;k=k.walk();)1===k.type&&k.attr("data-mce-fragment","1")})(h);let v=h.lastChild;if(v&&"mce_marker"===v.attr("id")){const C=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!i.isBlock(v.name)){v.parent&&e.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(C,v,"br"===v.name);break}}if(e._selectionOverrides.showBlockCaretContainer(g),b.invalid||((C,k,E)=>{var N;return dt(E.children(),Ey)&&"SUMMARY"===(null===(N=C.getParent(k,C.isBlock))||void 0===N?void 0:N.nodeName)})(i,g,h)){e.selection.setContent(d);let C,k=s.getNode();const E=e.getBody();for(Os(k)?k=C=E:C=k;C&&C!==E;)k=C,C=C.parentNode;t=k===E?E.innerHTML:i.getOuterHTML(k);const N=a.parse(t),R=(D=>{for(let M=D;M;M=M.walk())if("mce_marker"===M.attr("id"))return w.some(M);return w.none()})(N),L=R.bind(GN).getOr(N);R.each(D=>D.replace(h));const P=h.children(),F=null!==(r=h.parent)&&void 0!==r?r:N;h.unwrap();const A=ke(P,D=>Og(e.schema,D,F));Tg(A,e.schema,L),Sy(a.getNodeFilters(),a.getAttributeFilters(),N),t=c.serialize(N),k===E?i.setHTML(E,t):i.setOuterHTML(k,t)}else t=c.serialize(h),((C,k,E)=>{var N;if("all"===E.getAttribute("data-mce-bogus"))null===(N=E.parentNode)||void 0===N||N.insertBefore(C.dom.createFragment(k),E);else{const R=E.firstChild;!R||R===E.lastChild&&"BR"===R.nodeName?C.dom.setHTML(E,k):C.selection.setContent(k,{no_events:!0})}})(e,t,g);var _;return((C,k)=>{const E=C.schema.getTextInlineElements(),N=C.dom;if(k){const R=C.getBody(),L=Sg(C);X.each(N.select("*[data-mce-fragment]"),P=>{if(Q(E[P.nodeName.toLowerCase()])&&ur(sg(N,P),D=>!D0.has(D)))for(let F=P.parentElement;Q(F)&&F!==R&&!AN(N,P,F);F=F.parentElement)if(L.compare(F,P)){N.remove(P,!0);break}})}})(e,l),((C,k)=>{var E,N,R;let L;const P=C.dom,F=C.selection;if(!k)return;F.scrollIntoView(k);const A=$i(C.getBody(),k);if(A&&"false"===P.getContentEditable(A))return P.remove(k),void F.select(A);let D=P.createRng();const M=k.previousSibling;if(Y(M)){D.setStart(M,null!==(N=null===(E=M.nodeValue)||void 0===E?void 0:E.length)&&void 0!==N?N:0);const te=k.nextSibling;Y(te)&&(M.appendData(te.data),null===(R=te.parentNode)||void 0===R||R.removeChild(te))}else D.setStartBefore(k),D.setEndBefore(k);const z=P.getParent(k,P.isBlock);if(P.remove(k),z&&P.isEmpty(z)){const te=Bg(z);Ns(T(z)),D.setStart(z,0),D.setEnd(z,0),te||z.getAttribute("data-mce-fragment")||!(L=(G=>{let he=U.fromRangeStart(G);return he=Or(C.getBody()).next(he),he?.toRange()})(D))?P.add(z,P.create("br",te?{}:{"data-mce-bogus":"1"})):(D=L,P.remove(z))}F.setRng(D)})(e,i.get("mce_marker")),_=e.getBody(),X.each(_.getElementsByTagName("*"),C=>{C.removeAttribute("data-mce-fragment")}),((C,k,E)=>{w.from(C.getParent(k,"td,th")).map(T).each(N=>{return L=E,void Fl(R=N).each(P=>{Xr(P).each(F=>{L.isBlock(Fe(R))&&os(P)&&L.isBlock(Fe(F))&&ot(P)})});var R,L})})(i,s.getStart(),e.schema),((C,k,E)=>{const N=Ml(T(E),R=>We(R,T(k)));fr(N,N.length-2).filter(xn).fold(()=>$e(C,k),R=>$e(C,R.dom))})(e.schema,e.getBody(),s.getStart()),t},Pu=e=>e instanceof yn,Lg=(e,t,n)=>{var o;e.dom.setHTML(e.getBody(),t),!0!==n&&Ii(o=e)&&mn(o.getBody()).each(r=>{const s=r.getNode(),i=Go(s)?mn(s).getOr(r):r;o.selection.setRng(i.toRange())})},Ty=e=>Ke(e)?e:at,Pg=(e,t,n)=>{const o=t(e),r=Ty(n);return o.orThunk(()=>r(e)?w.none():((s,i,a)=>{let l=s.dom;const c=Ty(a);for(;l.parentNode;){l=l.parentNode;const d=T(l),u=i(d);if(u.isSome())return u;if(c(d))break}return w.none()})(e,t,r))},Mg=If,Oy=(e,t,n)=>{const o=e.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(go(s)&&!1===s.inherit&&e.dom.is(t,s.selector))return!0}return!1},Ig=(e,t,n,o,r)=>{const s=e.dom.getRoot();if(t===s)return!1;const i=e.dom.getParent(t,a=>!!Oy(e,a,n)||a.parentNode===s||!!Dr(e,a,n,o,!0));return!!Dr(e,i,n,o,r)},Mu=(e,t,n)=>!(!qt(n)||!Mg(t,n.inline))||!(!Rr(n)||!Mg(t,n.block))||!!go(n)&&ie(t)&&e.is(t,n.selector),Ry=(e,t,n,o,r,s)=>{const i=n[o],a="attributes"===o;if(Ke(n.onmatch))return n.onmatch(t,n,o);if(i)if(_d(i)){for(let l=0;l<i.length;l++)if(a?e.getAttrib(t,i[l]):yu(e,t,i[l]))return!0}else for(const l in i)if(Oe(i,l)){const c=a?e.getAttrib(t,l):yu(e,t,l),d=qs(i[l],s),u=kt(c)||To(c);if(u&&kt(d))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Mg(c,Ff(d,l)))return!1}return!0},Dr=(e,t,n,o,r)=>{const s=e.formatter.get(n),i=e.dom;if(s&&ie(t))for(let a=0;a<s.length;a++){const l=s[a];if(Mu(e.dom,t,l)&&Ry(i,t,l,"attributes",r,o)&&Ry(i,t,l,"styles",r,o)){const c=l.classes;if(c)for(let d=0;d<c.length;d++)if(!e.dom.hasClass(t,qs(c[d],o)))return;return l}}},Fg=(e,t,n,o,r)=>{if(o)return Ig(e,o,t,n,r);if(o=e.selection.getNode(),Ig(e,o,t,n,r))return!0;const s=e.selection.getStart();return!(s===o||!Ig(e,s,t,n,r))},jc=Mt,Dy=e=>{if(e){const t=new Ot(e,e);for(let n=t.current();n;n=t.next())if(Y(n))return n}return null},jg=e=>{const t=Lt("span");return so(t,{id:Sf,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Et(t,ws(jc)),t},$g=(e,t,n)=>{const o=e.dom,r=e.selection;if(_v(t))Fi(e,!1,T(t),n,!0);else{const s=r.getRng(),i=o.getParent(t,o.isBlock),a=s.startContainer,l=s.startOffset,c=s.endContainer,d=s.endOffset,u=(f=>{const p=Dy(f);return p&&p.data.charAt(0)===jc&&p.deleteData(0,1),p})(t);o.remove(t,!0),a===u&&l>0&&s.setStart(u,l-1),c===u&&d>0&&s.setEnd(u,d-1),i&&o.isEmpty(i)&&wr(T(i)),r.setRng(s)}},Ug=(e,t,n)=>{const o=e.dom,r=e.selection;if(t)$g(e,t,n);else if(!(t=Bi(e.getBody(),r.getStart())))for(;t=o.get(Sf);)$g(e,t,n)},By=(e,t)=>(e.appendChild(t),t),Ly=(e,t)=>{var n;const o=Wo(e,(s,i)=>By(s,i.cloneNode(!1)),t),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return By(o,r.createTextNode(jc))},Py=e=>{const t=jg(!1),n=Ly(e,t.dom);return{caretContainer:t,caretPosition:U(n,0)}},My=(e,t)=>{const{caretContainer:n,caretPosition:o}=Py(t);return cn(T(e),n),ot(T(e)),o},Iy=(e,t)=>{if(mo(t.dom))return!1;const n=e.schema.getTextInlineElements();return Oe(n,Fe(t))&&!mo(t.dom)&&!ts(t.dom)},$c={},Fy=io(["pre"]);((e,t)=>{$c[e]||($c[e]=[]),$c[e].push(n=>{if(!n.selection.getRng().collapsed){const o=n.selection.getSelectedBlocks(),r=ke(ke(o,Fy),(s=o,i=>{const a=i.previousSibling;return Fy(a)&&ae(s,a)}));W(r,s=>{((i,a)=>{const l=T(a),c=Ko(l).dom;ot(l),Jr(T(i),[Lt("br",c),Lt("br",c),...Nt(l)])})(s.previousSibling,s)})}var s})})("pre");const jy=["fontWeight","fontStyle","color","fontSize","fontFamily"],$y=(e,t)=>{const n=e.get(t);return Je(n)?Tt(n,o=>{return qt(o)&&"span"===o.inline&&Vt((r=o).styles)&&dt(on(r.styles),s=>ae(jy,s));var r}):w.none()},Uy=(e,t)=>jn(t,U.fromRangeStart(e)).isNone(),zy=(e,t)=>!1===Tn(t,U.fromRangeEnd(e)).exists(n=>!ut(n.getNode())||Tn(t,n).isSome()),Hy=e=>t=>ka(t)&&e.isEditable(t),qy=e=>ke(e.getSelectedBlocks(),Hy(e.dom)),zg=X.each,Hg=e=>ie(e)&&!fo(e)&&!mo(e)&&!ts(e),Wy=(e,t)=>{for(let n=e;n;n=n[t]){if(Y(n)&&ln(n.data))return e;if(ie(n)&&!fo(n))return n}return e},Vy=(e,t,n)=>{const o=Sg(e),r=sn(t)&&e.dom.isEditable(t),s=sn(n)&&e.dom.isEditable(n);if(r&&s){const i=Wy(t,"previousSibling"),a=Wy(n,"nextSibling");if(o.compare(i,a)){for(let l=i.nextSibling;l&&l!==a;){const c=l;l=l.nextSibling,i.appendChild(c)}return e.dom.remove(a),X.each(X.grep(a.childNodes),l=>{i.appendChild(l)}),i}}return n},Ky=(e,t,n,o)=>{var r;if(o&&!1!==t.merge_siblings){const s=null!==(r=Vy(e,bv(o),o))&&void 0!==r?r:o;Vy(e,s,bv(s,!0))}},qg=(e,t,n)=>{zg(e.childNodes,o=>{Hg(o)&&(t(o)&&n(o),o.hasChildNodes()&&qg(o,t,n))})},Yy=(e,t)=>n=>!(!n||!yu(e,n,t)),Xy=(e,t,n)=>o=>{var r,s;e.setStyle(o,t,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=e,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},Ui=Nr([{keep:[]},{rename:["name"]},{removed:[]}]),oA=/^(src|href|style)$/,Wg=X.each,Iu=If,Gy=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),Qy=(e,t,n)=>{let o=t[n?"startContainer":"endContainer"],r=t[n?"startOffset":"endOffset"];if(ie(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return Y(o)&&n&&r>=o.data.length&&(o=new Ot(o,e.getBody()).next()||o),Y(o)&&!n&&0===r&&(o=new Ot(o,e.getBody()).prev()||o),o},Jy=(e,t)=>{const n=t?"firstChild":"lastChild",o=e[n];return/^(TR|TH|TD)$/.test(e.nodeName)&&o?"TR"===e.nodeName&&o[n]||o:e},Vg=(e,t,n,o)=>{var r;const s=e.create(n,o);return null===(r=t.parentNode)||void 0===r||r.insertBefore(s,t),s.appendChild(t),s},Zy=(e,t,n,o,r)=>{const s=T(t),i=T(e.create(o,r)),a=n?Bd(s):yr(s);return Jr(i,a),n?(cn(s,i),Wl(i,s)):(Yo(s,i),Et(i,s)),i.dom},e_=(e,t,n)=>{const o=t.parentNode;let r;const s=e.dom,i=un(e);var a;Rr(n)&&o===s.getRoot()&&(n.list_block&&Iu(t,n.list_block)||W(nn(t.childNodes),a=>{qa(e,i,a.nodeName.toLowerCase())?r?r.appendChild(a):(r=Vg(s,a,i),s.setAttribs(r,yc(e))):r=null})),go(a=n)&&qt(a)&&Ro(nt(a,"mixed"),!0)&&!Iu(n.inline,t)||s.remove(t,!0)},t_=(e,t,n)=>Dn(e)?{name:t,value:null}:{name:e,value:qs(t,n)},n_=(e,t)=>{""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},o_=(e,t,n,o,r)=>{let s=!1;Wg(n.styles,(i,a)=>{const{name:l,value:c}=t_(a,i,o),d=Ff(c,l);(n.remove_similar||ct(c)||!ie(r)||Iu(yu(e,r,l),d))&&e.setStyle(t,l,""),s=!0}),s&&n_(e,t)},r_=(e,t,n,o,r)=>{const s=e.dom,i=Sg(e),a=e.schema;if(qt(t)&&Ve(a,t.inline)&&Ue(a,o)&&o.parentElement===e.getBody())return e_(e,o,t),Ui.removed();if(!t.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Mu(s,o,t)&&(!t.links||"A"!==o.nodeName))return Ui.keep();const l=o,c=t.preserve_attributes;if(qt(t)&&"all"===t.remove&&Je(c)){const d=ke(s.getAttribs(l),u=>ae(c,u.name.toLowerCase()));if(s.removeAllAttribs(l),W(d,u=>s.setAttrib(l,u.name,u.value)),d.length>0)return Ui.rename("span")}if("all"!==t.remove){o_(s,l,t,n,r),Wg(t.attributes,(u,f)=>{const{name:p,value:g}=t_(f,u,n);if(t.remove_similar||ct(g)||!ie(r)||Iu(s.getAttrib(r,p),g)){if("class"===p){const b=s.getAttrib(l,p);if(b){let h="";if(W(b.split(/\s+/),v=>{/mce\-\w+/.test(v)&&(h+=(h?" ":"")+v)}),h)return void s.setAttrib(l,p,h)}}if(oA.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&io(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),Wg(t.classes,u=>{u=qs(u,n),ie(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const d=s.getAttribs(l);for(let u=0;u<d.length;u++)if(!i.isAttributeInternal(d[u].nodeName))return Ui.keep()}return"none"!==t.remove?(e_(e,l,t),Ui.removed()):Ui.keep()},rA=(e,t,n,o)=>r_(e,t,n,o,o).fold(Z(o),r=>(e.dom.createFragment().appendChild(o),e.dom.rename(o,r)),Z(null)),s_=(e,t,n,o,r)=>{(o||e.selection.isEditable())&&((s,i,a,l,c)=>{const d=s.formatter.get(i),u=d[0],f=s.dom,p=s.selection,g=C=>{const k=((E,N,R,L,P)=>{let F;return N.parentNode&&W(_u(E.dom,N.parentNode).reverse(),A=>{if(!F&&ie(A)&&"_start"!==A.id&&"_end"!==A.id){const D=Dr(E,A,R,L,P);D&&!1!==D.split&&(F=A)}}),F})(s,C,i,a,c);return((E,N,R,L,P,F,A,D)=>{var M,z;let te,G;const he=E.dom;if(R){const me=R.parentNode;for(let _e=L.parentNode;_e&&_e!==me;_e=_e.parentNode){let pe=he.clone(_e,!1);for(let ne=0;ne<N.length&&(pe=rA(E,N[ne],D,pe),null!==pe);ne++);pe&&(te&&pe.appendChild(te),G||(G=pe),te=pe)}A.mixed&&he.isBlock(R)||(L=null!==(M=he.split(R,L))&&void 0!==M?M:L),te&&G&&(null===(z=P.parentNode)||void 0===z||z.insertBefore(te,P),G.appendChild(P),qt(A)&&Ky(E,A,0,te))}return L})(s,d,k,C,C,0,u,a)},b=C=>dt(d,k=>Uc(s,k,a,C,C)),h=C=>{const k=nn(C.childNodes),E=b(C)||dt(d,R=>Mu(f,C,R)),N=C.parentNode;if(!E&&Q(N)&&$f(u)&&b(N),u.deep&&k.length)for(let R=0;R<k.length;R++)h(k[R]);W(["underline","line-through","overline"],R=>{ie(C)&&s.dom.getStyle(C,"text-decoration")===R&&C.parentNode&&yv(f,C.parentNode)===R&&Uc(s,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:R}},void 0,C)})},v=C=>{const k=f.get(C?"_start":"_end");if(k){let E=k[C?"firstChild":"lastChild"];return fo(N=E)&&ie(N)&&("_start"===N.id||"_end"===N.id)&&(E=E[C?"firstChild":"lastChild"]),Y(E)&&0===E.data.length&&(E=C?k.previousSibling||k.nextSibling:k.nextSibling||k.previousSibling),f.remove(k,!0),E}var N;return null},_=C=>{let k,E,N=Li(f,C,d,C.collapsed);if(u.split){if(N=Nu(N),k=Qy(s,N,!0),E=Qy(s,N),k!==E){if(k=Jy(k,!0),E=Jy(E,!1),Gy(f,k,E)){const L=w.from(k.firstChild).getOr(k);return g(Zy(f,L,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void v(!0)}if(Gy(f,E,k)){const L=w.from(E.lastChild).getOr(E);return g(Zy(f,L,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void v(!1)}k=Vg(f,k,"span",{id:"_start","data-mce-type":"bookmark"}),E=Vg(f,E,"span",{id:"_end","data-mce-type":"bookmark"});const R=f.createRng();R.setStartAfter(k),R.setEndBefore(E),Tc(f,R,L=>{W(L,P=>{fo(P)||fo(P.parentNode)||g(P)})}),g(k),g(E),k=v(!0),E=v()}else k=E=g(k);N.startContainer=k.parentNode?k.parentNode:k,N.startOffset=f.nodeIndex(k),N.endContainer=E.parentNode?E.parentNode:E,N.endOffset=f.nodeIndex(E)+1}Tc(f,N,R=>{W(R,h)})};if(l){if(Ac(l)){const C=f.createRng();C.setStartBefore(l),C.setEndAfter(l),_(C)}else _(l);Mv(s,i,l,a)}else p.isCollapsed()&&qt(u)&&!Ha(s).length?((e,t,n,o)=>{const r=e.dom,s=e.selection;let i=!1;const a=e.formatter.get(t);if(!a)return;const l=s.getRng(),c=l.startContainer,d=l.startOffset;let u=c;Y(c)&&(d!==c.data.length&&(i=!0),u=u.parentNode);const f=[];let p;for(;u;){if(Dr(e,u,t,n,o)){p=u;break}u.nextSibling&&(i=!0),f.push(u),u=u.parentNode}if(p)if(i){const g=s.getBookmark();l.collapse(!0);let b=Li(r,l,a,!0);b=Nu(b),e.formatter.remove(t,n,b,o),s.moveToBookmark(g)}else{const g=Bi(e.getBody(),p),b=Q(g)?r.getParents(p.parentNode,Ct,g):[],h=jg(!1).dom;((C,k,E)=>{var N,R;const L=C.dom,P=L.getParent(E,se(Pf,C.schema));P&&L.isEmpty(P)?null===(N=E.parentNode)||void 0===N||N.replaceChild(k,E):((F=>{const A=Yt(F,"br"),D=ke((M=>{const z=[];let te=M.dom;for(;te;)z.push(T(te)),te=te.lastChild;return z})(F).slice(-1),os);A.length===D.length&&W(D,ot)})(T(E)),L.isEmpty(E)?null===(R=E.parentNode)||void 0===R||R.replaceChild(k,E):L.insertAfter(k,E))})(e,h,g??p);const v=((C,k,E,N,R,L)=>{const P=C.formatter,F=C.dom,A=ke(on(P.get()),M=>M!==N&&!St(M,"removeformat")),D=(M=C,z=E,$t(A,(G,he)=>{const me=jf(M,he,ne=>{const le=Ne=>Ke(Ne)||Ne.length>1&&"%"===Ne.charAt(0);return dt(["styles","attributes"],Ne=>nt(ne,Ne).exists(O=>{const B=Je(O)?O:oa(O);return dt(B,le)}))});return M.formatter.matchNode(z,he,{},me)?G.concat([he]):G},[]));var M,z;if(ke(D,M=>!((z,te,G)=>{const he=["inline","block","selector","attributes","styles","classes"],me=_e=>fs(_e,(pe,ne)=>dt(he,le=>le===ne));return jf(z,te,_e=>{const pe=me(_e);return jf(z,G,ne=>{const le=me(ne);return((Ne,O,B=eo)=>ml(B).eq(Ne,O))(pe,le)})})})(C,M,N)).length>0){const M=E.cloneNode(!1);return F.add(k,M),P.remove(N,R,M,L),F.remove(M),w.some(M)}return w.none()})(e,h,p,t,n,o),_=Ly([...f,...v.toArray(),...b],h);g&&$g(e,g,Q(g)),s.setCursorLocation(_,1),r.isEmpty(p)&&r.remove(p)}})(s,i,a,c):(pv(s,()=>Bf(s,_),C=>qt(u)&&Fg(s,i,a,C)),s.nodeChanged()),C=s,E=a,"removeformat"===(k=i)?W(qy(C.selection),N=>{W(jy,R=>C.dom.setStyle(N,R,"")),n_(C.dom,N)}):$y(C.formatter,k).each(N=>{W(qy(C.selection),R=>o_(C.dom,R,N,E,null))}),Mv(s,i,l,a);var C,k,E})(e,t,n,o,r)},Uc=(e,t,n,o,r)=>r_(e,t,n,o,r).fold(at,s=>(e.dom.rename(o,s),!0),Ct),i_=X.each,Fu=X.each,a_=(e,t,n,o)=>{if(Fu(n.styles,(r,s)=>{e.setStyle(t,s,qs(r,o))}),n.styles){const r=e.getAttrib(t,"style");r&&e.setAttrib(t,"data-mce-style",r)}},sA=(e,t,n,o)=>{const r=e.formatter.get(t),s=r[0],i=!o&&e.selection.isCollapsed(),a=e.dom,l=e.selection,c=(g,b=s)=>{Ke(b.onformat)&&b.onformat(g,b,n,o),a_(a,g,b,n),Fu(b.attributes,(h,v)=>{a.setAttrib(g,v,qs(h,n))}),Fu(b.classes,h=>{const v=qs(h,n);a.hasClass(g,v)||a.addClass(g,v)})},d=(g,b)=>{let h=!1;return Fu(g,v=>!(!go(v)||("false"!==a.getContentEditable(b)||v.ceFalseOverride)&&(!Q(v.collapsed)||v.collapsed===i)&&a.is(b,v.selector)&&!mo(b)&&(c(b,v),h=!0,1))),h},f=(g,b,h)=>{const v=[];let _=!0;const C=s.inline||s.block,k=(g=>{if(ge(g)){const b=a.create(g);return c(b),b}return null})(C);Tc(g,b,E=>{let N;const R=L=>{let P=!1,F=_,A=!1;const D=L.parentNode,M=D.nodeName.toLowerCase(),z=g.getContentEditable(L);Q(z)&&(F=_,_="true"===z,P=!0,A=vv(e,L));const te=_&&!P;if(ut(L)&&!((G,he,me,_e)=>{if(Uk(G)&&qt(he)&&me.parentNode){const pe=eu(G.schema),ne=((e,t)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=T(r.parentNode),Tt(s.dom.childNodes,a=>(s=>!We(n,s)&&o(s))(T(a))).map(T)):w.none();var s})(e,t).isSome())(T(me),le=>mo(le.dom));return gs(pe,_e)&&I(T(me.parentNode),!1)&&!ne}return!1})(e,s,L,M))return N=null,void(Rr(s)&&g.remove(L));if(G=L,Rr(he=s)&&!0===he.wrapper&&Dr(e,G,t,n))N=null;else{if(((G,he,me)=>{const _e=Rr(pe=s)&&!0!==pe.wrapper&&Pf(e.schema,G)&&qa(e,he,C);var pe;return me&&_e})(L,M,te)){const G=g.rename(L,C);return c(G),v.push(G),void(N=null)}if(go(s)){let G=d(r,L);if(!G&&Q(D)&&$f(s)&&(G=d(r,D)),!qt(s)||G)return void(N=null)}Q(k)&&((G,he,me,_e)=>{const pe=G.nodeName.toLowerCase(),ne=qa(e,C,pe)&&qa(e,he,C),le=!h&&Y(G)&&Na(G.data),Ne=mo(G),O=!qt(s)||!g.isBlock(G);return(me||_e)&&ne&&!le&&!Ne&&O})(L,M,te,A)?(N||(N=g.clone(k,!1),D.insertBefore(N,L),v.push(N)),A&&P&&(_=F),N.appendChild(L)):(N=null,W(nn(L.childNodes),R),P&&(_=F),N=null)}var G,he};W(E,R)}),!0===s.links&&W(v,E=>{const N=R=>{"A"===R.nodeName&&c(R,s),W(nn(R.childNodes),N)};N(E)}),W(v,E=>{const N=(R=>{let L=0;return W(R.childNodes,P=>{var F;Q(F=P)&&Y(F)&&0===F.length||fo(P)||L++}),L})(E);var R;!(v.length>1)&&g.isBlock(E)||0!==N?(qt(s)||Rr(s)&&s.wrapper)&&(s.exact||1!==N||(E=Tt((R=E).childNodes,Lf).filter(P=>"false"!==g.getContentEditable(P)&&Mu(g,P,s)).map(P=>{const F=g.clone(P,!1);return c(F),g.replace(F,R,!0),g.remove(P,!0),F}).getOr(R)),((R,L,P,F)=>{i_(L,A=>{var D,M,z;qt(A)&&i_(R.dom.select(A.inline,F),D=>{Hg(D)&&Uc(R,A,P,D,A.exact?D:null)}),D=R.dom,z=F,(M=A).clear_child_styles&&zg(D.select(M.links?"*:not(a)":"*",z),G=>{Hg(G)&&D.isEditable(G)&&zg(M.styles,(he,me)=>{D.setStyle(G,me,"")})})})})(e,r,n,E),((R,L,P,F,A)=>{const D=A.parentNode;Dr(R,D,P,F)&&Uc(R,L,F,A)||L.merge_with_parents&&D&&R.dom.getParent(D,M=>!!Dr(R,M,P,F)&&(Uc(R,L,F,A),!0))})(e,s,t,n,E),((R,L,P,F)=>{if(L.styles&&L.styles.backgroundColor){const A=Yy(R,"fontSize");qg(F,D=>A(D)&&R.isEditable(D),Xy(R,"backgroundColor",qs(L.styles.backgroundColor,P)))}})(g,s,n,E),((R,L,P,F)=>{const A=D=>{if(sn(D)&&ie(D.parentNode)&&R.isEditable(D)){const M=yv(R,D.parentNode);R.getStyle(D,"color")&&M?R.setStyle(D,"text-decoration",M):R.getStyle(D,"text-decoration")===M&&R.setStyle(D,"text-decoration",null)}};L.styles&&(L.styles.color||L.styles.textDecoration)&&(X.walk(F,A,"childNodes"),A(F))})(g,s,0,E),((R,L,P,F)=>{if(qt(L)&&("sub"===L.inline||"sup"===L.inline)){const A=Yy(R,"fontSize");qg(F,M=>A(M)&&R.isEditable(M),Xy(R,"fontSize",""));const D=ke(R.select("sup"===L.inline?"sub":"sup",F),R.isEditable);R.remove(D,!0)}})(g,s,0,E),Ky(e,s,0,E)):g.remove(E,!0)})},p=Ac(o)?o:l.getNode();if("false"===a.getContentEditable(p)&&!vv(e,p))return d(r,o=p),void Pv(e,t,o,n);if(s){if(o)if(Ac(o)){if(!d(r,o)){const g=a.createRng();g.setStartBefore(o),g.setEndAfter(o),f(a,Li(a,g,r),!0)}}else f(a,o,!0);else i&&qt(s)&&!Ha(e).length?((g,b,h)=>{let v;const _=g.selection,C=g.formatter.get(b);if(!C)return;const k=_.getRng();let E=k.startOffset;const N=k.startContainer.nodeValue;v=Bi(g.getBody(),_.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(N&&E>0&&E<N.length&&R.test(N.charAt(E))&&R.test(N.charAt(E-1))){const F=_.getBookmark();k.collapse(!0);let A=Li(g.dom,k,C);A=Nu(A),g.formatter.apply(b,h,A),_.moveToBookmark(F)}else{let F=v?Dy(v):null;v&&F?.data===jc||(L=g.getDoc(),P=jg(!0).dom,v=L.importNode(P,!0),F=v.firstChild,k.insertNode(v),E=1),g.formatter.apply(b,h,v),_.setCursorLocation(F,E)}var L,P})(e,t,n):(l.setRng(Rg(l.getRng())),pv(e,()=>{Bf(e,(g,b)=>{const h=b?g:Li(a,g,r);f(a,h,!1)})},Ct),e.nodeChanged()),$y(e.formatter,t).each(g=>{var b;W(ke((h=>{const v=h.getSelectedBlocks(),_=h.getRng();if(h.isCollapsed())return[];if(1===v.length)return Uy(_,v[0])&&zy(_,v[0])?v:[];{const C=Ut(v).filter(N=>Uy(_,N)).toArray(),k=Hn(v).filter(N=>zy(_,N)).toArray(),E=v.slice(1,-1);return C.concat(E).concat(k)}})(b=e.selection),Hy(b.dom)),b=>a_(a,b,g,n))});b=e,Oe($c,g=t)&&W($c[g],h=>{h(b)})}var g,b;Pv(e,t,o,n)},l_=(e,t,n,o)=>{(o||e.selection.isEditable())&&sA(e,t,n,o)},c_=e=>Oe(e,"vars"),d_=e=>e.selection.getStart(),u_=(e,t,n,o,r)=>pd(t,s=>{const i=e.formatter.matchNode(s,n,r??{},o);return!Bt(i)},s=>!!Oy(e,s,n)||!o&&Q(e.formatter.matchNode(s,n,r,!0))),m_=(e,t)=>{const n=t??d_(e);return ke(_u(e.dom,n),o=>ie(o)&&!ts(o))},f_=(e,t,n)=>{const o=m_(e,t);tt(n,(r,s)=>{const i=a=>{const l=u_(e,o,s,a.similar,c_(a)?a.vars:void 0),c=l.isSome();if(a.state.get()!==c){a.state.set(c);const d=l.getOr(t);c_(a)?a.callback(c,{node:d,format:s,parents:o}):W(a.callbacks,u=>u(c,{node:d,format:s,parents:o}))}};W([r.withSimilar,r.withoutSimilar],i),W(r.withVars,i)})},g_=X.explode,h_=()=>{const e={};return{addFilter:(t,n)=>{W(g_(t),o=>{Oe(e,o)||(e[o]={name:o,callbacks:[]}),e[o].callbacks.push(n)})},getFilters:()=>oa(e),removeFilter:(t,n)=>{W(g_(t),o=>{if(Oe(e,o))if(Q(n)){const r=e[o],s=ke(r.callbacks,i=>i!==n);s.length>0?r.callbacks=s:delete e[o]}else delete e[o]})}}},p_=(e,t,n)=>{t.addNodeFilter("br",(o,r,s)=>{const i=X.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),l=n.getWhitespaceElements();i.body=1;const c=d=>d.name in i||it(n,d);for(let d=0,u=o.length;d<u;d++){let f=o[d],p=f.parent;if(p&&c(p)&&f===p.lastChild){let g=f.prev;for(;g;){const b=g.name;if("span"!==b||"bookmark"!==g.attr("data-mce-type")){"br"===b&&(f=null);break}g=g.prev}if(f&&(f.remove(),Fc(n,a,l,p))){const b=n.getElementRule(p.name);b&&(b.removeEmpty?p.remove():b.paddEmpty&&Ng(e,s,c,p))}}else{let g=f;for(;p&&p.firstChild===g&&p.lastChild===g&&(g=p,!i[p.name]);)p=p.parent;if(g===p){const b=new yn("#text",3);b.value=Pt,f.replace(b)}}}})},Kg=e=>{const[t,...n]=e.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(r){const s=";base64"===r[2],i=s?(a=>{const l=/([a-z0-9+\/=\s]+)/i.exec(a);return l?l[1]:""})(o):decodeURIComponent(o);return w.some({type:r[1],data:i,base64Encoded:s})}return w.none()},b_=(e,t,n=!0)=>{let o=t;if(n)try{o=atob(t)}catch{return w.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return w.some(new Blob([r],{type:e}))},v_=e=>new Promise((t,n)=>{const o=new FileReader;o.onloadend=()=>{t(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(e)});let aA=0;const y_=(e,t,n)=>Kg(e).bind(({data:o,type:r,base64Encoded:s})=>{if(t&&!s)return w.none();{const i=s?o:btoa(o);return n(i,r)}}),__=(e,t,n)=>{const o=e.create("blobid"+aA++,t,n);return e.add(o),o},C_=(e,t,n=!1)=>y_(t,n,(o,r)=>w.from(e.getByData(o,r)).orThunk(()=>b_(r,o).map(s=>__(e,s,o)))),Yg=(e,t)=>Qe(e,`${t}/`),{entries:w_,setPrototypeOf:E_,isFrozen:cA,getPrototypeOf:dA,getOwnPropertyDescriptor:uA}=Object;let{freeze:$n,seal:rr,create:mA}=Object,{apply:Xg,construct:Gg}=typeof Reflect<"u"&&Reflect;Xg||(Xg=function(e,t,n){return e.apply(t,n)}),$n||($n=function(e){return e}),rr||(rr=function(e){return e}),Gg||(Gg=function(e,t){return new e(...t)});const fA=zo(Array.prototype.forEach),gA=zo(Array.prototype.pop),zc=zo(Array.prototype.push),ju=zo(String.prototype.toLowerCase),Qg=zo(String.prototype.toString),hA=zo(String.prototype.match),sr=zo(String.prototype.replace),pA=zo(String.prototype.indexOf),bA=zo(String.prototype.trim),bo=zo(RegExp.prototype.test),Hc=(x_=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gg(x_,t)});var x_;function zo(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Xg(e,t,o)}}function Ye(e,t,n){var o;n=null!==(o=n)&&void 0!==o?o:ju,E_&&E_(e,null);let r=t.length;for(;r--;){let s=t[r];if("string"==typeof s){const i=n(s);i!==s&&(cA(t)||(t[r]=i),s=i)}e[s]=!0}return e}function Ya(e){const t=mA(null);for(const[n,o]of w_(e))t[n]=o;return t}function $u(e,t){for(;null!==e;){const n=uA(e,t);if(n){if(n.get)return zo(n.get);if("function"==typeof n.value)return zo(n.value)}e=dA(e)}return function(n){return console.warn("fallback value for",n),null}}const k_=$n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Jg=$n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Zg=$n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),vA=$n(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),eh=$n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yA=$n(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),S_=$n(["#text"]),N_=$n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),th=$n(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),A_=$n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Uu=$n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_A=rr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),CA=rr(/<%[\w\W]*|[\w\W]*%>/gm),wA=rr(/\${[\w\W]*}/gm),EA=rr(/^data-[\-\w.\u00B7-\uFFFF]/),xA=rr(/^aria-[\-\w]+$/),T_=rr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kA=rr(/^(?:\w+script|data):/i),SA=rr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),O_=rr(/^html$/i);var R_=Object.freeze({__proto__:null,MUSTACHE_EXPR:_A,ERB_EXPR:CA,TMPLIT_EXPR:wA,DATA_ATTR:EA,ARIA_ATTR:xA,IS_ALLOWED_URI:T_,IS_SCRIPT_OR_DATA:kA,ATTR_WHITESPACE:SA,DOCTYPE_NAME:O_}),D_=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:typeof window>"u"?null:window;const n=j=>e(j);if(n.version="3.0.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const o=t.document,r=o.currentScript;let{document:s}=t;const{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,b=c.prototype,h=$u(b,"cloneNode"),v=$u(b,"nextSibling"),_=$u(b,"childNodes"),C=$u(b,"parentNode");if("function"==typeof a){const j=s.createElement("template");j.content&&j.content.ownerDocument&&(s=j.content.ownerDocument)}let k,E="";const{implementation:N,createNodeIterator:R,createDocumentFragment:L,getElementsByTagName:P}=s,{importNode:F}=o;let A={};n.isSupported="function"==typeof w_&&"function"==typeof C&&N&&void 0!==N.createHTMLDocument;const{MUSTACHE_EXPR:D,ERB_EXPR:M,TMPLIT_EXPR:z,DATA_ATTR:te,ARIA_ATTR:G,IS_SCRIPT_OR_DATA:he,ATTR_WHITESPACE:me}=R_;let{IS_ALLOWED_URI:_e}=R_,pe=null;const ne=Ye({},[...k_,...Jg,...Zg,...eh,...S_]);let le=null;const Ne=Ye({},[...N_,...th,...A_,...Uu]);let O=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),B=null,H=null,q=!0,K=!0,ce=!1,ve=!0,Ae=!1,Ce=!1,et=!1,de=!1,De=!1,Le=!1,Te=!1,Ie=!0,Wt=!1,be=!0,Be=!1,bt={},Ft=null;const en=Ye({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Cn=null;const Co=Ye({},["audio","video","img","source","image","track"]);let an=null;const wo=Ye({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jt="http://www.w3.org/1998/Math/MathML",ds="http://www.w3.org/2000/svg",Eo="http://www.w3.org/1999/xhtml";let qo=Eo,Xi=!1,ud=null;const Gi=Ye({},[jt,ds,Eo],Qg);let xo;const Lm=["application/xhtml+xml","text/html"];let vt,ar=null;const Qi=s.createElement("form"),md=function(j){return j instanceof RegExp||j instanceof Function},Dp=function(j){if(!ar||ar!==j){if(j&&"object"==typeof j||(j={}),j=Ya(j),xo=xo=-1===Lm.indexOf(j.PARSER_MEDIA_TYPE)?"text/html":j.PARSER_MEDIA_TYPE,vt="application/xhtml+xml"===xo?Qg:ju,pe="ALLOWED_TAGS"in j?Ye({},j.ALLOWED_TAGS,vt):ne,le="ALLOWED_ATTR"in j?Ye({},j.ALLOWED_ATTR,vt):Ne,ud="ALLOWED_NAMESPACES"in j?Ye({},j.ALLOWED_NAMESPACES,Qg):Gi,an="ADD_URI_SAFE_ATTR"in j?Ye(Ya(wo),j.ADD_URI_SAFE_ATTR,vt):wo,Cn="ADD_DATA_URI_TAGS"in j?Ye(Ya(Co),j.ADD_DATA_URI_TAGS,vt):Co,Ft="FORBID_CONTENTS"in j?Ye({},j.FORBID_CONTENTS,vt):en,B="FORBID_TAGS"in j?Ye({},j.FORBID_TAGS,vt):{},H="FORBID_ATTR"in j?Ye({},j.FORBID_ATTR,vt):{},bt="USE_PROFILES"in j&&j.USE_PROFILES,q=!1!==j.ALLOW_ARIA_ATTR,K=!1!==j.ALLOW_DATA_ATTR,ce=j.ALLOW_UNKNOWN_PROTOCOLS||!1,ve=!1!==j.ALLOW_SELF_CLOSE_IN_ATTR,Ae=j.SAFE_FOR_TEMPLATES||!1,Ce=j.WHOLE_DOCUMENT||!1,De=j.RETURN_DOM||!1,Le=j.RETURN_DOM_FRAGMENT||!1,Te=j.RETURN_TRUSTED_TYPE||!1,de=j.FORCE_BODY||!1,Ie=!1!==j.SANITIZE_DOM,Wt=j.SANITIZE_NAMED_PROPS||!1,be=!1!==j.KEEP_CONTENT,Be=j.IN_PLACE||!1,_e=j.ALLOWED_URI_REGEXP||T_,qo=j.NAMESPACE||Eo,O=j.CUSTOM_ELEMENT_HANDLING||{},j.CUSTOM_ELEMENT_HANDLING&&md(j.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(O.tagNameCheck=j.CUSTOM_ELEMENT_HANDLING.tagNameCheck),j.CUSTOM_ELEMENT_HANDLING&&md(j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(O.attributeNameCheck=j.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),j.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(O.allowCustomizedBuiltInElements=j.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(K=!1),Le&&(De=!0),bt&&(pe=Ye({},[...S_]),le=[],!0===bt.html&&(Ye(pe,k_),Ye(le,N_)),!0===bt.svg&&(Ye(pe,Jg),Ye(le,th),Ye(le,Uu)),!0===bt.svgFilters&&(Ye(pe,Zg),Ye(le,th),Ye(le,Uu)),!0===bt.mathMl&&(Ye(pe,eh),Ye(le,A_),Ye(le,Uu))),j.ADD_TAGS&&(pe===ne&&(pe=Ya(pe)),Ye(pe,j.ADD_TAGS,vt)),j.ADD_ATTR&&(le===Ne&&(le=Ya(le)),Ye(le,j.ADD_ATTR,vt)),j.ADD_URI_SAFE_ATTR&&Ye(an,j.ADD_URI_SAFE_ATTR,vt),j.FORBID_CONTENTS&&(Ft===en&&(Ft=Ya(Ft)),Ye(Ft,j.FORBID_CONTENTS,vt)),be&&(pe["#text"]=!0),Ce&&Ye(pe,["html","head","body"]),pe.table&&(Ye(pe,["tbody"]),delete B.tbody),j.TRUSTED_TYPES_POLICY){if("function"!=typeof j.TRUSTED_TYPES_POLICY.createHTML)throw Hc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof j.TRUSTED_TYPES_POLICY.createScriptURL)throw Hc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=j.TRUSTED_TYPES_POLICY,E=k.createHTML("")}else void 0===k&&(k=function(fe,xe){if("object"!=typeof fe||"function"!=typeof fe.createPolicy)return null;let Ge=null;const ht="data-tt-policy-suffix";xe&&xe.hasAttribute(ht)&&(Ge=xe.getAttribute(ht));const _t="dompurify"+(Ge?"#"+Ge:"");try{return fe.createPolicy(_t,{createHTML:yt=>yt,createScriptURL:yt=>yt})}catch{return console.warn("TrustedTypes policy "+_t+" could not be created."),null}}(g,r)),null!==k&&"string"==typeof E&&(E=k.createHTML(""));$n&&$n(j),ar=j}},Ux=Ye({},["mi","mo","mn","ms","mtext"]),zx=Ye({},["foreignobject","desc","title","annotation-xml"]),uD=Ye({},["title","style","font","a","script"]),Pm=Ye({},Jg);Ye(Pm,Zg),Ye(Pm,vA);const Bp=Ye({},eh);Ye(Bp,yA);const Ji=function(j){zc(n.removed,{element:j});try{j.parentNode.removeChild(j)}catch{j.remove()}},fd=function(j,fe){try{zc(n.removed,{attribute:fe.getAttributeNode(j),from:fe})}catch{zc(n.removed,{attribute:null,from:fe})}if(fe.removeAttribute(j),"is"===j&&!le[j])if(De||Le)try{Ji(fe)}catch{}else try{fe.setAttribute(j,"")}catch{}},Hx=function(j){let fe,xe;if(de)j="<remove></remove>"+j;else{const _t=hA(j,/^[\r\n\t ]+/);xe=_t&&_t[0]}"application/xhtml+xml"===xo&&qo===Eo&&(j='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+j+"</body></html>");const Ge=k?k.createHTML(j):j;if(qo===Eo)try{fe=(new p).parseFromString(Ge,xo)}catch{}if(!fe||!fe.documentElement){fe=N.createDocument(qo,"template",null);try{fe.documentElement.innerHTML=Xi?E:Ge}catch{}}const ht=fe.body||fe.documentElement;return j&&xe&&ht.insertBefore(s.createTextNode(xe),ht.childNodes[0]||null),qo===Eo?P.call(fe,Ce?"html":"body")[0]:Ce?fe.documentElement:ht},qx=function(j){return R.call(j.ownerDocument||j,j,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},Mm=function(j){return"object"==typeof l?j instanceof l:j&&"object"==typeof j&&"number"==typeof j.nodeType&&"string"==typeof j.nodeName},us=function(j,fe,xe){A[j]&&fA(A[j],Ge=>{Ge.call(n,fe,xe,ar)})},Wx=function(j){let fe;if(us("beforeSanitizeElements",j,null),(xe=j)instanceof f&&("string"!=typeof xe.nodeName||"string"!=typeof xe.textContent||"function"!=typeof xe.removeChild||!(xe.attributes instanceof u)||"function"!=typeof xe.removeAttribute||"function"!=typeof xe.setAttribute||"string"!=typeof xe.namespaceURI||"function"!=typeof xe.insertBefore||"function"!=typeof xe.hasChildNodes))return Ji(j),!0;var xe;const Ge=vt(j.nodeName);if(us("uponSanitizeElement",j,{tagName:Ge,allowedTags:pe}),j.hasChildNodes()&&!Mm(j.firstElementChild)&&(!Mm(j.content)||!Mm(j.content.firstElementChild))&&bo(/<[/\w]/g,j.innerHTML)&&bo(/<[/\w]/g,j.textContent))return Ji(j),!0;if(!pe[Ge]||B[Ge]){if(!B[Ge]&&Kx(Ge)&&(O.tagNameCheck instanceof RegExp&&bo(O.tagNameCheck,Ge)||O.tagNameCheck instanceof Function&&O.tagNameCheck(Ge)))return!1;if(be&&!Ft[Ge]){const ht=C(j)||j.parentNode,_t=_(j)||j.childNodes;if(_t&&ht)for(let yt=_t.length-1;yt>=0;--yt)ht.insertBefore(h(_t[yt],!0),v(j))}return Ji(j),!0}return j instanceof c&&!function(ht){let _t=C(ht);_t&&_t.tagName||(_t={namespaceURI:qo,tagName:"template"});const yt=ju(ht.tagName),xt=ju(_t.tagName);return!!ud[ht.namespaceURI]&&(ht.namespaceURI===ds?_t.namespaceURI===Eo?"svg"===yt:_t.namespaceURI===jt?"svg"===yt&&("annotation-xml"===xt||Ux[xt]):!!Pm[yt]:ht.namespaceURI===jt?_t.namespaceURI===Eo?"math"===yt:_t.namespaceURI===ds?"math"===yt&&zx[xt]:!!Bp[yt]:ht.namespaceURI===Eo?!(_t.namespaceURI===ds&&!zx[xt])&&!(_t.namespaceURI===jt&&!Ux[xt])&&!Bp[yt]&&(uD[yt]||!Pm[yt]):!("application/xhtml+xml"!==xo||!ud[ht.namespaceURI]))}(j)?(Ji(j),!0):"noscript"!==Ge&&"noembed"!==Ge&&"noframes"!==Ge||!bo(/<\/no(script|embed|frames)/i,j.innerHTML)?(Ae&&3===j.nodeType&&(fe=j.textContent,fe=sr(fe,D," "),fe=sr(fe,M," "),fe=sr(fe,z," "),j.textContent!==fe&&(zc(n.removed,{element:j.cloneNode()}),j.textContent=fe)),us("afterSanitizeElements",j,null),!1):(Ji(j),!0)},Vx=function(j,fe,xe){if(Ie&&("id"===fe||"name"===fe)&&(xe in s||xe in Qi))return!1;if((!K||H[fe]||!bo(te,fe))&&(!q||!bo(G,fe)))if(!le[fe]||H[fe]){if(!(Kx(j)&&(O.tagNameCheck instanceof RegExp&&bo(O.tagNameCheck,j)||O.tagNameCheck instanceof Function&&O.tagNameCheck(j))&&(O.attributeNameCheck instanceof RegExp&&bo(O.attributeNameCheck,fe)||O.attributeNameCheck instanceof Function&&O.attributeNameCheck(fe))||"is"===fe&&O.allowCustomizedBuiltInElements&&(O.tagNameCheck instanceof RegExp&&bo(O.tagNameCheck,xe)||O.tagNameCheck instanceof Function&&O.tagNameCheck(xe))))return!1}else if(!an[fe]&&!bo(_e,sr(xe,me,""))&&("src"!==fe&&"xlink:href"!==fe&&"href"!==fe||"script"===j||0!==pA(xe,"data:")||!Cn[j])&&(!ce||bo(he,sr(xe,me,"")))&&xe)return!1;return!0},Kx=function(j){return j.indexOf("-")>0},Yx=function(j){let fe,xe,Ge,ht;us("beforeSanitizeAttributes",j,null);const{attributes:_t}=j;if(!_t)return;const yt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le};for(ht=_t.length;ht--;){fe=_t[ht];const{name:xt,namespaceURI:cl}=fe;xe="value"===xt?fe.value:bA(fe.value);const fD=xe;if(Ge=vt(xt),yt.attrName=Ge,yt.attrValue=xe,yt.keepAttr=!0,yt.forceKeepAttr=void 0,us("uponSanitizeAttribute",j,yt),xe=yt.attrValue,yt.forceKeepAttr)continue;if(!yt.keepAttr){fd(xt,j);continue}if(!ve&&bo(/\/>/i,xe)){fd(xt,j);continue}Ae&&(xe=sr(xe,D," "),xe=sr(xe,M," "),xe=sr(xe,z," "));const Xx=vt(j.nodeName);if(Vx(Xx,Ge,xe)){if(!Wt||"id"!==Ge&&"name"!==Ge||(fd(xt,j),xe="user-content-"+xe),k&&"object"==typeof g&&"function"==typeof g.getAttributeType&&!cl)switch(g.getAttributeType(Xx,Ge)){case"TrustedHTML":xe=k.createHTML(xe);break;case"TrustedScriptURL":xe=k.createScriptURL(xe)}if(xe!==fD)try{cl?j.setAttributeNS(cl,xt,xe):j.setAttribute(xt,xe)}catch{fd(xt,j)}}else fd(xt,j)}us("afterSanitizeAttributes",j,null)},mD=function j(fe){let xe;const Ge=qx(fe);for(us("beforeSanitizeShadowDOM",fe,null);xe=Ge.nextNode();)us("uponSanitizeShadowNode",xe,null),Wx(xe)||(xe.content instanceof i&&j(xe.content),Yx(xe));us("afterSanitizeShadowDOM",fe,null)};return n.sanitize=function(j){let fe,xe,Ge,ht,_t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Xi=!j,Xi&&(j="\x3c!--\x3e"),"string"!=typeof j&&!Mm(j)){if("function"!=typeof j.toString)throw Hc("toString is not a function");if("string"!=typeof(j=j.toString()))throw Hc("dirty is not a string, aborting")}if(!n.isSupported)return j;if(et||Dp(_t),n.removed=[],"string"==typeof j&&(Be=!1),Be){if(j.nodeName){const cl=vt(j.nodeName);if(!pe[cl]||B[cl])throw Hc("root node is forbidden and cannot be sanitized in-place")}}else if(j instanceof l)fe=Hx("\x3c!----\x3e"),xe=fe.ownerDocument.importNode(j,!0),1===xe.nodeType&&"BODY"===xe.nodeName||"HTML"===xe.nodeName?fe=xe:fe.appendChild(xe);else{if(!De&&!Ae&&!Ce&&-1===j.indexOf("<"))return k&&Te?k.createHTML(j):j;if(fe=Hx(j),!fe)return De?null:Te?E:""}fe&&de&&Ji(fe.firstChild);const yt=qx(Be?j:fe);for(;Ge=yt.nextNode();)Wx(Ge)||(Ge.content instanceof i&&mD(Ge.content),Yx(Ge));if(Be)return j;if(De){if(Le)for(ht=L.call(fe.ownerDocument);fe.firstChild;)ht.appendChild(fe.firstChild);else ht=fe;return(le.shadowroot||le.shadowrootmode)&&(ht=F.call(o,ht,!0)),ht}let xt=Ce?fe.outerHTML:fe.innerHTML;return Ce&&pe["!doctype"]&&fe.ownerDocument&&fe.ownerDocument.doctype&&fe.ownerDocument.doctype.name&&bo(O_,fe.ownerDocument.doctype.name)&&(xt="<!DOCTYPE "+fe.ownerDocument.doctype.name+">\n"+xt),Ae&&(xt=sr(xt,D," "),xt=sr(xt,M," "),xt=sr(xt,z," ")),k&&Te?k.createHTML(xt):xt},n.setConfig=function(j){Dp(j),et=!0},n.clearConfig=function(){ar=null,et=!1},n.isValidAttribute=function(j,fe,xe){ar||Dp({});const Ge=vt(j),ht=vt(fe);return Vx(Ge,ht,xe)},n.addHook=function(j,fe){"function"==typeof fe&&(A[j]=A[j]||[],zc(A[j],fe))},n.removeHook=function(j){if(A[j])return gA(A[j])},n.removeHooks=function(j){A[j]&&(A[j]=[])},n.removeAllHooks=function(){A={}},n}();const B_=X.each,AA=X.trim,TA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],OA={ftp:21,http:80,https:443,mailto:25},RA=["img","video"],L_=(e,t,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(Q(r=e.allow_svg_data_urls)?!r:!Q(s)||!ae(RA,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class Ho{static parseDataUri(t){let n;const o=decodeURIComponent(t).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(t,n,o={}){if(o.allow_script_urls)return!0;{const r=Sr.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!L_(o,r,n)}}static getDocumentBaseUrl(t){var n;let o;return o=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(n=t.href)&&void 0!==n?n:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}constructor(t,n={}){this.path="",this.directory="",t=AA(t),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(r.source=t);const s=0===t.indexOf("//");if(0!==t.indexOf("/")||s||(t=(o&&o.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const a=o?o.path:new Ho(document.location.href).directory;if(""===o?.protocol)t="//mce_host"+r.toAbsPath(a,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(a,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&B_(TA,(a,l)=>{let c=i[l];c&&(c=c.replace(/\(mce_at\)/g,"@@")),r[a]=c}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const n=new Ho(t,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(t,n){const o=new Ho(t,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?OA[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let o,r,s=0,i="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(a.length>=l.length)for(o=0,r=a.length;o<r;o++)if(o>=l.length||a[o]!==l[o]){s=o+1;break}if(a.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=a.length||a[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=a.length-(s-1);o<r;o++)i+="../";for(o=s-1,r=l.length;o<r;o++)i+=o!==s-1?"/"+l[o]:l[o];return i}toAbsPath(t,n){let o=0;const r=/\/$/.test(n)?"/":"",s=t.split("/"),i=n.split("/"),a=[];B_(s,u=>{u&&a.push(u)});const l=[];for(let u=i.length-1;u>=0;u--)0!==i[u].length&&"."!==i[u]&&(".."!==i[u]?o>0?o--:l.push(i[u]):o++);const c=a.length-o;let d;return d=c<=0?ti(l).join("/"):a.slice(0,c).join("/")+"/"+ti(l).join("/"),0!==d.indexOf("/")&&(d="/"+d),r&&d.lastIndexOf("/")!==d.length-1&&(d+=r),d}getURI(t=!1){let n;return this.source&&!t||(n="",t||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const DA=X.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),nh="data-mce-type";let P_=0;const M_=(e,t,n,o,r)=>{var s,i,a,l;const c=t.validate,d=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(s=e.nodeValue)&&void 0!==s?s:"")&&(e.nodeValue=" "+e.nodeValue);const u=null!==(i=r?.tagName)&&void 0!==i?i:e.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))return void(Q(r)&&(r.allowedTags[u]=!0));if(1!==e.nodeType||"body"===u)return;const f=T(e),p=Bo(f,nh),g=pn(f,"data-mce-bogus");if(!p&&ge(g))return void("all"===g?ot(f):Fo(f));const b=n.getElementRule(u);if(!c||b){if(Q(r)&&(r.allowedTags[u]=!0),c&&b&&!p){if(W(null!==(a=b.attributesForced)&&void 0!==a?a:[],h=>{wt(f,h.name,"{$uid}"===h.value?"mce_"+P_++:h.value)}),W(null!==(l=b.attributesDefault)&&void 0!==l?l:[],h=>{Bo(f,h.name)||wt(f,h.name,"{$uid}"===h.value?"mce_"+P_++:h.value)}),b.attributesRequired&&!dt(b.attributesRequired,h=>Bo(f,h))||b.removeEmptyAttrs&&(h=>{const v=h.dom.attributes;return null==v||0===v.length})(f))return void Fo(f);b.outputName&&b.outputName!==u&&((h,v)=>{const _=((k,E)=>{const N=Lt(E),R=Dl(k);return so(N,R),N})(h,v);Yo(h,_);const C=Nt(h);Jr(_,C),ot(h)})(f,b.outputName)}}else Oe(d,u)?ot(f):Fo(f)},I_=(e,t,n,o,r,s)=>"html"!==n&&!V(o)||!(r in DA&&L_(e,s,o))&&(!e.validate||t.isValid(o,r)||Qe(r,"data-")||Qe(r,"aria-")),F_=(e,t)=>e.hasAttribute(nh)&&("id"===t||"class"===t||"style"===t),j_=(e,t)=>e in t.getBoolAttrs(),BA=(e,t,n,o)=>{const{attributes:r}=e;for(let s=r.length-1;s>=0;s--){const i=r[s],a=i.name,l=i.value;I_(t,n,o,e.tagName.toLowerCase(),a,l)||F_(e,a)?j_(a,n)&&e.setAttribute(a,a):e.removeAttribute(a)}},PA=e=>{const n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`)};return D_().sanitize(e,n),e.innerHTML},$_=X.makeMap,U_=X.extend,z_=(e,t,n,o)=>{const r=e.name,s=r in n&&"title"!==r&&"textarea"!==r,i=t.childNodes;for(let a=0,l=i.length;a<l;a++){const c=i[a],d=new yn(c.nodeName.toLowerCase(),c.nodeType);if(ie(c)){const u=c.attributes;for(let f=0,p=u.length;f<p;f++){const g=u[f];d.attr(g.name,g.value)}V(d.name)&&(o(c),d.value=c.innerHTML)}else Y(c)?(d.value=c.data,s&&(d.raw=!0)):(Qo(c)||Gl(c)||xa(c))&&(d.value=c.data);V(d.name)||z_(d,c,n,o),e.append(d)}},Xa=(e={},t=co())=>{const n=h_(),o=h_(),r={validate:!0,root_name:"body",sanitize:!0,...e},s=new DOMParser,i=((b,h)=>{const v=(()=>{let _=[];const C=()=>_[_.length-1];return{track:k=>{J(k)&&_.push(k);let E=C();return E&&!E.contains(k)&&(_.pop(),E=C()),ue(E)},current:()=>ue(C()),reset:()=>{_=[]}}})();if(b.sanitize){const _=((e,t,n)=>{const o=D_();return o.addHook("uponSanitizeElement",(r,s)=>{M_(r,e,t,n.track(r),s)}),o.addHook("uponSanitizeAttribute",(r,s)=>{((i,a,l,c,d)=>{const u=i.tagName.toLowerCase(),{attrName:f,attrValue:p}=d;d.keepAttr=I_(a,l,c,u,f,p),d.keepAttr?(d.allowedAttributes[f]=!0,j_(f,l)&&(d.attrValue=f),a.allow_svg_data_urls&&Qe(p,"data:image/svg+xml")&&(d.forceKeepAttr=!0)):F_(i,f)&&(d.forceKeepAttr=!0)})(r,e,t,n.current(),s)}),o})(b,h,v);return{sanitizeHtmlElement:(k,E)=>{_.sanitize(k,((N,R)=>{const L={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return L.PARSER_MEDIA_TYPE=R,N.allow_script_urls?L.ALLOWED_URI_REGEXP=/.*/:N.allow_html_data_urls&&(L.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),L})(b,E)),_.removed=[],v.reset()},sanitizeNamespaceElement:PA}}return{sanitizeHtmlElement:(_,C)=>{const k=document.createNodeIterator(_,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let E;for(;E=k.nextNode();){const N=v.track(E);M_(E,b,h,N),ie(E)&&BA(E,b,h,N)}v.reset()},sanitizeNamespaceElement:Re}})(r,t),l=n.getFilters,u=o.getFilters,p=(b,h)=>{const v=ge(h.attr(nh)),_=1===h.type&&!Oe(b,h.name)&&!it(t,h)&&!V(h.name);return 3===h.type||_&&!v},g={schema:t,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(b,h={})=>{var v;const _=r.validate,C=null!==(v=h.context)&&void 0!==v?v:r.root_name,k=((M,z,te="html")=>{const G="xhtml"===te?"application/xhtml+xml":"text/html",he=Oe(t.getSpecialElements(),z.toLowerCase()),me=he?`<${z}>${M}</${z}>`:M,pe=s.parseFromString("xhtml"===te?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${me}</body></html>`:`<body>${me}</body>`,G).body;return i.sanitizeHtmlElement(pe,G),he?pe.firstChild:pe})(b,C,h.format);$e(t,k);const E=new yn(C,11);z_(E,k,t.getSpecialElements(),i.sanitizeNamespaceElement),k.innerHTML="";const[N,R]=((M,z,te,G)=>{const he=te.validate,me=z.getNonEmptyElements(),_e=z.getWhitespaceElements(),pe=U_($_("script,style,head,html,body,title,meta,param"),z.getBlockElements()),ne=eu(z),le=/[ \t\r\n]+/g,Ne=/^[ \t\r\n]+/,O=/[ \t\r\n]+$/,B=K=>{let ce=K.parent;for(;Q(ce);){if(ce.name in _e)return!0;ce=ce.parent}return!1},H=K=>K.name in pe||it(z,K)||V(K.name)&&K.parent===M,q=(K,ce)=>!Q(ce?K.prev:K.next)&&!kt(K.parent)&&H(K.parent)&&(K.parent!==M||!0===G.isRootContent);return[K=>{var ce,Ae,Ce;if(3===K.type&&!B(K)){let ve=null!==(ce=K.value)&&void 0!==ce?ce:"";ve=ve.replace(le," "),Ce=H,(Q(Ae=K.prev)&&(Ce(Ae)||"br"===Ae.name)||q(K,!0))&&(ve=ve.replace(Ne,"")),0===ve.length?K.remove():K.value=ve}},K=>{var ce,Ce,et;if(1===K.type){const ve=z.getElementRule(K.name);if(he&&ve){const Ae=Fc(z,me,_e,K);ve.paddInEmptyBlock&&Ae&&(Ce=>{let et=Ce;for(;Q(et);){if(et.name in ne)return Fc(z,me,_e,et);et=et.parent}return!1})(K)?Ng(te,G,H,K):ve.removeEmpty&&Ae?H(K)?K.remove():K.unwrap():ve.paddEmpty&&(Ae||Ny(Ce=K,"#text")&&(null===(et=Ce?.firstChild)||void 0===et?void 0:et.value)===Pt)&&Ng(te,G,H,K)}}else if(3===K.type&&!B(K)){let ve=null!==(ce=K.value)&&void 0!==ce?ce:"";(K.next&&H(K.next)||q(K,!1))&&(ve=ve.replace(O,"")),0===ve.length?K.remove():K.value=ve}}]})(E,t,r,h),L=[],F={nodes:{},attributes:{}},A=M=>xy(l(),u(),M,F);if(((M,z,te)=>{const G=[];for(let he=M,me=he;he;me=he,he=he.walk()){const _e=he;W(z,pe=>pe(_e)),kt(_e.parent)&&_e!==M?he=me:G.push(_e)}for(let he=G.length-1;he>=0;he--){const me=G[he];W(te,_e=>_e(me))}})(E,[N,A],[R,_?M=>{return te=L,void(Og(t,z=M)&&te.push(z));var z,te}:Re]),L.reverse(),_&&L.length>0)if(h.context){const{pass:M,fail:z}=No(L,te=>te.parent===E);Tg(z,t,E,A),h.invalid=M.length>0}else Tg(L,t,E,A);const D=((M,z)=>{var te;const G=null!==(te=z.forced_root_block)&&void 0!==te?te:M.forced_root_block;return!1===G?"":!0===G?"p":G})(r,h);return D&&("body"===E.name||h.isRootContent)&&((M,z)=>{const te=U_($_("script,style,head,html,body,title,meta,param"),t.getBlockElements()),G=/^[ \t\r\n]+/,he=/[ \t\r\n]+$/;let me=M.firstChild,_e=null;const pe=ne=>{var le,Ne;ne&&(me=ne.firstChild,me&&3===me.type&&(me.value=null===(le=me.value)||void 0===le?void 0:le.replace(G,"")),me=ne.lastChild,me&&3===me.type&&(me.value=null===(Ne=me.value)||void 0===Ne?void 0:Ne.replace(he,"")))};if(t.isValidChild(M.name,z.toLowerCase())){for(;me;){const ne=me.next;p(te,me)?(_e||(_e=new yn(z,1),_e.attr(r.forced_root_block_attrs),M.insert(_e,me)),_e.append(me)):(pe(_e),_e=null),me=ne}pe(_e)}})(E,D),h.invalid||ky(F,h),E}};return((e,t)=>{const n=e.schema;t.remove_trailing_brs&&p_(t,e,n),e.addAttributeFilter("href",r=>{let s=r.length;const i=a=>{const l=a?X.trim(a):"";return/\b(noopener)\b/g.test(l)?l:l.split(" ").filter(d=>d.length>0).concat(["noopener"]).sort().join(" ")};if(!t.allow_unsafe_link_target)for(;s--;){const a=r[s];"a"===a.name&&"_blank"===a.attr("target")&&a.attr("rel",i(a.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",r=>{let s,i,a,l,c=r.length;for(;c--;)if(l=r[c],"a"===l.name&&l.firstChild&&!l.attr("href"))for(a=l.parent,s=l.lastChild;s&&a;)i=s.prev,a.insert(s,l),s=i}),t.fix_list_elements&&e.addNodeFilter("ul,ol",r=>{let s,i,a=r.length;for(;a--;)if(s=r[a],i=s.parent,i&&("ul"===i.name||"ol"===i.name))if(s.prev&&"li"===s.prev.name)s.prev.append(s);else{const l=new yn("li",1);l.attr("style","list-style-type: none"),s.wrap(l)}});const o=n.getValidClasses();t.validate&&o&&e.addAttributeFilter("class",r=>{var s;let i=r.length;for(;i--;){const a=r[i],l=null!==(s=a.attr("class"))&&void 0!==s?s:"",c=X.explode(l," ");let d="";for(let u=0;u<c.length;u++){const f=c[u];let p=!1,g=o["*"];g&&g[f]&&(p=!0),g=o[a.name],!p&&g&&g[f]&&(p=!0),p&&(d&&(d+=" "),d+=f)}d.length||(d=null),a.attr("class",d)}}),((r,s)=>{const{blob_cache:i}=s;if(i){const a=l=>{const c=l.attr("src");var d;(d=l).attr("src")===Pe.transparentSrc||Q(d.attr("data-mce-placeholder"))||(d=>Q(d.attr("data-mce-bogus")))(l)||kt(c)||C_(i,c,!0).each(d=>{l.attr("src",d.blobUri())})};r.addAttributeFilter("src",l=>W(l,a))}})(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",r=>W(r,s=>{s.replace(((i,a,l,c,d)=>{let u;u=Bt(i)?"iframe":Yg(i,"image")?"img":Yg(i,"video")?"video":Yg(i,"audio")?"audio":"iframe";const f=new yn(u,1);return f.attr("audio"===u?{src:a}:{src:a,width:l,height:c}),"audio"!==u&&"video"!==u||f.attr("controls",""),"iframe"===u&&d&&f.attr("sandbox",""),f})(s.attr("type"),s.attr("object"===s.name?"data":"src"),s.attr("width"),s.attr("height"),t.sandbox_iframes))})),t.sandbox_iframes&&e.addNodeFilter("iframe",r=>W(r,s=>s.attr("sandbox","")))})(g,r),(h=r).inline_styles&&((e,t,n)=>{var o;const r=xi();var s,i,a;t.convert_fonts_to_spans&&(s=e,i=r,a=X.explode(null!==(o=t.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{W(l,c=>{const d=i.parse(c.attr("style")),u=c.attr("color"),f=c.attr("face"),p=c.attr("size");var g;u&&(d.color=u),f&&(d["font-family"]=f),p&&ri(p).each(g=>{d["font-size"]=a[g-1]}),c.name="span",c.attr("style",i.serialize(d)),g=c,W(["color","face","size"],h=>{g.attr(h,null)})})})),((s,i,a)=>{s.addNodeFilter("strike",l=>{const c="html4"!==i.type;W(l,d=>{if(c)d.name="s";else{const u=a.parse(d.attr("style"));u["text-decoration"]="line-through",d.name="span",d.attr("style",a.serialize(u))}})})})(e,n,r)})(g,h,t),g;var h},H_=(e,t,n)=>{const o=Pu(s=e)?Ws({validate:!1}).serialize(s):s,r=t(o);var s;if(r.isDefaultPrevented())return r;if(Pu(e)){if(r.content!==o){const s=Xa({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:e.name});return{...r,content:s}}return{...r,content:e}}return r},q_=(e,t)=>{if(t.no_events)return An.value(t);{const n=e.dispatch("BeforeGetContent",t);return n.isDefaultPrevented()?An.error(Fv(e,{content:"",...n}).content):An.value(n)}},W_=(e,t,n)=>n.no_events?t:H_(t,r=>Fv(e,{...n,content:r}),{sanitize:vf(e),sandbox_iframes:yf(e)}).content,oh=(e,t)=>{if(t.no_events)return An.value(t);{const n=H_(t.content,o=>{return r=e,s={...t,content:o},r.dispatch("BeforeSetContent",s);var r,s},{sanitize:vf(e),sandbox_iframes:yf(e)});return n.isDefaultPrevented()?(Iv(e,n),An.error(void 0)):An.value(n)}},rh=(e,t,n)=>{n.no_events||Iv(e,{...n,content:t})},sh=(e,t,n)=>({element:e,width:t,rows:n}),V_=(e,t)=>({element:e,cells:t}),MA=(e,t)=>({x:e,y:t}),K_=(e,t)=>Do(e,t).bind(ri).getOr(1),IA=(e,t,n)=>{const o=e.rows;return!!(o[n]?o[n].cells:[])[t]},Y_=e=>$t(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),X_=(e,t)=>{const n=e.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(We(r[s],t))return w.some(MA(s,o))}return w.none()},G_=(e,t,n,o,r)=>{const s=[],i=e.rows;for(let a=n;a<=r;a++){const l=i[a].cells,c=t<o?l.slice(t,o+1):l.slice(o,t+1);s.push(V_(i[a].element,c))}return s},FA=e=>((t,n)=>{const o=Ni(t.element),r=Lt("tbody");return Jr(r,n),Et(o,r),o})(e,ze(e.rows,n=>{const o=ze(n.cells,s=>{const i=Vp(s);return Ht(i,"colspan"),Ht(i,"rowspan"),i}),r=Ni(n.element);return Jr(r,o),r})),Q_=()=>Wf([]),zu=(e,t)=>t>=0&&t<e.length&&za(e.charAt(t)),J_=e=>bn(e.innerText),Z_=e=>ie(e)?e.outerHTML:Y(e)?Sr.encodeRaw(e.data,!1):Qo(e)?"\x3c!--"+e.data+"--\x3e":"",HA=Vo(()=>document.implementation.createHTMLDocument("undo")),Hu=e=>{const t=e.serializer.getTempAttrs(),n=N0(e.getBody(),t);return null!==n.querySelector("iframe")?{type:"fragmented",fragments:ke(ze(nn(n.childNodes),So(bn,Z_)),o=>o.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:bn(n.innerHTML),bookmark:null,beforeBookmark:null}},ih=(e,t,n)=>{const o=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?((e,t)=>{((n,o)=>{let r=0;W(n,s=>{var i,a;0===s[0]?r++:1===s[0]?(((i,a,l)=>{const c=(d=>{let u;const f=document.createElement("div"),p=document.createDocumentFragment();for(d&&(f.innerHTML=d);u=f.firstChild;)p.appendChild(u);return p})(a);i.hasChildNodes()&&l<i.childNodes.length?i.insertBefore(c,i.childNodes[l]):i.appendChild(c)})(o,s[1],r),r++):2===s[0]&&(a=r,(i=o).hasChildNodes()&&a<i.childNodes.length&&i.removeChild(i.childNodes[a]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),i=new Array(r),a=(u,f,p,g,b)=>{const h=c(u,f,p,g);if(null===h||h.start===f&&h.diag===f-g||h.end===u&&h.diag===u-p){let v=u,_=p;for(;v<f||_<g;)v<f&&_<g&&n[v]===o[_]?(b.push([0,n[v]]),++v,++_):f-u>g-p?(b.push([2,n[v]]),++v):(b.push([1,o[_]]),++_)}else{a(u,h.start,p,h.start-h.diag,b);for(let v=h.start;v<h.end;++v)b.push([0,n[v]]);a(h.end,f,h.end-h.diag,g,b)}},l=(u,f,p,g)=>{let b=u;for(;b-f<g&&b<p&&n[b]===o[b-f];)++b;return{start:u,end:b,diag:f}},c=(u,f,p,g)=>{const b=f-u,h=g-p;if(0===b||0===h)return null;const v=b-h,_=h+b,C=(_%2==0?_:_+1)/2;let k,E,N,R,L;for(s[1+C]=u,i[1+C]=f+1,k=0;k<=C;++k){for(E=-k;E<=k;E+=2){for(N=E+C,s[N]=E===-k||E!==k&&s[N-1]<s[N+1]?s[N+1]:s[N-1]+1,R=s[N],L=R-u+p-E;R<f&&L<g&&n[R]===o[L];)s[N]=++R,++L;if(v%2!=0&&v-k<=E&&E<=v+k&&i[N-v]<=s[N])return l(i[N-v],E+u-p,f,g)}for(E=v-k;E<=v+k;E+=2){for(N=E+C-v,i[N]=E===v-k||E!==v+k&&i[N+1]<=i[N-1]?i[N+1]-1:i[N-1],R=i[N]-1,L=R-u+p-E;R>=u&&L>=p&&n[R]===o[L];)i[N]=R--,L--;if(v%2==0&&-k<=E&&E<=k&&i[N]<=s[N+v])return l(i[N],E+u-p,f,g)}}return null},d=[];return a(0,n.length,0,o.length,d),d})(ze(nn(t.childNodes),Z_),e),t)})(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!Q(o)||!av(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},ah=e=>"fragmented"===e.type?e.fragments.join(""):e.content,eC=e=>{const t=Lt("body",HA());return ya(t,ah(e)),W(Yt(t,"*[data-mce-bogus]"),Fo),Ud(t)},lh=(e,t)=>{return!(!e||!t)&&(o=t,!(ah(e)!==ah(o))||((n,o)=>eC(n)===eC(o))(e,t));var o},ch=e=>0===e.get(),qu=(e,t,n)=>{ch(n)&&(e.typing=t)},tC=(e,t)=>{e.typing&&(qu(e,!1,t),e.add())},nC=e=>({init:{bindEvents:Re},undoManager:{beforeChange:(t,n)=>{return o=e,s=n,void(ch(t)&&s.set(mf(o.selection)));var o,s},add:(t,n,o,r,s,i)=>((a,l,c,d,u,f,p)=>{const g=Hu(a),b=X.extend(f||{},g);if(!ch(d)||a.removed)return null;const h=l.data[c.get()];if(a.dispatch("BeforeAddUndo",{level:b,lastLevel:h,originalEvent:p}).isDefaultPrevented()||h&&lh(h,b))return null;l.data[c.get()]&&u.get().each(C=>{l.data[c.get()].beforeBookmark=C});const v=Yk(a);if(v&&l.data.length>v){for(let C=0;C<l.data.length-1;C++)l.data[C]=l.data[C+1];l.data.length--,c.set(l.data.length)}b.bookmark=mf(a.selection),c.get()<l.data.length-1&&(l.data.length=c.get()+1),l.data.push(b),c.set(l.data.length-1);const _={level:b,lastLevel:h,originalEvent:p};return c.get()>0?(a.setDirty(!0),a.dispatch("AddUndo",_),a.dispatch("change",_)):a.dispatch("AddUndo",_),b})(e,t,n,o,r,s,i),undo:(t,n,o)=>((r,s,i,a)=>{let l;return s.typing&&(s.add(),s.typing=!1,qu(s,!1,i)),a.get()>0&&(a.set(a.get()-1),l=s.data[a.get()],ih(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(e,t,n,o),redo:(t,n)=>((o,r,s)=>{let i;return r.get()<s.length-1&&(r.set(r.get()+1),i=s[r.get()],ih(o,i,!1),o.setDirty(!0),o.dispatch("Redo",{level:i})),i})(e,t,n),clear:(t,n)=>{return o=e,s=n,(r=t).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:t=>{return(n=t).clear(),void n.add();var n},hasUndo:(t,n)=>{return o=e,r=t,n.get()>0||r.typing&&r.data[0]&&!lh(Hu(o),r.data[0]);var o,r},hasRedo:(t,n)=>{return o=t,n.get()<o.data.length-1&&!o.typing;var o},transact:(t,n,o)=>{return i=o,tC(r=t,n),r.beforeChange(),r.ignore(i),r.add();var r,i},ignore:(t,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(t,n),extra:(t,n,o,r)=>((s,i,a,l,c)=>{if(i.transact(l)){const d=i.data[a.get()].bookmark,u=i.data[a.get()-1];ih(s,u,!0),i.transact(c)&&(i.data[a.get()-1].beforeBookmark=d)}})(e,t,n,o,r)},formatter:{match:(t,n,o,r)=>Fg(e,t,n,o,r),matchAll:(t,n)=>((o,r,s)=>{const i=[],a={},l=o.selection.getStart();return o.dom.getParent(l,c=>{for(let d=0;d<r.length;d++){const u=r[d];!a[u]&&Dr(o,c,u,s)&&(a[u]=!0,i.push(u))}},o.dom.getRoot()),i})(e,t,n),matchNode:(t,n,o,r)=>Dr(e,t,n,o,r),canApply:t=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r&&n.selection.isEditable()){const i=n.selection.getStart(),a=_u(s,i);for(let l=r.length-1;l>=0;l--){const c=r[l];if(!go(c))return!0;for(let d=a.length-1;d>=0;d--)if(s.is(a[d],c.selector))return!0}}return!1})(e,t),closest:t=>((n,o)=>{const r=s=>We(s,T(n.getBody()));return w.from(n.selection.getStart(!0)).bind(s=>Pg(T(s),i=>ms(o,a=>{return Dr(n,i.dom,c=a)?w.some(c):w.none();var c}),r)).getOrNull()})(e,t),apply:(t,n,o)=>l_(e,t,n,o),remove:(t,n,o,r)=>s_(e,t,n,o,r),toggle:(t,n,o)=>((r,s,i,a)=>{const l=r.formatter.get(s);l&&(!Fg(r,s,i,a)||"toggle"in l[0]&&!l[0].toggle?l_(r,s,i,a):s_(r,s,i,a))})(e,t,n,o),formatChanged:(t,n,o,r,s)=>{return((f,p,g,b,h,v)=>{const _=p.get();W(g.split(","),C=>{const k=nt(_,C).getOrThunk(()=>{const N={withSimilar:{state:Qt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Qt(!1),similar:!1,callbacks:[]},withVars:[]};return _[C]=N,N}),E=()=>{const N=m_(f);return u_(f,N,C,h,v).isSome()};if(Bt(v)){const N=h?k.withSimilar:k.withoutSimilar;N.callbacks.push(b),1===N.callbacks.length&&N.state.set(E())}else k.withVars.push({state:Qt(E()),similar:h,vars:v,callback:b})}),p.set(_)})(e,a=t,l=n,c=o,r,s),{unbind:()=>((f,p,g)=>{const b=f.get();W(p.split(","),h=>nt(b,h).each(v=>{b[h]={withSimilar:{...v.withSimilar,callbacks:ke(v.withSimilar.callbacks,_=>_!==g)},withoutSimilar:{...v.withoutSimilar,callbacks:ke(v.withoutSimilar.callbacks,_=>_!==g)},withVars:ke(v.withVars,_=>_.callback!==g)}})),f.set(b)})(a,l,c)};var a,l,c}},editor:{getContent:t=>{return o=t,w.from((n=e).getBody()).fold(Z("tree"===o.format?new yn("body",11):""),r=>((e,t,n)=>{let o;return o="raw"===t.format?X.trim(bn(N0(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?((r,s)=>{const i=r.getDoc(),a=_r(T(r.getBody())),l=Lt("div",i);wt(l,"data-mce-bogus","all"),ui(l,{position:"fixed",left:"-9999999px",top:"0"}),ya(l,s.innerHTML),A0(l),T0(l);const c=$l(u=a)?u:T(Ko(u).dom.body);var u;Et(c,l);const d=bn(l.dom.innerText);return ot(l),d})(e,n):"tree"===t.format?e.serializer.serialize(n,t):((r,s)=>{const i=un(r),a=new RegExp(`^(<${i}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${i}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(a,"")})(e,e.serializer.serialize(n,t)),"text"!==t.format&&!Sa(T(n))&&ge(o)?X.trim(o):o})(n,o,r));var n,o},setContent:(t,n)=>{return r=t,s=n,w.from((o=e).getBody()).map(i=>Pu(r)?((a,l,c,d)=>{Sy(a.parser.getNodeFilters(),a.parser.getAttributeFilters(),c);const u=Ws({validate:!1},a.schema).serialize(c),f=bn(Sa(T(l))?u:X.trim(u));return Lg(a,f,d.no_selection),{content:c,html:f}})(o,i,r,s):((a,l,c,d)=>{if(0===(c=bn(c)).length||/^\s+$/.test(c)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?c="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(c="<li>"+u+"</li>");const f=un(a);return a.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(c=u,c=a.dom.createHTML(f,yc(a),c)):c||(c=u),Lg(a,c,d.no_selection),{content:c,html:c}}{"raw"!==d.format&&(c=Ws({validate:!1},a.schema).serialize(a.parser.parse(c,{isRootContent:!0,insert:!0})));const u=Sa(T(l))?c:X.trim(c);return Lg(a,u,d.no_selection),{content:u,html:u}}})(o,i,r,s)).getOr({content:r,html:Pu(s.content)?"":s.content});var o,r,s},insertContent:(t,n)=>tA(e,t,n),addVisual:t=>((n,o)=>{const r=n.dom,s=Q(o)?o:n.getBody();W(r.select("table,a",s),i=>{switch(i.nodeName){case"TABLE":const a=eS(n),l=r.getAttrib(i,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(i,a):r.addClass(i,a);break;case"A":if(!r.getAttrib(i,"href")){const c=r.getAttrib(i,"name")||i.id,d=Mb(n);c&&n.hasVisual?r.addClass(i,d):r.removeClass(i,d)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(e,t)},selection:{getContent:(t,n)=>((o,r,s={})=>{const i=(a=s,l=r,{...a,format:l,get:!0,selection:!0,getInner:!0});var a,l;return q_(o,i).fold(tn,a=>{const l=((c,d)=>{if("text"===d.format)return w.from((u=c).selection.getRng()).map(f=>{var p;const g=w.from(u.dom.getParent(f.commonAncestorContainer,u.dom.isBlock)),b=u.getBody(),h=g.map(N=>N.nodeName).getOr("div").toLowerCase(),v=T(f.cloneContents());A0(v),T0(v);const _=u.dom.add(b,h,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},v.dom),C=J_(_),k=bn(null!==(p=_.textContent)&&void 0!==p?p:"");if(u.dom.remove(_),zu(k,0)||zu(k,k.length-1)){const E=g.getOr(b),N=J_(E),R=N.indexOf(C);return-1===R?C:(zu(N,R-1)?" ":"")+C+(zu(N,R+C.length)?" ":"")}return C}).getOr("");var u;{const u=((f,p)=>{const g=f.selection.getRng(),b=f.dom.create("body"),h=f.selection.getSel(),v=rg(f,Tf(h)),_=p.contextual?((e,t,n)=>{const o=fv(t,e);return o.length>0?((e,t)=>{return(n=e,o=t[0],ci(o,"table",se(We,n))).bind(n=>{const o=t[0],r=t[t.length-1],s=(i=>{const a=sh(Ni(i),0,[]);return W(Yt(i,"tr"),(l,c)=>{W(Yt(l,"td,th"),(d,u)=>{((f,p,g,b,h)=>{const v=K_(h,"rowspan"),_=K_(h,"colspan"),C=f.rows;for(let k=g;k<g+v;k++){C[k]||(C[k]=V_(Vp(b),[]));for(let E=p;E<p+_;E++)C[k].cells[E]=k===g&&E===p?h:Ni(h)}})(a,((f,p,g)=>{for(;IA(f,p,g);)p++;return p})(a,u,c),c,l,d)})}),sh(a.element,Y_(a.rows),a.rows)})(n);return(i=s,a=o,l=r,X_(i,a).bind(c=>X_(i,l).map(d=>((u,f,p)=>{const g=f.x,b=f.y,h=p.x,v=p.y,_=b<v?G_(u,g,b,h,v):G_(u,g,v,h,b);return sh(u.element,Y_(_),_)})(i,c,d)))).map(i=>Wf([FA(i)]));var i,a,l}).getOrThunk(Q_);var n,o})(e,o):(r=e,i=n,(s=t).length>0&&s[0].collapsed?Q_():(a=r,c=i,((d,u)=>{const f=$t(u,(p,g)=>(Et(g,p),g),d);return u.length>0?Wf([f]):f})(T((l=s[0]).cloneContents()),((e,t,n)=>{const o=T(t.commonAncestorContainer),r=as(o,e),s=ke(r,l=>n.isWrapper(Fe(l))),i=(c=t,Tt(l=r,d=>"li"===Fe(d)&&Rf(d,c)).fold(Z([]),d=>{return(u=l,Tt(u,f=>"ul"===Fe(f)||"ol"===Fe(f))).map(u=>{const f=Lt(Fe(u)),p=fs(Hl(u),(g,b)=>Qe(b,"list-style"));return ui(f,p),[Lt("li"),f]}).getOr([]);var u})),a=s.concat(i.length?i:(l=>bi(l)?Vn(l).filter(Jo).fold(Z([]),c=>[l,c]):Jo(l)?[l]:[])(o));var l,c;return ze(a,Ni)})(a,l,c))));var r,s,i,a,l,c})(T(f.getBody()),v,f.schema).dom:g.cloneContents();return _&&b.appendChild(_),f.selection.serializer.serialize(b,p)})(c,d);return"tree"===d.format?u:c.selection.isCollapsed()?"":u}})(o,a);return W_(o,l,a)})})(e,t,n)},autocompleter:{addDecoration:t=>((e,t)=>{if(_0(T(e.getBody())).isNone()){const o=vr('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Et(o,T(t.extractContents())),t.insertNode(o.dom),Vn(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const i=a=>{const l=Nt(a);for(let c=l.length-1;c>=0;c--){const d=l[c];if(s(d))return w.some(d);const u=i(d);if(u.isSome())return u}return w.none()};return i(r)})(n,v0)).map(r=>{var s;e.selection.setCursorLocation(r.dom,"img"===Fe(s=r)?1:Xd(s).fold(()=>Nt(s).length,i=>i.length))})}var n})(e,t),removeDecoration:()=>{return t=e,n=T(e.getBody()),_0(n).each(o=>{const r=t.selection.getBookmark();Fo(o),t.selection.moveToBookmark(r)});var t,n}},raw:{getModel:()=>w.none()}}),Br=e=>Oe(e.plugins,"rtc"),dh=e=>e.rtcInstance?e.rtcInstance:nC(e),At=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},oC=e=>At(e).init.bindEvents(),rC=e=>0===e.dom.length?(ot(e),w.none()):w.some(e),sC=(e,t,n,o,r)=>{e.bind(s=>((o?gg:Ru)(s.dom,o?s.dom.length:0,r),t.filter(kn).map(i=>((a,l,c,d,u)=>{const f=a.dom,p=l.dom,g=d?f.length:p.length;d?(hg(f,p,u,!1,!d),c.setStart(p,g)):(hg(p,f,u,!1,!d),c.setEnd(p,g))})(s,i,n,o,r)))).orThunk(()=>{return(i=t,a=o,i.filter(l=>Oc.isBookmarkNode(l.dom)).bind(a?Po:Xr)).or(t).filter(kn).map(i=>((a,l,c)=>{Vn(a).each(d=>{const u=a.dom;l&&Pc(d,U(u,0),c)?Ru(u,0,c):!l&&Mc(d,U(u,u.length),c)&&gg(u,u.length,c)})})(i,o,r));var i,a})},iC=(e,t,n)=>{if(Oe(e,t)){const o=ke(e[t],r=>r!==n);0===o.length?delete e[t]:e[t]=o}},aC=e=>!(!e||!e.ownerDocument)&&Lo(T(e.ownerDocument),T(e)),lC=(e,t,n,o)=>{let r,s;const{selectorChangedWithUnbind:i}=((h,v)=>{let _,C;const k=(N,R)=>Tt(R,L=>h.is(L,N)),E=N=>h.getParents(N,void 0,h.getRoot());return{selectorChangedWithUnbind:(N,R)=>(_||(_={},C={},v.on("NodeChange",L=>{const P=L.element,F=E(P),A={};tt(_,(D,M)=>{k(M,F).each(z=>{C[M]||(W(D,te=>{te(!0,{node:z,selector:M,parents:F})}),C[M]=D),A[M]=D})}),tt(C,(D,M)=>{A[M]||(delete C[M],W(D,z=>{z(!1,{node:P,selector:M,parents:F})}))})})),_[N]||(_[N]=[]),_[N].push(R),k(N,E(v.selection.getStart())).each(()=>{C[N]=_[N]}),{unbind:()=>{iC(_,N,R),iC(C,N,R)}})}})(e,o),a=(h,v)=>((_,C,k={})=>{const E=(N=k,R=C,{format:"html",...N,set:!0,selection:!0,content:R});var N,R;oh(_,E).each(N=>{const R=((P,F)=>{if("raw"!==F.format){const A=P.selection.getRng(),D=P.dom.getParent(A.commonAncestorContainer,P.dom.isBlock),M=D?{context:D.nodeName.toLowerCase()}:{},z=P.parser.parse(F.content,{forced_root_block:!1,...M,...F});return Ws({validate:!1},P.schema).serialize(z)}return F.content})(_,N),L=_.selection.getRng();((P,F,A)=>{const D=w.from(F.firstChild).map(T),M=w.from(F.lastChild).map(T);P.deleteContents(),P.insertNode(F);const z=D.bind(Xr).filter(kn).bind(rC),te=M.bind(Po).filter(kn).bind(rC);sC(z,D,P,!0,A),sC(te,M,P,!1,A),P.collapse(!1)})(L,L.createContextualFragment(R),_.schema),_.selection.setRng(L),Dc(_,L),rh(_,R,N)})})(o,h,v),l=h=>{const v=d();v.collapse(!!h),u(v)},c=()=>t.getSelection?t.getSelection():t.document.selection,d=()=>{let h;const v=(C,k,E)=>{try{return k.compareBoundaryPoints(C,E)}catch{return-1}},_=t.document;if(Q(o.bookmark)&&!Ii(o)){const C=Jf(o);if(C.isSome())return C.map(k=>rg(o,[k])[0]).getOr(_.createRange())}try{const C=c();C&&!wa(C.anchorNode)&&(h=C.rangeCount>0?C.getRangeAt(0):_.createRange(),h=rg(o,[h])[0])}catch{}if(h||(h=_.createRange()),Os(h.startContainer)&&h.collapsed){const C=e.getRoot();h.setStart(C,0),h.setEnd(C,0)}return r&&s&&(0===v(h.START_TO_START,h,r)&&0===v(h.END_TO_END,h,r)?h=s:(r=null,s=null)),h},u=(h,v)=>{if(!((C=h)&&aC(C.startContainer)&&aC(C.endContainer)))return;var C;const _=c();if(h=o.dispatch("SetSelectionRange",{range:h,forward:v}).range,_){s=h;try{_.removeAllRanges(),_.addRange(h)}catch{}!1===v&&_.extend&&(_.collapse(h.endContainer,h.endOffset),_.extend(h.startContainer,h.startOffset)),r=_.rangeCount>0?_.getRangeAt(0):null}if(!h.collapsed&&h.startContainer===h.endContainer&&_?.setBaseAndExtent&&h.endOffset-h.startOffset<2&&h.startContainer.hasChildNodes()){const C=h.startContainer.childNodes[h.startOffset];C&&"IMG"===C.nodeName&&(_.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),_.anchorNode===h.startContainer&&_.focusNode===h.endContainer||_.setBaseAndExtent(C,0,C,1))}o.dispatch("AfterSetSelectionRange",{range:h,forward:v})},f=()=>{const h=c(),v=h?.anchorNode,_=h?.focusNode;if(!h||!v||!_||wa(v)||wa(_))return!0;const C=e.createRng(),k=e.createRng();try{C.setStart(v,h.anchorOffset),C.collapse(!0),k.setStart(_,h.focusOffset),k.collapse(!0)}catch{return!0}return C.compareBoundaryPoints(C.START_TO_START,k)<=0},p={dom:e,win:t,serializer:n,editor:o,expand:(h={type:"word"})=>u(Mi(e).expand(d(),h)),collapse:l,setCursorLocation:(h,v)=>{const _=e.createRng();Q(h)&&Q(v)?(_.setStart(h,v),_.setEnd(h,v),u(_),l(!1)):(Df(e,_,o.getBody(),!0),u(_))},getContent:h=>((v,_={})=>{return k=_.format?_.format:"html",E=_,At(v).selection.getContent(k,E);var k,E})(o,h),setContent:a,getBookmark:(h,v)=>g.getBookmark(h,v),moveToBookmark:h=>g.moveToBookmark(h),select:(h,v)=>{return(_=e,C=h,k=v,w.from(C).bind(E=>w.from(E.parentNode).map(N=>{const R=_.nodeIndex(E),L=_.createRng();return L.setStart(N,R),L.setEnd(N,R+1),k&&(Df(_,L,E,!0),Df(_,L,E,!1)),L}))).each(u),h;var _,C,k},isCollapsed:()=>{const h=d(),v=c();return!(!h||h.item)&&(h.compareEndPoints?0===h.compareEndPoints("StartToEnd",h):!v||h.collapsed)},isEditable:()=>{const h=d(),v=o.getBody().querySelectorAll('[data-mce-selected="1"]');return v.length>0?ur(v,_=>e.isEditable(_.parentElement)):f0(e,h)},isForward:f,setNode:h=>(a(e.getOuterHTML(h)),h),getNode:()=>((h,v)=>{if(!v)return h;let _=v.startContainer,C=v.endContainer;const k=v.startOffset,E=v.endOffset;let N=v.commonAncestorContainer;v.collapsed||(_===C&&E-k<2&&_.hasChildNodes()&&(N=_.childNodes[k]),Y(_)&&Y(C)&&(_=_.length===k?b0(_.nextSibling,!0):_.parentNode,C=0===E?b0(C.previousSibling,!1):C.parentNode,_&&_===C&&(N=_)));const R=Y(N)?N.parentNode:N;return sn(R)?R:h})(o.getBody(),d()),getSel:c,setRng:u,getRng:d,getStart:h=>h0(o.getBody(),d(),h),getEnd:h=>p0(o.getBody(),d(),h),getSelectedBlocks:(h,v)=>((_,C,k,E)=>{const N=[],R=_.getRoot(),L=_.getParent(k||h0(R,C,C.collapsed),_.isBlock),P=_.getParent(E||p0(R,C,C.collapsed),_.isBlock);if(L&&L!==R&&N.push(L),L&&P&&L!==P){let F;const A=new Ot(L,R);for(;(F=A.next())&&F!==P;)_.isBlock(F)&&N.push(F)}return P&&L!==P&&P!==R&&N.push(P),N})(e,d(),h,v),normalize:()=>{const h=d(),v=c();if(!(Tf(v).length>1)&&vu(o)){const _=ku(e,h);return _.each(C=>{u(C,f())}),_.getOr(h)}return h},selectorChanged:(h,v)=>(i(h,v),p),selectorChangedWithUnbind:i,getScrollContainer:()=>{let h,v=e.getRoot();for(;v&&"BODY"!==v.nodeName;){if(v.scrollHeight>v.clientHeight){h=v;break}v=v.parentNode}return h},scrollIntoView:(h,v)=>{var _;Q(h)?((_=o).inline?lN:dN)(_,h,v):Dc(o,d(),v)},placeCaretAt:(h,v)=>u(Vv(h,v,o.getDoc())),getBoundingClientRect:()=>{const h=d();return h.collapsed?U.fromRangeStart(h).getClientRects()[0]:h.getBoundingClientRect()},destroy:()=>{t=r=s=null,b.destroy()}},g=Oc(p),b=Uv(p,o);return p.bookmarkManager=g,p.controlSelection=b,p},qA=(e,t,n)=>{-1===X.inArray(t,n)&&(e.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),t.push(n))},cC=(e,t)=>{const n=((e,t)=>{const n=["data-mce-selected"],o={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},r=t&&t.dom?t.dom:rt.DOM,s=t&&t.schema?t.schema:co(o),i=Xa(o,s);return l=o,c=r,(a=i).addAttributeFilter("data-mce-tabindex",(d,u)=>{let f=d.length;for(;f--;){const p=d[f];p.attr("tabindex",p.attr("data-mce-tabindex")),p.attr(u,null)}}),a.addAttributeFilter("src,href,style",(d,u)=>{const f="data-mce-"+u,p=l.url_converter,g=l.url_converter_scope;let b=d.length;for(;b--;){const h=d[b];let v=h.attr(f);void 0!==v?(h.attr(u,v.length>0?v:null),h.attr(f,null)):(v=h.attr(u),"style"===u?v=c.serializeStyle(c.parseStyle(v),h.name):p&&(v=p.call(g,v,u,h.name)),h.attr(u,v.length>0?v:null))}}),a.addAttributeFilter("class",d=>{let u=d.length;for(;u--;){const f=d[u];let p=f.attr("class");p&&(p=p.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),f.attr("class",p.length>0?p:null))}}),a.addAttributeFilter("data-mce-type",(d,u,f)=>{let p=d.length;for(;p--;){const g=d[p];"bookmark"===g.attr("data-mce-type")&&!f.cleanup&&(w.from(g.firstChild).exists(h=>{var v;return!Na(null!==(v=h.value)&&void 0!==v?v:"")})?g.unwrap():g.remove())}}),a.addNodeFilter("noscript",d=>{var u;let f=d.length;for(;f--;){const p=d[f].firstChild;p&&(p.value=Sr.decode(null!==(u=p.value)&&void 0!==u?u:""))}}),a.addNodeFilter("script,style",(d,u)=>{var f;const p=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let g=d.length;for(;g--;){const b=d[g],h=b.firstChild,v=null!==(f=h?.value)&&void 0!==f?f:"";if("script"===u){const _=b.attr("type");_&&b.attr("type","mce-no/type"===_?null:_.replace(/^mce\-/,"")),"xhtml"===l.element_format&&h&&v.length>0&&(h.value="// <![CDATA[\n"+p(v)+"\n// ]]>")}else"xhtml"===l.element_format&&h&&v.length>0&&(h.value="\x3c!--\n"+p(v)+"\n--\x3e")}}),a.addNodeFilter("#comment",d=>{let u=d.length;for(;u--;){const f=d[u],p=f.value;l.preserve_cdata&&0===p?.indexOf("[CDATA[")?(f.name="#cdata",f.type=4,f.value=c.decode(p.replace(/^\[CDATA\[|\]\]$/g,""))):0===p?.indexOf("mce:protected ")&&(f.name="#text",f.type=3,f.raw=!0,f.value=unescape(p).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,u)=>{let f=d.length;for(;f--;){const p=d[f];7===p.type?p.remove():1===p.type&&("input"!==u||p.attr("type")||p.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{W(d,u=>{"format-caret"===u.attr("data-mce-type")&&(u.isEmpty(a.schema.getNonEmptyElements())?u.remove():u.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,u)=>{let f=d.length;for(;f--;)d[f].attr(u,null)}),l.remove_trailing_brs&&p_(l,a,a.schema),{schema:s,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:(a,l={})=>{const c={format:"html",...l},d=(g=a,v=b=c,Q(h=p=t)&&h.hasEventListeners("PreProcess")&&!v.no_events?((h,v,_)=>{let C;const k=h.dom;let E=v.cloneNode(!0);const N=document.implementation;if(N.createHTMLDocument){const R=N.createHTMLDocument("");X.each("BODY"===E.nodeName?E.childNodes:[E],L=>{R.body.appendChild(R.importNode(L,!0))}),E="BODY"!==E.nodeName?R.body.firstChild:R.body,C=k.doc,k.doc=R}return L={..._,node:E},h.dispatch("PreProcess",L),C&&(k.doc=C),E;var L})(p,g,b):g),u=((p,g,b)=>{const h=bn(b.getInner?g.innerHTML:p.getOuterHTML(g));return b.selection||Sa(T(g))?h:X.trim(h)})(r,d,c),f=((p,g,b)=>{const h=b.selection?{forced_root_block:!1,...b}:b,v=p.parse(g,h);return(_=>{const C=E=>"br"===E?.name,k=_.lastChild;if(C(k)){const E=k.prev;C(E)&&(k.remove(),E.remove())}})(v),v})(i,u,c);var p,g,b,h,v;return"tree"===c.format?f:((p,g,b,h,v)=>{var E;return((C,k,E)=>{return!k.no_events&&C?(R=C,L={...k,content:E},R.dispatch("PostProcess",L)).content:E;var R,L})(p,v,(E=h,Ws(g,b).serialize(E)))})(t,o,s,f,c)},addRules:s.addValidElements,setRules:s.setValidElements,addTempAttr:se(qA,i,n),getTempAttrs:Z(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter};var a,l,c})(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},uh=(e,t,n={})=>{const o=(r=n,s=t,{format:"html",...r,set:!0,content:s});var r,s;return oh(e,o).map(r=>{const s=(a=r.content,l=r,dh(e).editor.setContent(a,l));var a,l;return rh(e,s.html,r),s.content}).getOr(t)},VA="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),KA="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),YA="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),dC=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],uC=(e,t)=>{const n=ke(t,o=>Oe(e,o));return mr(n)},mC=(e,t)=>{const n=X.makeMap(e.plugins," "),o=ke(t,r=>Oe(n,r));return mr(o)},ZA=e=>Tt(dC,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),Wu=rt.DOM,Vu=e=>w.from(e).each(t=>t.destroy()),Ku=(()=>{const e={};return{add:(t,n)=>{e[t]=n},get:t=>e[t]?e[t]:{icons:{}},has:t=>Oe(e,t)}})(),Ga=vn.ModelManager,fC=(e,t)=>t.dom[e],gC=(e,t)=>parseInt(Kn(t,e),10),eT=se(fC,"clientWidth"),tT=se(fC,"clientHeight"),nT=se(gC,"margin-top"),oT=se(gC,"margin-left"),hC=e=>{const t=[],n=()=>{const l=e.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const c=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:c,close:c,getArgs:c}})()},o=()=>w.from(t[0]),r=()=>{W(t,l=>{l.reposition()})},s=l=>{ei(t,c=>c===l).each(c=>{t.splice(c,1)})},i=(l,c=!0)=>{return e.removed||!(u=(d=e).inline?d.getBody():d.getContentAreaContainer(),w.from(u).map(T)).map(xs).getOr(!1)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:l}),Tt(t,d=>{return!((u=n().getArgs(d)).type!==(f=l).type||u.text!==f.text||u.progressBar||u.timeout||f.progressBar||f.timeout);var u,f}).getOrThunk(()=>{e.editorManager.setActive(e);const d=n().open(l,()=>{s(d),r(),m0(e)&&o().fold(()=>e.focus(),u=>s0(T(u.getEl())))});return(u=>{t.push(u)})(d),r(),e.dispatch("OpenNotification",{notification:{...d}}),d}));var d,u},a=Z(t);return(l=e).on("SkinLoaded",()=>{const c=Mk(l);c&&i({text:c,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{W(t.slice(),c=>{n().close(c)})}),{open:i,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:a};var l},Qa=vn.PluginManager,zi=vn.ThemeManager,pC=e=>{let t=[];const n=()=>{const i=e.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():(()=>{const a=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:a,openUrl:a,alert:a,confirm:a,close:a}})()},o=(i,a)=>(...l)=>a?a.apply(i,l):void 0,r=i=>{e.dispatch("CloseWindow",{dialog:i}),t=ke(t,a=>a!==i),0===t.length&&e.focus()},s=i=>{e.editorManager.setActive(e),Qf(e),e.ui.show();const a=i();return t.push(l=a),e.dispatch("OpenWindow",{dialog:l}),a;var l};return e.on("remove",()=>{W(t,i=>{n().close(i)})}),{open:(i,a)=>s(()=>n().open(i,a,r)),openUrl:i=>s(()=>n().openUrl(i,r)),alert:(i,a,l)=>{const c=n();c.alert(i,o(l||c,a))},confirm:(i,a,l)=>{const c=n();c.confirm(i,o(l||c,a))},close:()=>{w.from(t[t.length-1]).each(i=>{n().close(i),r(i)})}}},bC=(e,t)=>{e.notificationManager.open({type:"error",text:t})},Yu=(e,t)=>{e._skinLoaded?bC(e,t):e.on("SkinLoaded",()=>{bC(e,t)})},qc=(e,t,n)=>{Lv(e,t,{message:n}),console.error(n)},Wc=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,Xu=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},mh=e=>"content/"+e+"/content.css",vC=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return ze(t,r=>tinymce.Resource.has(mh(r))?r:/^[a-z0-9\-]+$/i.test(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},yC=()=>{let e={};const t=(o,r)=>({status:o,resultUri:r}),n=o=>o in e;return{hasBlobUri:n,getResultUri:o=>{const r=e[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===e[o].status,isUploaded:o=>!!n(o)&&2===e[o].status,markPending:o=>{e[o]=t(1,null)},markUploaded:(o,r)=>{e[o]=t(2,r)},removeFailed:o=>{delete e[o]},destroy:()=>{e={}}}};let sT=0;const _C=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),CC=(e,t)=>((e,t)=>{const n={},o=(l,c)=>new Promise((d,u)=>{const f=new XMLHttpRequest;f.open("POST",t.url),f.withCredentials=t.credentials,f.upload.onprogress=g=>{c(g.loaded/g.total*100)},f.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void u("HTTP Error: "+f.status);const g=JSON.parse(f.responseText);var b,h;g&&ge(g.location)?d((h=g.location,(b=t.basePath)?b.replace(/\/$/,"")+"/"+h.replace(/^\//,""):h)):u("Invalid JSON: "+f.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),f.send(p)}),r=Ke(t.handler)?t.handler:o,s=(l,c)=>({url:c,blobInfo:l,status:!0}),i=(l,c)=>({url:"",blobInfo:l,status:!1,error:c}),a=(l,c)=>{X.each(n[l],d=>{d(c)}),delete n[l]};return{upload:(l,c)=>{return t.url||r!==o?(u=c,d=X.grep(d=l,f=>!e.isUploaded(f.blobUri())),Promise.all(X.map(d,f=>{return e.isPending(f.blobUri())?(p=>{const g=p.blobUri();return new Promise(b=>{n[g]=n[g]||[],n[g].push(b)})})(f):(g=r,b=u,e.markPending((p=f).blobUri()),new Promise(h=>{let v,_;try{const C=()=>{v&&(v.close(),_=Re)},k=N=>{C(),e.markUploaded(p.blobUri(),N),a(p.blobUri(),s(p,N)),h(s(p,N))},E=N=>{C(),e.removeFailed(p.blobUri()),a(p.blobUri(),i(p,N)),h(i(p,N))};_=N=>{N<0||N>100||w.from(v).orThunk(()=>w.from(b).map(ea)).each(R=>{v=R,R.progressBar.value(N)})},g(p,_).then(k,N=>{E(ge(N)?{message:N}:N)})}catch(C){h(i(p,C))}}));var p,g,b}))):new Promise(d=>{d([])});var d,u}}})(t,{url:Ek(e),basePath:xk(e),credentials:kk(e),handler:Sk(e)}),wC={remove_similar:!0,inherit:!1},Ja={selector:"td,th",...wC},lT={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Ja},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Ja},tablecellbordercolor:{styles:{borderColor:"%value"},...Ja},tablecellclass:{classes:["%value"],...Ja},tableclass:{selector:"table",classes:["%value"],...wC},tablecellborderstyle:{styles:{borderStyle:"%value"},...Ja},tablecellborderwidth:{styles:{borderWidth:"%value"},...Ja}},cT=Z(lT),Gu=X.each,vo=rt.DOM,fh=e=>Q(e)&&Vt(e),EC=(e,t)=>{const n=t&&t.schema||co({}),o=i=>{const a=ge(i)?{name:i,classes:[],attrs:{}}:i,l=vo.create(a.name);return c=l,(d=a).classes.length>0&&vo.addClass(c,d.classes.join(" ")),vo.setAttribs(c,d.attrs),l;var c,d},r=(i,a,l)=>{let c;const d=a[0],u=fh(d)?d.name:void 0,f=((b,h)=>{const v=n.getElementRule(b.nodeName.toLowerCase()),_=v?.parentsRequired;return!(!_||!_.length)&&(h&&ae(_,h)?h:_[0])})(i,u);if(f)u===f?(c=d,a=a.slice(1)):c=f;else if(d)c=d,a=a.slice(1);else if(!l)return i;const p=c?o(c):vo.create("div");p.appendChild(i),l&&X.each(l,b=>{const h=o(b);p.insertBefore(h,i)});const g=fh(c)?c.siblings:void 0;return r(p,a,g)},s=vo.create("div");if(e.length>0){const i=e[0],a=o(i),l=fh(i)?i.siblings:void 0;s.appendChild(r(a,e.slice(1),l))}return s},dT=e=>{let t="div";const n={name:t,classes:[],attrs:{},selector:e=X.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,i,a)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==X.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===i){const l=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},uT=(e,t)=>{let n="",o=$k(e);if(""===o)return"";const r=p=>ge(p)?p.replace(/%(\w+)/g,""):"",s=(p,g)=>vo.getStyle(g??e.getBody(),p,!0);if(ge(t)){const p=e.formatter.get(t);if(!p)return"";t=p[0]}if("preview"in t){const p=t.preview;if(!1===p)return"";o=p||o}let i,a=t.block||t.inline||"span";const l=ge(c=t.selector)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),X.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const g=X.map(p.split(/(?:~\+|~|\+)/),dT),b=g.pop();return g.length&&(b.siblings=g),b}).reverse()):[];var c;l.length>0?(l[0].name||(l[0].name=a),a=t.selector,i=EC(l,e)):i=EC([a],e);const d=vo.select(a,i)[0]||i.firstChild;Gu(t.styles,(p,g)=>{const b=r(p);b&&vo.setStyle(d,g,b)}),Gu(t.attributes,(p,g)=>{const b=r(p);b&&vo.setAttrib(d,g,b)}),Gu(t.classes,p=>{const g=r(p);vo.hasClass(d,g)||vo.addClass(d,g)}),e.dispatch("PreviewFormats"),vo.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i);const u=s("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return Gu(o.split(" "),p=>{let g=s(p,d);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(p),"#ffffff"===Ei(g).toLowerCase())||"color"===p&&"#000000"===Ei(g).toLowerCase())){if("font-size"===p&&/em|%$/.test(g)){if(0===f)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}"border"===p&&g&&(n+="padding:0 2px;"),n+=p+":"+g+";"}}),e.dispatch("AfterPreviewFormats"),vo.remove(i),n},xC=e=>{const t=(o=>{const r={},s=(i,a)=>{i&&(ge(i)?(Je(a)||(a=[a]),W(a,l=>{Bt(l.deep)&&(l.deep=!go(l)),Bt(l.split)&&(l.split=!go(l)||qt(l)),Bt(l.remove)&&go(l)&&!qt(l)&&(l.remove="none"),go(l)&&qt(l)&&(l.mixed=!0,l.block_expand=!0),ge(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[i]=a):tt(i,(l,c)=>{s(c,l)}))};return s((i=>{const a=i.dom,l=i.schema.type,c={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:d=>{a.setStyle(d,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const d={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[f,d,u]:[d,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(d,u,f)=>ie(d)&&d.hasAttribute("href"),onformat:(d,u,f)=>{X.each(f,(p,g)=>{a.setAttrib(d,g,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":d=>{var u;return null!==(u=d?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return X.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),d=>{c[d]={block:d,remove:"all"}}),c})(o)),s(cT()),s(jk(o)),{get:i=>Q(i)?r[i]:r,has:i=>Oe(r,i),register:s,unregister:i=>(i&&r[i]&&delete r[i],r)}})(e),n=Qt({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(e),(o=e).on("mouseup keydown",r=>{var s;((i,a,l)=>{const c=i.selection,d=i.getBody();Ug(i,null,l),8!==a&&46!==a||!c.isCollapsed()||c.getStart().innerHTML!==jc||Ug(i,Bi(d,c.getStart()),!0),37!==a&&39!==a||Ug(i,Bi(d,c.getStart()),!0)})(o,r.keyCode,(s=o.selection.getRng().endContainer,Y(s)&&fn(s.data,Pt)))}),Br(e)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{f_(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const i=w.from(s.node).map(a=>Ac(a)?a:a.startContainer).bind(a=>ie(a)?w.some(a):w.from(a.parentElement)).getOrThunk(()=>d_(r));f_(r,i,o.get())})})(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,At(e).formatter.apply(a,l,c)},remove:(o,r,s,i)=>{var l,c,d,u;l=o,c=r,d=s,u=i,At(e).formatter.remove(l,c,d,u)},toggle:(o,r,s)=>{var a,l,c;a=o,l=r,c=s,At(e).formatter.toggle(a,l,c)},match:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,At(e).formatter.match(l,c,d,u);var l,c,d,u},closest:o=>{return s=o,At(e).formatter.closest(s);var s},matchAll:(o,r)=>{return i=o,a=r,At(e).formatter.matchAll(i,a);var i,a},matchNode:(o,r,s,i)=>{return l=o,c=r,d=s,u=i,At(e).formatter.matchNode(l,c,d,u);var l,c,d,u},canApply:o=>{return s=o,At(e).formatter.canApply(s);var s},formatChanged:(o,r,s,i)=>{return l=n,c=o,d=r,u=s,f=i,At(e).formatter.formatChanged(l,c,d,u,f);var l,c,d,u,f},getCssText:se(uT,e)};var o},kC=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},SC=e=>{const t=$s(),n=Qt(0),o=Qt(0),r={data:[],typing:!1,beforeChange:()=>{var i,a;i=n,a=t,At(e).undoManager.beforeChange(i,a)},add:(s,i)=>{return l=r,c=o,d=n,u=t,f=s,p=i,At(e).undoManager.add(l,c,d,u,f,p);var l,c,d,u,f,p},dispatchChange:()=>{e.setDirty(!0);const s=Hu(e);s.bookmark=mf(e.selection),e.dispatch("change",{level:s,lastLevel:fr(r.data,o.get()).getOrUndefined()})},undo:()=>{return i=r,a=n,l=o,At(e).undoManager.undo(i,a,l);var i,a,l},redo:()=>{return i=o,a=r.data,At(e).undoManager.redo(i,a);var i,a},clear:()=>{var i,a;i=r,a=o,At(e).undoManager.clear(i,a)},reset:()=>{var i;i=r,At(e).undoManager.reset(i)},hasUndo:()=>{return i=r,a=o,At(e).undoManager.hasUndo(i,a);var i,a},hasRedo:()=>{return i=r,a=o,At(e).undoManager.hasRedo(i,a);var i,a},transact:s=>{return a=r,l=n,c=s,At(e).undoManager.transact(a,l,c);var a,l,c},ignore:s=>{var a,l;a=n,l=s,At(e).undoManager.ignore(a,l)},extra:(s,i)=>{var l,c,d,u;l=r,c=o,d=s,u=i,At(e).undoManager.extra(l,c,d,u)}};return Br(e)||((s,i,a)=>{const l=Qt(!1),c=d=>{qu(i,!1,a),i.add({},d)};s.on("init",()=>{i.add()}),s.on("BeforeExecCommand",d=>{kC(d.command)||(tC(i,a),i.beforeChange())}),s.on("ExecCommand",d=>{kC(d.command)||c(d)}),s.on("ObjectResizeStart cut",()=>{i.beforeChange()}),s.on("SaveContent ObjectResized blur",c),s.on("dragend",c),s.on("keyup",d=>{const u=d.keyCode;if(d.isDefaultPrevented())return;const f=Pe.os.isMacOS()&&"Meta"===d.key;(u>=33&&u<=36||u>=37&&u<=40||45===u||d.ctrlKey||f)&&(c(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&i.typing&&!lh(Hu(s),i.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged())}),s.on("keydown",d=>{const u=d.keyCode;if(!d.isDefaultPrevented()){if(!(u>=33&&u<=36||u>=37&&u<=40||45===u))return!(u<16||u>20)||224===u||91===u||i.typing||d.ctrlKey&&!d.altKey||d.metaKey?void((Pe.os.isMacOS()?d.metaKey:d.ctrlKey&&!d.altKey)&&i.beforeChange()):(i.beforeChange(),qu(i,!0,a),i.add({},d),void l.set(!0));i.typing&&c(d)}}),s.on("mousedown",d=>{i.typing&&c(d)}),s.on("input",d=>{var u,f;d.inputType&&("insertReplacementText"===d.inputType||"insertText"===(u=d).inputType&&null===u.data||"insertFromPaste"===(f=d).inputType||"insertFromDrop"===f.inputType)&&c(d)}),s.on("AddUndo Undo Redo ClearUndos",d=>{d.isDefaultPrevented()||s.nodeChanged()})})(e,r,n),(s=e).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},mT=[9,27,oe.HOME,oe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,oe.DOWN,oe.UP,oe.LEFT,oe.RIGHT].concat(Pe.browser.isFirefox()?[224]:[]),NC="data-mce-placeholder",AC=e=>"keydown"===e.type||"keyup"===e.type,TC=e=>{const t=e.keyCode;return t===oe.BACKSPACE||t===oe.DELETE},fT=(e,t)=>({from:e,to:t}),gh=(e,t)=>{const n=T(e),o=T(t.container());return Du(n,o).map(r=>({block:r,position:t}))},OC=(e,t)=>Io(t,n=>vi(n)||Yn(n.dom),n=>We(n,e)).filter(xn).getOr(e),RC=(e,t)=>{const n=((o,r)=>{const s=Nt(o);return ei(s,i=>r.isBlock(Fe(i))).fold(Z(s),i=>s.slice(0,i))})(e,t);return W(n,ot),n},DC=(e,t)=>{const n=as(t,e);return Tt(n.reverse(),o=>I(o)).each(ot)},gT=(e,t,n,o,r)=>{if(I(n))return wr(n),mn(n.dom);0===ke(yr(r),i=>!I(i)).length&&I(t)&&cn(r,Lt("br"));const s=jn(n.dom,U.before(r.dom));return W(RC(t,o),i=>{cn(r,i)}),DC(e,t),s},hT=(e,t,n,o)=>{if(I(n)){if(I(t)){const i=Wo((a=>{const l=(c,d)=>Il(c).fold(()=>d,u=>o.isInline(Fe(u))?l(u,d.concat(Ni(u))):d);return l(a,[])})(n),(a,l)=>($d(a,l),l),yi());Ns(t),Et(t,i)}return ot(n),mn(t.dom)}const r=Uo(n.dom);return W(RC(t,o),s=>{Et(n,s)}),DC(e,t),r},BC=(e,t)=>{Ua(e,t.dom).bind(n=>w.from(n.getNode())).map(T).filter(os).each(ot)},LC=(e,t,n,o)=>{return BC(!0,t),BC(!1,n),(r=t,s=n,Lo(s,r)?((i,a)=>{const l=as(a,i);return w.from(l[l.length-1])})(s,r):w.none()).fold(se(hT,e,t,n,o),se(gT,e,t,n,o));var r,s},PC=(e,t,n,o,r)=>t?LC(e,o,n,r):LC(e,n,o,r),hh=(e,t)=>{const n=T(e.getBody());return(r=n.dom,s=t,i=e.selection.getRng(),i.collapsed?((a,l,c)=>{const d=gh(a,U.fromRangeStart(c)),u=d.bind(f=>uo(l,a,f.position).bind(p=>gh(a,p).map(g=>{return b=a,h=l,ut((v=g).position.getNode())&&!I(v.block)?Ua(!1,v.block.dom).bind(_=>_.isEqual(v.position)?uo(h,b,_).bind(C=>gh(b,C)):w.some(v)).getOr(v):v;var b,h,v})));return Kt(d,u,fT).filter(f=>{return!We((p=f).from.block,p.to.block)&&((p,g)=>{const b=T(p);return We(OC(b,g.from.block),OC(b,g.to.block))})(a,f)&&(p=>!1===st(p.from.block.dom)&&!1===st(p.to.block.dom))(f)&&(p=>{const g=b=>Bs(b)||ft(b.dom);return g(p.from.block)&&g(p.to.block)})(f);var p})})(r,s,i):w.none()).map(r=>()=>{PC(n,t,r.from.block,r.to.block,e.schema).each(s=>{e.selection.setRng(s.toRange())})});var r,s,i},MC=(e,t)=>{const n=T(t),o=se(We,e);return Mo(n,vi,o).isSome()},ph=(e,t)=>e.selection.isCollapsed()?w.none():(e=>{const t=T(e.getBody());return((n,o)=>{const r=jn(n.dom,U.fromRangeStart(o)).isNone(),s=Tn(n.dom,U.fromRangeEnd(o)).isNone();return!(MC(i=n,(a=o).startContainer)||MC(i,a.endContainer))&&r&&s;var i,a})(t,e.selection.getRng())?(n=e,w.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o,r)=>{const s=o.getRng();return Kt(Du(n,T(s.startContainer)),Du(n,T(s.endContainer)),(i,a)=>We(i,a)?w.none():w.some(()=>{s.deleteContents(),PC(n,!0,i,a,r).each(l=>{o.setRng(l.toRange())})})).getOr(w.none())})(t,e.selection,e.schema);var n})(e),ls=(e,t,n,o,r)=>w.from(t._selectionOverrides.showCaret(e,n,o,r)),Vc=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?w.none():w.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(t)),bh=(e,t,n)=>t.collapsed?((o,r,s)=>{const i=wf(1,o.getBody(),r),a=U.fromRangeStart(i),l=a.getNode();if(Cc(l))return ls(1,o,l,!a.isAtEnd(),!1);const c=a.getNode(!0);if(Cc(c))return ls(1,o,c,!1,!1);const d=$i(o.dom.getRoot(),a.getNode());return Cc(d)?ls(1,o,d,!1,s):w.none()})(e,t,n).getOr(t):t,bT=e=>Ks(e)||Bc(e),vT=e=>Ys(e)||Lc(e),IC=(e,t,n,o,r,s)=>{var i,a;ls(o,e,s.getNode(!r),r,!0).each(i=>{if(t.collapsed){const a=t.cloneRange();r?a.setEnd(i.startContainer,i.startOffset):a.setStart(i.endContainer,i.endOffset),a.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),i=e.dom,Y(a=n)&&0===a.data.length&&i.remove(a)},vh=(e,t)=>((n,o)=>{const r=n.selection.getRng();if(!Y(r.commonAncestorContainer))return w.none();const s=o?Jt.Forwards:Jt.Backwards,i=Or(n.getBody()),a=se(Ef,o?i.next:i.prev),l=o?bT:vT,c=Sc(s,n.getBody(),r),d=a(c),u=d&&po(o,d);if(!u||!gu(c,u))return w.none();if(l(u))return w.some(()=>IC(n,r,c.getNode(),s,o,u));const f=a(u);return f&&l(f)&&gu(u,f)?w.some(()=>IC(n,r,c.getNode(),s,o,f)):w.none()})(e,t),yh=(e,t)=>{const n=e.getBody();return t?mn(n).filter(Ks):Uo(n).filter(Ys)},_h=e=>{const t=e.selection.getRng();return!t.collapsed&&(yh(e,!0).exists(n=>n.isEqual(U.fromRangeStart(t)))||yh(e,!1).exists(n=>n.isEqual(U.fromRangeEnd(t))))},yo=Nr([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),FC=(e,t,n,o)=>uo(t,e,n).bind(r=>{return s=r.getNode(),Q(s)&&(vi(T(s))||bi(T(s)))||((i,a,l,c,d)=>{const u=f=>d.isInline(f.nodeName.toLowerCase())&&!Ar(l,c,i);return Qb(!a,l).fold(()=>Qb(a,c).fold(at,u),u)})(e,t,n,r,o)?w.none():t&&st(r.getNode())||!t&&st(r.getNode(!0))?((i,a,l,c)=>{const d=c.getNode(!a);return Du(T(i),T(l.getNode())).map(u=>I(u)?yo.remove(u.dom):yo.moveToElement(d)).orThunk(()=>w.some(yo.moveToElement(d)))})(e,t,n,r):t&&Ys(n)||!t&&Ks(n)?w.some(yo.moveToPosition(r)):w.none();var s}),jC=(e,t)=>w.from($i(e.getBody(),t)),$C=e=>{const t=e.dom,n=e.selection,o=$i(e.getBody(),n.getNode());if(Yn(o)&&t.isBlock(o)&&t.isEmpty(o)){const r=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(r),n.setRng(U.before(r).toRange())}return!0},Ch=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=e.selection.getNode();return jC(e,n).filter(st).fold(()=>((o,r,s,i)=>{const a=wf(r?1:-1,o,s),l=U.fromRangeStart(a),c=T(o);return!r&&Ys(l)?w.some(yo.remove(l.getNode(!0))):r&&Ks(l)?w.some(yo.remove(l.getNode())):!r&&Ks(l)&&ug(c,l,i)?PN(c,l,i).map(d=>yo.remove(d.getNode())):r&&Ys(l)&&dg(c,l,i)?MN(c,l,i).map(d=>yo.remove(d.getNode())):(d=o,p=i,((g,b)=>{const h=b.getNode(!g),v=g?"after":"before";return ie(h)&&h.getAttribute("data-mce-caret")===v})(u=r,f=l)?(g=u,b=f.getNode(!u),kt(b)?w.none():g&&st(b.nextSibling)?w.some(yo.moveToElement(b.nextSibling)):!g&&st(b.previousSibling)?w.some(yo.moveToElement(b.previousSibling)):w.none()).orThunk(()=>FC(d,u,f,p)):FC(d,u,f,p).bind(g=>((b,h,v)=>v.fold(_=>w.some(yo.remove(_)),_=>w.some(yo.moveToElement(_)),_=>Ar(h,_,b)?w.none():w.some(yo.moveToPosition(_))))(d,f,g)));var d,u,f,p,g,b})(e.getBody(),t,e.selection.getRng(),e.schema).map(o=>()=>{return o.fold((r=e,s=t,i=>(r._selectionOverrides.hideFakeCaret(),Fi(r,s,T(i)),!0)),((r,s)=>i=>{const a=s?U.before(i):U.after(i);return r.selection.setRng(a.toRange()),!0})(e,t),(r=>s=>(r.selection.setRng(s.toRange()),!0))(e));var r,s}),()=>w.some(Re))})(e,t):((n,o)=>{const r=n.selection.getNode();return st(r)&&!jo(r)?jC(n,r.parentNode).filter(st).fold(()=>w.some(()=>{var s;s=T(n.getBody()),W(Yt(s,".mce-offscreen-selection"),ot),Fi(n,o,T(n.selection.getNode())),bg(n)}),()=>w.some(Re)):_h(n)?w.some(()=>{dy(n,n.selection.getRng(),T(n.getBody()))}):w.none()})(e,t),wh=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=U.fromRangeStart(n.selection.getRng());return uo(o,n.getBody(),r).filter(s=>o?ON(s):RN(s)).bind(s=>Cf(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(e,t):w.none(),Za=Y,UC=e=>Za(e)&&e.data[0]===Mt,zC=e=>Za(e)&&e.data[e.data.length-1]===Mt,HC=e=>{var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Mt)},Qu=(e,t)=>e?(n=>{var o;if(Za(n.previousSibling))return zC(n.previousSibling)||n.previousSibling.appendData(Mt),n.previousSibling;if(Za(n))return UC(n)||n.insertData(0,Mt),n;{const r=HC(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(t):(n=>{var o,r;if(Za(n.nextSibling))return UC(n.nextSibling)||n.nextSibling.insertData(0,Mt),n.nextSibling;if(Za(n))return zC(n)||n.appendData(Mt),n;{const s=HC(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(t),_T=se(Qu,!0),CT=se(Qu,!1),qC=(e,t)=>Y(e.container())?Qu(t,e.container()):Qu(t,e.getNode()),WC=(e,t)=>{const n=t.get();return n&&e.container()===n&&Zo(n)},Eh=(e,t)=>t.fold(n=>{Ri(e.get());const o=_T(n);return e.set(o),w.some(U(o,o.length-1))},n=>mn(n).map(o=>{if(WC(o,e)){const r=e.get();return U(r,1)}{Ri(e.get());const r=qC(o,!0);return e.set(r),U(r,1)}}),n=>Uo(n).map(o=>{if(WC(o,e)){const r=e.get();return U(r,r.length-1)}{Ri(e.get());const r=qC(o,!1);return e.set(r),U(r,r.length-1)}}),n=>{Ri(e.get());const o=CT(n);return e.set(o),w.some(U(o,1))}),VC=(e,t)=>{for(let n=0;n<e.length;n++){const o=e[n].apply(null,t);if(o.isSome())return o}return w.none()},_n=Nr([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),KC=(e,t)=>Hs(t,e)||e,wT=(e,t,n)=>{const o=sy(n),r=KC(t,o.container());return Xs(e,r,o).fold(()=>Tn(r,o).bind(se(Xs,e,r)).map(s=>_n.before(s)),w.none)},ET=(e,t)=>null===Bi(e,t),YC=(e,t,n)=>Xs(e,t,n).filter(se(ET,t)),xT=(e,t,n)=>{const o=iy(n);return YC(e,t,o).bind(r=>jn(r,o).isNone()?w.some(_n.start(r)):w.none())},kT=(e,t,n)=>{const o=sy(n);return YC(e,t,o).bind(r=>Tn(r,o).isNone()?w.some(_n.end(r)):w.none())},ST=(e,t,n)=>{const o=iy(n),r=KC(t,o.container());return Xs(e,r,o).fold(()=>jn(r,o).bind(se(Xs,e,r)).map(s=>_n.after(s)),w.none)},XC=e=>!ry(xh(e)),Lr=(e,t,n)=>VC([wT,xT,kT,ST],[e,t,n]).filter(XC),xh=e=>e.fold(tn,tn,tn,tn),GC=e=>e.fold(Z("before"),Z("start"),Z("end"),Z("after")),Ju=e=>e.fold(_n.before,_n.before,_n.after,_n.after),kh=e=>e.fold(_n.start,_n.start,_n.end,_n.end),NT=(e,t,n,o,r,s)=>Kt(Xs(t,n,o),Xs(t,n,r),(i,a)=>i!==a&&((l,c,d)=>{const u=Hs(c,l),f=Hs(d,l);return Q(u)&&u===f})(n,i,a)?_n.after(e?i:a):s).getOr(s),AT=(e,t)=>e.fold(Ct,n=>{return r=t,!(GC(o=n)===GC(r)&&xh(o)===xh(r));var o,r}),TT=(e,t)=>e?t.fold(So(w.some,_n.start),w.none,So(w.some,_n.after),w.none):t.fold(w.none,So(w.some,_n.before),w.none,So(w.some,_n.end)),QC=(e,t,n)=>{const o=e?1:-1;return t.setRng(U(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0};var Pr;!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(Pr||(Pr={}));const Zu=(e,t)=>e===Jt.Backwards?ti(t):t,OT=(e,t,n)=>e===Jt.Forwards?t.next(n):t.prev(n),RT=(e,t,n,o)=>ut(o.getNode(t===Jt.Forwards))?Pr.Br:!1===Ar(n,o)?Pr.Block:Pr.Wrap,JC=(e,t,n,o)=>{const r=Or(n);let s=o;const i=[];for(;s;){const a=OT(t,r,s);if(!a)break;if(ut(a.getNode(!1)))return t===Jt.Forwards?{positions:Zu(t,i).concat([a]),breakType:Pr.Br,breakAt:w.some(a)}:{positions:Zu(t,i),breakType:Pr.Br,breakAt:w.some(a)};if(a.isVisible()){if(e(s,a)){const l=RT(0,t,s,a);return{positions:Zu(t,i),breakType:l,breakAt:w.some(a)}}i.push(a),s=a}else s=a}return{positions:Zu(t,i),breakType:Pr.Eol,breakAt:w.none()}},ZC=(e,t,n,o)=>t(n,o).breakAt.map(r=>{const s=t(n,r).positions;return e===Jt.Backwards?s.concat(r):[r].concat(s)}).getOr([]),Sh=(e,t)=>$t(e,(n,o)=>n.fold(()=>w.some(o),r=>Kt(Ut(r.getClientRects()),Ut(o.getClientRects()),(s,i)=>{const a=Math.abs(t-s.left);return Math.abs(t-i.left)<=a?o:r}).or(n)),w.none()),em=(e,t)=>Ut(t.getClientRects()).bind(n=>Sh(e,n.left)),Kc=se(JC,U.isAbove,-1),Yc=se(JC,U.isBelow,1),ew=se(ZC,-1,Kc),tw=se(ZC,1,Yc),nw=(e,t)=>Kc(e,t).breakAt.isNone(),ow=(e,t)=>Yc(e,t).breakAt.isNone(),DT=(e,t)=>em(ew(e,t),t),BT=(e,t)=>em(tw(e,t),t),LT=st,rw=(e,t)=>Math.abs(e.left-t),sw=(e,t)=>Math.abs(e.right-t),iw=(e,t)=>ra(e,(n,o)=>{const r=Math.min(rw(n,t),sw(n,t)),s=Math.min(rw(o,t),sw(o,t));return s===r&&gs(o,"node")&&LT(o.node)||s<r?o:n}),PT=e=>{const t=n=>ze(n,o=>{const r=Ti(o);return r.node=e,r});if(ie(e))return t(e.getClientRects());if(Y(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},aw=e=>zn(e,PT);var Xc;!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(Xc||(Xc={}));const lw=(e,t,n,o,r,s)=>{let i=0;const a=[],l=u=>{let f=aw([u]);-1===e&&(f=f.reverse());for(let p=0;p<f.length;p++){const g=f[p];if(!n(g,c)){if(a.length>0&&t(g,zr(a))&&i++,g.line=i,r(g))return!0;a.push(g)}}return!1},c=zr(s.getClientRects());if(!c)return a;const d=s.getNode();return d&&(l(d),((u,f,p,g)=>{let b=g;for(;b=Ec(b,u,Zl,f);)if(p(b))return})(e,o,l,d)),a},MT=se(lw,Xc.Up,hc,pc),IT=se(lw,Xc.Down,pc,hc),cw=e=>zr(e.getClientRects()),dw=e=>t=>t.line>e,Nh=e=>t=>t.line===e,cs=(e,t)=>{e.selection.setRng(t),Dc(e,e.selection.getRng())},Ah=(e,t,n)=>w.some(bh(e,t,n)),uw=(e,t,n,o,r,s)=>{const i=t===Jt.Forwards,a=Or(e.getBody()),l=se(Ef,i?a.next:a.prev),c=i?o:r;if(!n.collapsed){const g=iu(n);if(s(g))return ls(t,e,g,t===Jt.Backwards,!1);if(_h(e)){const b=n.cloneRange();return b.collapse(t===Jt.Backwards),w.from(b)}}const d=Sc(t,e.getBody(),n);if(c(d))return Vc(e,d.getNode(!i));let u=l(d);const f=Gd(n);if(!u)return f?w.some(n):w.none();if(u=po(i,u),c(u))return ls(t,e,u.getNode(!i),i,!1);const p=l(u);return p&&c(p)&&gu(u,p)?ls(t,e,p.getNode(!i),i,!1):f?Ah(e,u.toRange(),!1):w.none()},mw=(e,t,n,o,r,s)=>{const i=Sc(t,e.getBody(),n),a=zr(i.getClientRects()),l=t===Xc.Down,c=e.getBody();if(!a)return w.none();if(_h(e)){const b=l?U.fromRangeEnd(n):U.fromRangeStart(n);return(l?BT:DT)(c,b).orThunk(()=>w.from(b)).map(h=>h.toRange())}const d=(l?IT:MT)(c,dw(1),i),u=ke(d,Nh(1)),f=a.left,p=iw(u,f);if(p&&s(p.node)){const b=Math.abs(f-p.left),h=Math.abs(f-p.right);return ls(t,e,p.node,b<h,!1)}let g;if(g=o(i)?i.getNode():r(i)?i.getNode(!0):iu(n),g){const b=((v,_,C,k)=>{const E=Or(_);let N,R,L,P;const F=[];let A=0;1===v?(N=E.next,R=pc,L=hc,P=U.after(k)):(N=E.prev,R=hc,L=pc,P=U.before(k));const D=cw(P);do{if(!P.isVisible())continue;const M=cw(P);if(L(M,D))continue;F.length>0&&R(M,zr(F))&&A++;const z=Ti(M);if(z.position=P,z.line=A,C(z))return F;F.push(z)}while(P=N(P));return F})(t,c,dw(1),g);let h=iw(ke(b,Nh(1)),f);if(h||(h=zr(ke(b,Nh(0))),h))return Ah(e,h.position.toRange(),!1)}return 0===u.length?Th(e,l).filter(l?r:o).map(b=>bh(e,b.toRange(),!1)):w.none()},Th=(e,t)=>{const n=e.selection.getRng(),o=t?U.fromRangeEnd(n):U.fromRangeStart(n),r=(s=o.container(),i=e.getBody(),Mo(T(s),a=>MS(a.dom),a=>a.dom===i).map(a=>a.dom).getOr(i));var s,i;if(t){const a=Yc(r,o);return Hn(a.positions)}{const a=Kc(r,o);return Ut(a.positions)}},fw=(e,t,n)=>Th(e,t).filter(n).exists(o=>(e.selection.setRng(o.toRange()),!0)),tm=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},gw=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},hw=(e,t,n)=>Eh(t,n).map(o=>(tm(e,o),n)),pw=(e,t,n)=>!!_c(e)&&((e,t,n)=>{const o=e.getBody(),r=((s,i,a)=>{const l=U.fromRangeStart(s);if(s.collapsed)return l;{const c=U.fromRangeEnd(s);return a?jn(i,c).getOr(c):Tn(i,l).getOr(l)}})(e.selection.getRng(),o,n);return((s,i,a,l)=>{const c=po(s,l),d=Lr(i,a,c);return Lr(i,a,c).bind(se(TT,s)).orThunk(()=>((u,f,p,g,b)=>{const h=po(u,b);return uo(u,p,h).map(se(po,u)).fold(()=>g.map(Ju),v=>Lr(f,p,v).map(se(NT,u,f,p,h,v)).filter(se(AT,g))).filter(XC)})(s,i,a,d,l))})(n,se(ji,e),o,r).bind(s=>hw(e,t,s))})(e,t,n).isSome(),bw=(e,t,n)=>!!_c(t)&&((o,r)=>{const s=r.selection.getRng(),i=o?U.fromRangeEnd(s):U.fromRangeStart(s);return!!Ke(r.selection.getSel().modify)&&(o&&_i(i)?QC(!0,r.selection,i):!(o||!Aa(i))&&QC(!1,r.selection,i))})(e,t),$T=se(bw,!0),UT=se(bw,!1),nm=(e,t,n)=>{if(_c(e)){const o=Th(e,t).getOrThunk(()=>{const r=e.selection.getRng();return t?U.fromRangeEnd(r):U.fromRangeStart(r)});return Lr(se(ji,e),e.getBody(),o).exists(r=>{const s=Ju(r);return Eh(n,s).exists(i=>(tm(e,i),!0))})}return!1},vw=(e,t)=>n=>Eh(t,n).map(o=>()=>tm(e,o)),yw=(e,t,n,o)=>{const r=e.getBody(),s=se(ji,e);e.undoManager.ignore(()=>{e.selection.setRng(((i,a)=>{const l=document.createRange();return l.setStart(i.container(),i.offset()),l.setEnd(a.container(),a.offset()),l})(n,o)),pg(e),Lr(s,r,U.fromRangeStart(e.selection.getRng())).map(kh).bind(vw(e,t)).each(ee)}),e.nodeChanged()},Oh=(e,t,n)=>{if(e.selection.isCollapsed()&&_c(e)){const o=U.fromRangeStart(e.selection.getRng());return((r,s,i,a)=>{const l=(u=r.getBody(),f=a.container(),Hs(f,u)||u),c=se(ji,r),d=Lr(c,l,a);var u,f;return d.bind(u=>i?u.fold(Z(w.some(kh(u))),w.none,Z(w.some(Ju(u))),w.none):u.fold(w.none,Z(w.some(Ju(u))),w.none,Z(w.some(kh(u))))).map(vw(r,s)).getOrThunk(()=>{const u=$a(i,l,a),f=u.bind(p=>Lr(c,l,p));return Kt(d,f,()=>Xs(c,l,a).bind(p=>{return Kt(mn(g=p),Uo(g),(b,h)=>{const v=po(!0,b),_=po(!1,h);return Tn(g,v).forall(C=>C.isEqual(_))}).getOr(!0)?w.some(()=>{Fi(r,i,T(p))}):w.none();var g})).getOrThunk(()=>f.bind(()=>u.map(p=>()=>{i?yw(r,s,a,p):yw(r,s,p,a)})))})})(e,t,n,o)}return w.none()},_w=(e,t)=>{const n=T(e.getBody()),o=T(e.selection.getStart()),r=as(o,n);return ei(r,t).fold(Z(r),s=>r.slice(0,s))},zT=e=>1===jl(e),Cw=(e,t)=>{const n=se(Iy,e);return zn(t,o=>n(o)?[o.dom]:[])},ww=e=>{const t=_w(n=e,o=>n.schema.isBlock(Fe(o)));var n;return Cw(e,t)},Ew=(e,t)=>{const n=e.selection.getStart(),o=((r,s)=>{const i=s.parentElement;return ut(s)&&!ct(i)&&r.dom.isEmpty(i)})(e,n)||Uf(T(n))?My(n,t):((r,s)=>{const{caretContainer:i,caretPosition:a}=Py(s);return r.insertNode(i.dom),a})(e.selection.getRng(),t);e.selection.setRng(o.toRange())},xw=e=>Y(e.startContainer),Rh=(e,t)=>e.selection.isCollapsed()?((e,t)=>{const n=ke(_w(o=e,r=>o.schema.isBlock(Fe(r))||jl(r)>1),zT);var o;return Hn(n).bind(o=>{const r=U.fromRangeStart(e.selection.getRng());return ly(t,r,o.dom)&&!Uf(o)?w.some(()=>((s,i,a,l)=>{const c=Cw(i,l);if(0===c.length)Fi(i,s,a);else{const d=My(a.dom,c);i.selection.setRng(d.toRange())}})(t,e,o,n)):w.none()})})(e,t):(n=>{if((e=>{const t=e.selection.getRng();return 0===(n=t).startOffset&&xw(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!ct(r)&&Iy(n,T(r))})(e,t)&&(n=>{return(r=>{const s=r.startContainer.parentNode,i=r.endContainer.parentNode;return!ct(s)&&!ct(i)&&s.isEqualNode(i)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===(Y(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(t);var n})(n)){const o=ww(n);return w.some(()=>{pg(n),((r,s)=>{const i=$r(s,ww(r));i.length>0&&Ew(r,i)})(n,o)})}return w.none()})(e),Gc=e=>((t=>{const n=t.selection.getRng();return n.collapsed&&(xw(n)||t.dom.isEmpty(n.startContainer))&&!((e,t)=>Mo(e,n=>mo(n.dom),n=>t.isBlock(Fe(n))).isSome())(T((o=t).selection.getStart()),o.schema);var o})(e)&&Ew(e,[]),!0),Dh=(e,t,n)=>Q(n)?w.some(()=>{e._selectionOverrides.hideFakeCaret(),Fi(e,t,T(n))}):w.none(),Bh=(e,t)=>e.selection.isCollapsed()?((n,o)=>{const r=o?Bc:Lc,i=Sc(o?Jt.Forwards:Jt.Backwards,n.getBody(),n.selection.getRng());return r(i)?Dh(n,o,i.getNode(!o)):w.from(po(o,i)).filter(a=>r(a)&&gu(i,a)).bind(a=>Dh(n,o,a.getNode(!o)))})(e,t):((n,o)=>{const r=n.selection.getNode();return $o(r)?Dh(n,o,r):w.none()})(e,t),Lh=e=>ri(e??"").getOr(0),kw=(e,t)=>(e||"table"===Fe(t)?"margin":"padding")+("rtl"===Kn(t,"direction")?"-right":"-left"),Sw=e=>{const t=Aw(e);return!e.mode.isReadOnly()&&(t.length>1||(n=e,ur(t,r=>{const s=kw(Ob(n),r),i=va(r,s).map(Lh).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&i>0})));var n},Nw=e=>Jo(e)||bi(e),Aw=e=>ke(mi(e.selection.getSelectedBlocks()),t=>!Nw(t)&&!Vn(t).exists(Nw)&&Io(t,n=>Yn(n.dom)||st(n.dom)).exists(n=>Yn(n.dom))),Tw=(e,t)=>{var n,o;const{dom:r}=e,s=Tk(e),i=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",a=Lh(s),l=Ob(e);W(Aw(e),c=>{((d,u,f,p,g,b)=>{const h=kw(f,T(b)),v=Lh(d.getStyle(b,h));if("outdent"===u){const _=Math.max(0,v-p);d.setStyle(b,h,_?_+g:"")}else d.setStyle(b,h,v+p+g)})(r,t,l,a,i,c.dom)})},Ow=e=>Tw(e,"outdent"),Rw=e=>{if(e.selection.isCollapsed()&&Sw(e)){const t=e.dom,n=e.selection.getRng(),o=U.fromRangeStart(n),r=t.getParent(n.startContainer,t.isBlock);if(null!==r&&cg(T(r),o,e.schema))return w.some(()=>Ow(e))}return w.none()},Dw=(e,t,n)=>ms([Rw,Ch,vh,(o,r)=>Oh(o,t,r),hh,kg,wh,Bh,ph,Rh],o=>o(e,n)).filter(o=>e.selection.isEditable()),Bw=e=>void 0===e.touches||1!==e.touches.length?w.none():w.some(e.touches[0]),Ph=(e,t)=>Oe(e,t.nodeName),KT=(e,t)=>!!Y(t)||!!ie(t)&&!(Ph(e.getBlockElements(),t)||fo(t)||Ue(e,t)||J(t)),YT=(e,t)=>{if(Y(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||Ph(e,t.nextSibling)||J(t.nextSibling)}return!1},Lw=e=>e.dom.create(un(e),yc(e)),XT=e=>{const t=e.dom,n=e.selection,o=e.schema,r=o.getBlockElements(),s=n.getStart(),i=e.getBody();let a,l,c=!1;const d=un(e);if(!s||!ie(s))return;const u=i.nodeName.toLowerCase();if(!o.isValidChild(u,d.toLowerCase())||(C=r,k=i,dt(j0(T(s),T(k)),N=>Ph(C,N.dom))))return;var C,k;const f=n.getRng(),{startContainer:p,startOffset:g,endContainer:b,endOffset:h}=f,v=Ii(e);let _=i.firstChild;for(;_;)if(ie(_)&&mt(o,_),KT(o,_)){if(YT(r,_)){l=_,_=_.nextSibling,t.remove(l);continue}a||(a=Lw(e),i.insertBefore(a,_),c=!0),l=_,_=_.nextSibling,a.appendChild(l)}else a=null,_=_.nextSibling;c&&v&&(f.setStart(p,g),f.setEnd(b,h),n.setRng(f),e.nodeChanged())},Pw=(e,t,n)=>{const o=T(Lw(e)),r=yi();Et(o,r),n(t,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},Mw=e=>t=>-1!==(" "+t.attr("class")+" ").indexOf(e),GT=(e,t,n)=>function(o){const r=arguments,s=r[r.length-2],i=s>0?t.charAt(s-1):"";if('"'===i)return o;if(">"===i){const a=t.lastIndexOf("<",s);if(-1!==a&&-1!==t.substring(a,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(r[0])+'">'+e.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},Iw=(e,t)=>{t.hasAttribute("data-mce-caret")&&(wi(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},QT=(e,t)=>{const n=ks(T(e.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void Iw(e,n)):void(Ql(n)&&(Iw(e,n),e.undoManager.add()))},Fw=st,jw=(e,t,n)=>{const o=Or(e.getBody()),r=se(Ef,1===t?o.next:o.prev);if(n.collapsed){const s=e.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(U.fromRangeStart(n))){const i=T((a=>{const l=a.dom.create(un(a));return l.innerHTML='<br data-mce-bogus="1">',l})(e));1===t?Yo(T(s),i):cn(T(s),i),e.selection.select(i.dom,!0),e.selection.collapse()}}},$w=(e,t)=>((n,o)=>{const r=o?Jt.Forwards:Jt.Backwards,s=n.selection.getRng();return(i=r,a=n,l=s,uw(a,i,l,Ks,Ys,Fw)).orThunk(()=>(jw(n,r,s),w.none()));var i,a,l})(e,((n,o)=>{const r=o?n.getEnd(!0):n.getStart(!0);return ry(r)?!o:o})(e.selection,t)).exists(n=>(cs(e,n),!0)),Uw=(e,t)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(i=r,a=n,l=s,mw(a,i,l,c=>Ks(c)||I0(c),c=>Ys(c)||F0(c),Fw)).orThunk(()=>(jw(n,r,s),w.none()));var i,a,l})(e,t).exists(n=>(cs(e,n),!0)),zw=(e,t)=>fw(e,t,t?Ys:Ks),om=(e,t)=>yh(e,!t).map(n=>{const o=n.toRange(),r=e.selection.getRng();return t?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(cs(e,n),!0)),JT=e=>ae(["figcaption"],Fe(e)),Hw=(e,t)=>!!e.selection.isCollapsed()&&((n,o)=>{const r=T(n.getBody()),s=U.fromRangeStart(n.selection.getRng());return((i,a,l)=>{const c=se(We,a);return Io(T(i.container()),d=>l.isBlock(Fe(d)),c).filter(JT)})(s,r,n.schema).exists(()=>{if(i=r,l=s,o?ow(i.dom,l):nw(i.dom,l)){const i=Pw(n,r,o?Et:Wl);return n.selection.setRng(i),!0}var i,l;return!1})})(e,t),qw=(e,t)=>{return n=e,t?w.from(n.dom.getParent(n.selection.getNode(),"details")).map(r=>((s,i)=>{const a=s.selection.getRng(),l=U.fromRangeStart(a);return!(s.getBody().lastChild!==i||!ow(i,l)||(s.execCommand("InsertNewBlockAfter"),0))})(n,r)).getOr(!1):w.from(n.dom.getParent(n.selection.getNode(),"summary")).bind(r=>w.from(n.dom.getParent(r,"details")).map(s=>((i,a,l)=>{const c=i.selection.getRng(),d=U.fromRangeStart(c);return!(i.getBody().firstChild!==a||!nw(l,d)||(i.execCommand("InsertNewBlockBefore"),0))})(n,s,r))).getOr(!1);var n},Ww={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Vw=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,Ee=(e,...t)=>()=>e.apply(null,t),Qc=(e,t)=>{return Tt((o=t,zn(ze(e,s=>({...Ww,...s})),r=>Vw(r,o)?[r]:[])),n=>n.action());var o},Kw=(e,t)=>{return ms((o=t,zn(ze(e,s=>({...Ww,...s})),r=>Vw(r,o)?[r]:[])),n=>n.action());var o},Yw=(e,t)=>{const n=t?Jt.Forwards:Jt.Backwards,o=e.selection.getRng();return uw(e,n,o,Bc,Lc,$o).exists(r=>(cs(e,r),!0))},Xw=(e,t)=>{const n=t?1:-1,o=e.selection.getRng();return mw(e,n,o,Bc,Lc,$o).exists(r=>(cs(e,r),!0))},Gw=(e,t)=>fw(e,t,t?Lc:Bc),Qw=Nr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Jc={...Qw,none:e=>Qw.none(e)},Jw=(e,t,n)=>zn(Nt(e),o=>rn(o,t)?n(o)?[o]:[]:Jw(o,t,n)),Zw=(e,t)=>Gr(e,"table",t),Mh=(e,t,n,o,r=Ct)=>{const s=1===o;if(!s&&n<=0)return Jc.first(e[0]);if(s&&n>=e.length-1)return Jc.last(e[e.length-1]);{const i=n+o,a=e[i];return r(a)?Jc.middle(t,a):Mh(e,t,i,o,r)}},e1=(e,t)=>Zw(e,t).bind(n=>{const o=Jw(n,"th,td",Ct);return ei(o,r=>We(e,r)).map(r=>({index:r,all:o}))}),t1=(e,t,n,o,r)=>{const s=Yt(T(n),"td,th,caption").map(a=>a.dom);var a;return((a,l,c)=>$t(a,(d,u)=>d.fold(()=>w.some(u),f=>{const p=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-c)),g=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-c));return w.some(g<p?u:f)}),w.none()))(ke((a=e,zn(s,c=>{const d={left:(u=Ti(c.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:d.left,y:a(d),cell:c},{x:d.right,y:a(d),cell:c}]})),a=>t(a,r)),o,r).map(a=>a.cell)},ZT=se(t1,e=>e.bottom,(e,t)=>e.y<t),eO=se(t1,e=>e.top,(e,t)=>e.y>t),n1=(e,t,n)=>{const o=e(t,n);return(r=o).breakType===Pr.Wrap&&0===r.positions.length||!ut(n.getNode())&&(r=>r.breakType===Pr.Br&&1===r.positions.length)(o)?!((r,s,i)=>i.breakAt.exists(a=>r(s,a).breakAt.isSome()))(e,t,o):o.breakAt.isNone();var r},tO=se(n1,Kc),nO=se(n1,Yc),oO=(e,t,n,o)=>{const r=e.selection.getRng(),s=t?1:-1;return!(!Wb()||!((i,a,l)=>{const c=U.fromRangeStart(a);return Ua(!i,l).exists(d=>d.isEqual(c))})(t,r,n)||(ls(s,e,n,!t,!1).each(i=>{cs(e,i)}),0))},o1=(e,t,n)=>{const o=((s,i)=>{const a=i.getNode(s);return Go(a)?w.some(a):w.none()})(!!t,n),r=!1===t;o.fold(()=>cs(e,n.toRange()),s=>Ua(r,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>cs(e,n.toRange()),i=>{return a=t,c=s,void(l=e).undoManager.transact(()=>{const d=a?Yo:cn,u=Pw(l,T(c),d);cs(l,u)});var a,l,c}))},rO=(e,t,n,o)=>{const r=e.selection.getRng(),s=U.fromRangeStart(r),i=e.getBody();if(!t&&tO(o,s)){const a=(l=i,(u=c=n,f=d=s,Ut(f.getClientRects()).bind(p=>ZT(u,p.left,p.top)).bind(p=>{return em(Uo(g=p).map(b=>Kc(g,b).positions.concat(b)).getOr([]),f);var g})).orThunk(()=>Ut(d.getClientRects()).bind(u=>Sh(ew(l,U.before(c)),u.left))).getOr(U.before(c)));return o1(e,t,a),!0}var l,c,d,u,f;if(t&&nO(o,s)){const a=((l,c,d)=>((u,f)=>Hn(f.getClientRects()).bind(p=>eO(u,p.left,p.top)).bind(p=>{return em(mn(g=p).map(b=>[b].concat(Yc(g,b).positions)).getOr([]),f);var g}))(c,d).orThunk(()=>Ut(d.getClientRects()).bind(u=>Sh(tw(l,U.after(c)),u.left))).getOr(U.after(c)))(i,n,s);return o1(e,t,a),!0}return!1},r1=(e,t,n)=>w.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(o=>w.from(e.dom.getParent(o,"table")).map(r=>n(e,t,r,o))).getOr(!1),s1=(e,t)=>r1(e,t,oO),Ih=(e,t)=>r1(e,t,rO),i1=(e,t,n)=>n.fold(w.none,w.none,(o,r)=>{return(s=r,Fd(s,v0)).map(i=>{return(e=>{const t=Va.getWin(e).dom,n=(r,s,i,a)=>Hf(t,r,s,i,a),o=e.match({domRange:s=>{const i=T(s.startContainer),a=T(s.endContainer);return Wv(i,s.startOffset,a,s.endOffset)},relative:ZS,exact:Wv});return((r,s)=>{var a;return((a,l)=>{const c=l.ltr();return c.collapsed?l.rtl().filter(d=>!1===d.collapsed).map(d=>Rc.rtl(T(d.endContainer),d.endOffset,T(d.startContainer),d.startOffset)).getOrThunk(()=>Hv(0,Rc.ltr,c)):Hv(0,Rc.ltr,c)})(0,(a=r,s.match({domRange:c=>({ltr:Z(c),rtl:w.none}),relative:(c,d)=>({ltr:Vo(()=>zv(a,c,d)),rtl:Vo(()=>w.some(zv(a,d,c)))}),exact:(c,d,u,f)=>({ltr:Vo(()=>Hf(a,c,d,u,f)),rtl:Vo(()=>w.some(Hf(a,u,f,c,d)))})})))})(t,o).match({ltr:n,rtl:n})})(Va.exact(a=i,0,a,0));var a});var s},o=>(e.execCommand("mceTableInsertRowAfter"),a1(e,t,o))),a1=(e,t,n)=>{return i1(e,t,(r=Qr,e1(o=n,void 0).fold(()=>Jc.none(o),s=>Mh(s.all,o,s.index,1,r))));var o,r},sO=(e,t,n)=>{return i1(e,t,(r=Qr,e1(o=n,void 0).fold(()=>Jc.none(),s=>Mh(s.all,o,s.index,-1,r))));var o,r},l1=(e,t)=>{const n=["table","li","dl"],o=T(e.getBody()),r=i=>{const a=Fe(i);return We(i,o)||ae(n,a)},s=e.selection.getRng();return(i=T(t?s.endContainer:s.startContainer),a=r,((l,c,d=at)=>d(c)?w.none():ae(l,Fe(c))?w.some(c):ci(c,l.join(","),u=>rn(u,"table")||d(u)))(["td","th"],i,a)).map(i=>(Zw(i,r).each(a=>{e.model.table.clearSelectedCells(a.dom)}),e.selection.collapse(!t),(t?a1:sO)(e,r,i).each(a=>{e.selection.setRng(a)}),!0)).getOr(!1);var i,a},ir=(e,t)=>({container:e,offset:t}),rm=rt.DOM,sm=e=>t=>e===t?-1:0,Fh=(e,t,n)=>{if(Y(e)&&t>=0)return w.some(ir(e,t));{const o=Ai(rm);return w.from(o.backwards(e,t,sm(e),n)).map(r=>ir(r.container,r.container.data.length))}},jh=(e,t,n)=>{if(!Y(e))return w.none();if(t>=0&&t<=e.data.length)return w.some(ir(e,t));{const r=Ai(rm);return w.from(r.backwards(e,t,sm(e),n)).bind(s=>jh(s.container,t+s.container.data.length,n))}},c1=(e,t,n)=>{if(!Y(e))return w.none();const o=e.data;if(t<=o.length)return w.some(ir(e,t));{const r=Ai(rm);return w.from(r.forwards(e,t,sm(e),n)).bind(s=>c1(s.container,t-o.length,n))}},$h=(e,t,n,o,r)=>{const s=Ai(e,(i=e,a=>i.isBlock(a)||ae(["BR","IMG","HR","INPUT"],a.nodeName)||"false"===i.getContentEditable(a)));var i;return w.from(s.backwards(t,n,o,r))},d1=e=>bn(e.toString().replace(/\u00A0/g," ")),u1=e=>""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e),Uh=(e,t)=>e.substring(t.length),m1=(e,t,n,o=0)=>{return(r=T(t.startContainer),Gr(r,y0)).fold(()=>((s,i,a,l=0)=>{if(!(c=i).collapsed||!Y(c.startContainer))return w.none();var c;const d={text:"",offset:0},u=s.getParent(i.startContainer,s.isBlock)||s.getRoot();return $h(s,i.startContainer,i.startOffset,(f,p,g)=>(d.text=g+d.text,d.offset+=p,((b,h,v)=>{let _;const C=v.charAt(0);for(_=h-1;_>=0;_--){const k=b.charAt(_);if(u1(k))return w.none();if(C===k&&St(b,v,_,h))break}return w.some(_)})(d.text,d.offset,a).getOr(p)),u).bind(f=>{const p=i.cloneRange();if(p.setStart(f.container,f.offset),p.setEnd(i.endContainer,i.endOffset),p.collapsed)return w.none();const g=d1(p);return 0!==g.lastIndexOf(a)||Uh(g,a).length<l?w.none():w.some({text:Uh(g,a),range:p,trigger:a})})})(e,t,n,o),s=>{const i=e.createRng();i.selectNode(s.dom);const a=d1(i);return w.some({range:i,text:Uh(a,n),trigger:n})});var r},f1=e=>{if(3===e.nodeType)return ir(e,e.data.length);{const t=e.childNodes;return t.length>0?f1(t[t.length-1]):ir(e,t.length)}},g1=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?g1(n[t],0):n.length>0&&1===e.nodeType&&n.length===t?f1(n[n.length-1]):ir(e,t)},h1=(e,t,n,o={})=>{var r;const s=t(),i=null!==(r=e.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",a=ke(s.lookupByTrigger(n.trigger),c=>n.text.length>=c.minChars&&c.matches.getOrThunk(()=>{return d=e.dom,u=>{const f=g1(u.startContainer,u.startOffset);return!((p,g)=>{var b;const h=null!==(b=p.getParent(g.container,p.isBlock))&&void 0!==b?b:p.getRoot();return $h(p,g.container,g.offset,(v,_)=>0===_?-1:_,h).filter(v=>{const _=v.container.data.charAt(v.offset-1);return!u1(_)}).isSome()})(d,f)};var d})(n.range,i,n.text));if(0===a.length)return w.none();const l=Promise.all(ze(a,c=>c.fetch(n.text,c.maxResults,o).then(d=>({matchText:n.text,items:d,columns:c.columns,onAction:c.onAction,highlightOn:c.highlightOn}))));return w.some({lookupData:l,context:n})};var Mr;!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Mr||(Mr={}));const zh=(e,t,n)=>e.stype===Mr.Error?t(e.serror):n(e.svalue),el=e=>({stype:Mr.Value,svalue:e}),Zc=e=>({stype:Mr.Error,serror:e}),iO=zh,Hh=e=>Vt(e)&&on(e).length>100?" removed due to size":JSON.stringify(e,null,2),im=(e,t)=>Zc([{path:e,getErrorInfo:t}]),p1=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<t.length;o++){const r=t[o];for(const s in r)Oe(r,s)&&(n[s]=e(n[s],r[s]))}return n},qh=p1((e,t)=>Rn(e)&&Rn(t)?qh(e,t):t),b1=(p1((e,t)=>t),e=>({tag:"defaultedThunk",process:Z(e)})),v1=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Wh=e=>({extract:(t,n)=>{return(o=e(n)).stype===Mr.Error?im(t,Z(o.serror)):o;var o},toString:Z("val")}),cO=Wh(el),y1=(e,t,n,o)=>o(nt(e,t).getOrThunk(()=>n(e))),dO=(e,t,n,o,r)=>{const s=a=>r.extract(t.concat([o]),a),i=a=>a.fold(()=>el(w.none()),l=>{return(d=r.extract(t.concat([o]),l)).stype===Mr.Value?{stype:Mr.Value,svalue:(0,w.some)(d.svalue)}:d;var d});switch(e.tag){case"required":return a=t,d=s,nt(l=n,c=o).fold(()=>{return f=c,p=l,im(a,()=>'Could not find valid *required* value for "'+f+'" in '+Hh(p));var f,p},d);case"defaultedThunk":return y1(n,o,e.process,s);case"option":return((a,l,c)=>c(nt(a,l)))(n,o,i);case"defaultedOptionThunk":return((a,l,c,d)=>d(nt(a,l).map(u=>!0===u?c(a):u)))(n,o,e.process,i);case"mergeWithThunk":return y1(n,o,Z({}),a=>{const l=qh(e.process(n),a);return s(l)})}var a,l,c,d},Vh=e=>({extract:(t,n)=>((o,r,s)=>{const i={},a=[];for(const l of s)v1(l,(c,d,u,f)=>{const p=dO(u,o,r,c,f);iO(p,g=>{a.push(...g)},g=>{i[d]=g})},(c,d)=>{i[c]=d(r)});return a.length>0?Zc(a):el(i)})(t,n,e),toString:()=>"obj{\n"+ze(e,n=>v1(n,(o,r,s,i)=>o+" -> "+i.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),_1=e=>({extract:(t,n)=>(e=>{const t=(o=>{const r=[],s=[];return W(o,i=>{zh(i,a=>s.push(a),a=>r.push(a))}),{values:r,errors:s}})(e);return t.errors.length>0?(n=t.errors,So(Zc,bd)(n)):el(t.values);var n})(ze(n,(r,s)=>e.extract(t.concat(["["+s+"]"]),r))),toString:()=>"array("+e.toString()+")"}),C1=(e,t)=>((e,t)=>({extract:(n,o)=>nt(o,e).fold(()=>{return s=e,im(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,i=o,nt(a=t,l=r).fold(()=>{return d=a,u=l,im(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+Hh(d));var d,u},c=>c.extract(s.concat(["branch: "+l]),i));var s,i,a,l}),toString:()=>"chooseOn("+e+"). Possible values: "+on(t)}))(e,na(t,Vh)),mO=Z(cO),am=(e,t)=>Wh(n=>{const o=typeof n;return e(n)?el(n):Zc(`Expected type: ${t} but got: ${o}`)}),fO=am(Dn,"number"),lm=am(ge,"string"),gO=am(dr,"boolean"),Kh=am(Ke,"function"),ed=(e,t,n,o)=>({tag:"field",key:e,newKey:t,presence:n,prop:o}),w1=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),E1=(e,t)=>ed(e,e,{tag:"required",process:{}},t),x1=e=>E1(e,lm),k1=e=>E1(e,Kh),Yh=(e,t)=>ed(e,e,{tag:"option",process:{}},t),cm=e=>Yh(e,lm),tl=(e,t,n)=>ed(e,e,b1(t),n),S1=(e,t)=>tl(e,t,fO),N1=(e,t,n)=>{return tl(e,t,(o=n,r=s=>ae(o,s)?An.value(s):An.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),Wh(s=>r(s).fold(Zc,el))));var o,r},Xh=(e,t)=>tl(e,t,gO),Gh=(e,t)=>tl(e,t,Kh),hO=x1("type"),pO=k1("fetch"),Qh=k1("onAction"),bO=Gh("onSetup",()=>Re),vO=cm("text"),yO=cm("icon"),_O=cm("tooltip"),CO=cm("label"),wO=Xh("active",!1),EO=Xh("enabled",!0),A1=Xh("primary",!1),td=e=>tl("type",e,lm),xO=Vh([hO,x1("trigger"),S1("minChars",1),((e,t)=>ed(e,e,b1(1),mO()))("columns"),S1("maxResults",10),Yh("matches",Kh),pO,Qh,(T1=lm,tl("highlightOn",[],_1(T1)))]);var T1;const Jh=[EO,_O,yO,vO,bO],O1=[wO].concat(Jh),kO=[Gh("predicate",at),N1("scope","node",["node","editor"]),N1("position","selection",["node","selection","line"])],SO=Jh.concat([td("contextformbutton"),A1,Qh,w1("original",tn)]),NO=O1.concat([td("contextformbutton"),A1,Qh,w1("original",tn)]),AO=Jh.concat([td("contextformbutton")]),TO=O1.concat([td("contextformtogglebutton")]),OO=C1("type",{contextformbutton:SO,contextformtogglebutton:NO});Vh([td("contextform"),Gh("initValue",Z("")),CO,((e,t)=>ed(e,e,{tag:"required",process:{}},_1(t)))("commands",OO),Yh("launch",C1("type",{contextformbutton:AO,contextformtogglebutton:TO}))].concat(kO));const DO=e=>{const t=$s(),n=Qt(!1),o=t.isSet,r=()=>{o()&&(At(e).autocompleter.removeDecoration(),e.dispatch("AutocompleterEnd"),n.set(!1),t.clear())},s=Vo(()=>(e=>{const t=e.ui.registry.getAll().popups,n=na(t,s=>{return(i=s,((e,t,n)=>{return o=(a=t.extract([e],i=n)).stype===Mr.Error?{stype:Mr.Error,serror:(a=>({input:i,errors:a}))(a.serror)}:a,zh(o,An.error,An.value);var i,a,o})("Autocompleter",xO,{trigger:i.ch,...i})).fold(a=>{throw new Error("Errors: \n"+(c=>{const d=c.length>10?c.slice(0,10).concat([{path:[],getErrorInfo:Z("... (only showing first ten failures)")}]):c;return ze(d,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=a).errors).join("\n")+"\n\nInput object: "+Hh(l.input));var l},tn);var i}),o=yd(Ur(n,s=>s.trigger)),r=oa(n);return{dataset:n,triggers:o,lookupByTrigger:s=>ke(r,i=>i.trigger===s)}})(e)),i=a=>{var l;(l=a,t.get().map(c=>m1(e.dom,e.selection.getRng(),c.trigger).bind(d=>h1(e,s,d,l))).getOrThunk(()=>((c,d)=>{const u=d(),f=c.selection.getRng();return(p=c.dom,g=f,b=u,ms(b.triggers,h=>m1(p,g,h))).bind(p=>h1(c,d,p));var p,g,b})(e,s))).fold(r,l=>{var c,u;c=l.context,o()||(u=c.range,At(e).autocompleter.addDecoration(u),t.set({trigger:c.trigger,matchLength:c.text.length})),l.lookupData.then(c=>{t.get().map(d=>{const u=l.context;d.trigger===u.trigger&&(u.text.length-d.matchLength>=10?r():(t.set({...d,matchLength:u.text.length}),n.get()?e.dispatch("AutocompleterUpdate",{lookupData:c}):(n.set(!0),e.dispatch("AutocompleterStart",{lookupData:c}))))})})})};e.addCommand("mceAutocompleterReload",(a,l)=>{const c=Vt(l)?l.fetchOptions:{};i(c)}),e.addCommand("mceAutocompleterClose",r),((a,l)=>{const c=of(l.load,50);a.on("keypress compositionend",d=>{27!==d.which&&c.throttle()}),a.on("keydown",d=>{const u=d.which;8===u?c.throttle():27===u&&l.cancelIfNecessary()}),a.on("remove",c.cancel)})(e,{cancelIfNecessary:r,load:i})},BO=qn().browser.isSafari(),R1=e=>wr(T(e)),D1=(e,t)=>{var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},dm=(e,t)=>w.from(e.getParent(t.container(),"details")),B1=(e,t)=>dm(e,t).isSome(),L1=(e,t)=>{const n=t.getNode();Bt(n)||e.selection.setCursorLocation(n,t.offset())},P1=(e,t,n)=>{const o=e.dom.getParent(t.container(),"details");if(o&&!o.open){const r=e.dom.select("summary",o)[0];r&&(n?mn(r):Uo(r)).each(s=>L1(e,s))}else L1(e,t)},M1=(e,t,n)=>{const{dom:o,selection:r}=e,s=e.getBody();if("character"===n){const i=U.fromRangeStart(r.getRng()),a=o.getParent(i.container(),o.isBlock),l=dm(o,i),c=a&&o.isEmpty(a),d=ct(a?.previousSibling),u=ct(a?.nextSibling);return!!(c&&(t?u:d)&&$a(!t,s,i).exists(f=>B1(o,f)&&!Nl(l,dm(o,f))))||$a(t,s,i).fold(at,f=>{const p=dm(o,f);if(B1(o,f)&&!Nl(l,p)){if(t||P1(e,f,!1),a&&c){if(t&&d||!t&&u)return!0;P1(e,f,t),e.dom.remove(a)}return!0}return!1})}return!1},Hi=(e,t,n)=>{return r=t,s=n,((i,a)=>{const l=w.from(i.getParent(a.startContainer,"details")),c=w.from(i.getParent(a.endContainer,"details"));if(l.isSome()||c.isSome()){const d=l.bind(u=>w.from(i.select("summary",u)[0]));return w.some({startSummary:d,startDetails:l,endDetails:c})}return w.none()})((o=e).dom,o.selection.getRng()).fold(()=>M1(o,r,s),i=>((e,t,n,o)=>{const r=e.selection.getRng(),s=U.fromRangeStart(r),i=e.getBody();return"selection"===o?((a,l)=>{const c=l.startSummary.exists(f=>f.contains(a.startContainer)),d=l.startSummary.exists(f=>f.contains(a.endContainer)),u=l.startDetails.forall(f=>l.endDetails.forall(p=>f!==p));return(c||d)&&!(c&&d)||u})(r,t):n?(a=s,t.startSummary.exists(c=>{return d=a,Uo(u=c).exists(f=>ut(f.getNode())&&jn(u,f).exists(p=>p.isEqual(d))||f.isEqual(d));var d,u})||((a,l,c)=>c.startDetails.exists(d=>Tn(a,l).forall(u=>!d.contains(u.container()))))(i,s,t)):((a,l)=>l.startSummary.exists(c=>{return d=a,mn(c).exists(f=>f.isEqual(d));var d}))(s,t)||((a,l)=>l.startDetails.exists(c=>jn(c,a).forall(d=>l.startSummary.exists(u=>!u.contains(a.container())&&u.contains(d.container())))))(s,t);var a})(o,i,r,s)||M1(o,r,s))||BO&&((o,r,s)=>{const i=o.selection,a=i.getNode(),l=i.getRng(),c=U.fromRangeStart(l);return!!zm(a)&&("selection"===s&&D1(l,a)||ly(r,c,a)?R1(a):o.undoManager.transact(()=>{const d=i.getSel();let{anchorNode:u,anchorOffset:f,focusNode:p,focusOffset:g}=d??{};const b=()=>{Q(u)&&Q(f)&&Q(p)&&Q(g)&&d?.setBaseAndExtent(u,f,p,g)},h=(_,C)=>{W(_.childNodes,k=>{Ac(k)&&C.appendChild(k)})},v=o.dom.create("span",{"data-mce-bogus":"1"});h(a,v),a.appendChild(v),b(),"word"!==s&&"line"!==s||null==d||d.modify("extend",r?"right":"left",s),!i.isCollapsed()&&D1(i.getRng(),v)?R1(a):(o.execCommand(r?"ForwardDelete":"Delete"),u=d?.anchorNode,f=d?.anchorOffset,p=d?.focusNode,g=d?.focusOffset,h(v,a),b()),o.dom.remove(v)}),!0)})(e,t,n)?w.some(Re):w.none();var o,r,s},I1=e=>(t,n,o={})=>{const r=t.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Re,inputType:n},i=Lp(new InputEvent(e));return t.dispatch(e,{...i,...s,...o})},nd=I1("input"),um=I1("beforeinput"),F1=qn(),j1=F1.os,$1=j1.isMacOS()||j1.isiOS(),PO=F1.browser.isFirefox(),nl=(e,t)=>{const n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const s=(i=>{for(;i;){if(ie(i)||Y(i)&&i.data&&/[\r\n\s]/.test(i.data))return i;i=i.nextSibling}return null})(t.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(n.doc.createTextNode(Pt),t.firstChild)}const r=n.createRng();if(t.normalize(),t.hasChildNodes()){const s=new Ot(t,t);let i,a=t;for(;i=s.current();){if(Y(i)){r.setStart(i,0),r.setEnd(i,0);break}if(o[i.nodeName.toLowerCase()]){r.setStartBefore(i),r.setEndBefore(i);break}a=i,i=s.next()}i||(r.setStart(a,0),r.setEnd(a,0))}else ut(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)):(r.setStart(t,0),r.setEnd(t,0));e.selection.setRng(r),Dc(e,r)},od=(e,t)=>{const n=e.getRoot();let o,r=t;for(;r!==n&&r&&"false"!==e.getContentEditable(r);){if("true"===e.getContentEditable(r)){o=r;break}r=r.parentNode}return r!==n?o:n},Zh=e=>w.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),ep=e=>{e.innerHTML='<br data-mce-bogus="1">'},rd=(e,t)=>{un(e).toLowerCase()===t.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;w.from(r.style).map(s.parseStyle).each(d=>{const u={...Hl(T(o)),...d};s.setStyles(o,u)});const i=w.from(r.class).map(d=>d.split(/\s+/)),a=w.from(o.className).map(d=>ke(d.split(/\s+/),u=>""!==u));Kt(i,a,(d,u)=>{const f=ke(u,g=>!ae(d,g)),p=[...d,...f];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],c=fs(r,(d,u)=>!ae(l,u));s.setAttribs(o,c)})(e,t,yc(e))},U1=(e,t,n,o,r=!0,s,i)=>{const a=e.dom,l=e.schema,c=un(e),d=n?n.nodeName.toUpperCase():"";let u=t;const f=l.getTextInlineElements();let p;p=s||"TABLE"===d||"HR"===d?a.create(s||c,i||{}):n.cloneNode(!1);let g=p;if(r){do{if(f[u.nodeName]){if(mo(u)||fo(u))continue;const b=u.cloneNode(!1);a.setAttrib(b,"id",""),p.hasChildNodes()?(b.appendChild(p.firstChild),p.appendChild(b)):(g=b,p.appendChild(b))}}while((u=u.parentNode)&&u!==o)}else a.setAttrib(p,"style",null),a.setAttrib(p,"class",null);return rd(e,p),ep(g),p},z1=(e,t)=>{const n=e?.parentNode;return Q(n)&&n.nodeName===t},H1=e=>Q(e)&&/^(OL|UL|LI)$/.test(e.nodeName),tp=e=>Q(e)&&/^(LI|DT|DD)$/.test(e.nodeName),mm=e=>{const t=e.parentNode;return tp(t)?t:e},fm=(e,t,n)=>{let o=e[n?"firstChild":"lastChild"];for(;o&&!ie(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},q1=e=>$t(Ur(Hl(T(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),MO=(e,t)=>t&&"A"===t.nodeName&&e.isEmpty(t),np=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,op=(e,t)=>Q(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t),rp=(e,t,n)=>Y(t)?e?1===n&&t.data.charAt(n-1)===Mt?0:n:n===t.data.length-1&&t.data.charAt(n)===Mt?t.data.length:n:n,W1={insert:(e,t)=>{let n,o,r,s,i=!1;const a=e.dom,l=e.schema.getNonEmptyElements(),c=e.selection.getRng(),d=un(e),u=T(c.startContainer),f=Es(u,c.startOffset),p=f.exists(P=>Kr(P)&&!Qr(P)),g=c.collapsed&&p,b=(P,F)=>U1(e,n,E,k,yk(e),P,F),h=P=>{const F=rp(P,n,o);if(Y(n)&&(P?F>0:F<n.data.length))return!1;if(n.parentNode===E&&i&&!P||P&&ie(n)&&n===E.firstChild)return!0;if(np(n,"TABLE")||np(n,"HR"))return i&&!P||!i&&P;const A=new Ot(n,E);let D;for(Y(n)&&(P&&0===F?A.prev():P||F!==n.data.length||A.next());D=A.current();){if(ie(D)){if(!D.getAttribute("data-mce-bogus")){const M=D.nodeName.toLowerCase();if(l[M]&&"br"!==M)return!1}}else if(Y(D)&&!ao(D.data))return!1;P?A.prev():A.next()}return!0},v=()=>{let P;return P=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==N?b(d):b(),((F,A)=>{const D=_k(F);return!kt(A)&&(ge(D)?ae(X.explode(D),A.nodeName.toLowerCase()):D)})(e,s)&&op(a,s)&&a.isEmpty(E,void 0,{includeZwsp:!0})?P=a.split(s,E):a.insertAfter(P,E),nl(e,P),P};ku(a,c).each(P=>{c.setStart(P.startContainer,P.startOffset),c.setEnd(P.endContainer,P.endOffset)}),n=c.startContainer,o=c.startOffset;const _=!(!t||!t.shiftKey),C=!(!t||!t.ctrlKey);ie(n)&&n.hasChildNodes()&&!g&&(i=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=i&&Y(n)?n.data.length:0);const k=od(a,n);if(!k||((P,F)=>{const A=P.dom.getParent(F,"ol,ul,dl");return null!==A&&"false"===P.dom.getContentEditableParent(A)})(e,n))return;_||(n=((P,F,A,D,M)=>{var z,te;const G=P.dom,he=null!==(z=od(G,D))&&void 0!==z?z:G.getRoot();let me=G.getParent(D,G.isBlock);if(!me||!op(G,me)){if(me=me||he,!me.hasChildNodes()){const le=G.create(F);return rd(P,le),me.appendChild(le),A.setStart(le,0),A.setEnd(le,0),le}let _e,pe=D;for(;pe&&pe.parentNode!==me;)pe=pe.parentNode;for(;pe&&!G.isBlock(pe);)_e=pe,pe=pe.previousSibling;const ne=null===(te=_e?.parentElement)||void 0===te?void 0:te.nodeName;if(_e&&ne&&P.schema.isValidChild(ne,F.toLowerCase())){const le=_e.parentNode,Ne=G.create(F);for(rd(P,Ne),le.insertBefore(Ne,_e),pe=_e;pe&&!G.isBlock(pe);){const O=pe.nextSibling;Ne.appendChild(pe),pe=O}A.setStart(D,M),A.setEnd(D,M)}}return D})(e,d,c,n,o));let E=a.getParent(n,a.isBlock)||a.getRoot();s=Q(E?.parentNode)?a.getParent(E.parentNode,a.isBlock):null,r=E?E.nodeName.toUpperCase():"";const N=s?s.nodeName.toUpperCase():"";if("LI"!==N||C||(E=s,s=s.parentNode,r=N),ie(s)&&(P=e,A=E,!_&&A.nodeName.toLowerCase()===un(P)&&P.dom.isEmpty(A)&&((D,M,z)=>{let te=M;for(;te&&te!==D&&ct(te.nextSibling);){const he=te.parentElement;if(!he||(G=he,!Oe(P.schema.getTextBlockElements(),G.nodeName.toLowerCase())))return gi(he);te=he}var G;return!1})(P.getBody(),A)))return((P,F,A)=>{var D,M,z;const te=F(un(P)),G=P.dom.getParent(A,gi);G&&(P.dom.insertAfter(te,G),nl(P,te),(null!==(z=null===(M=null===(D=A.parentElement)||void 0===D?void 0:D.childNodes)||void 0===M?void 0:M.length)&&void 0!==z?z:0)>1&&P.dom.remove(A))})(e,b,E);var P,A;if(/^(LI|DT|DD)$/.test(r)&&ie(s)&&a.isEmpty(E))return void((P,F,A,D,M)=>{const z=P.dom,te=P.selection.getRng(),G=A.parentNode;if(A===P.getBody()||!G)return;var he;H1(he=A)&&H1(he.parentNode)&&(M="LI");const me=tp(D)?q1(D):void 0;let _e=tp(D)&&me?F(M,{style:q1(D)}):F(M);if(fm(A,D,!0)&&fm(A,D,!1))if(z1(A,"LI")){const pe=mm(A);z.insertAfter(_e,pe),(null===(le=(ne=A).parentNode)||void 0===le?void 0:le.firstChild)===ne?z.remove(pe):z.remove(A)}else z.replace(_e,A);else if(fm(A,D,!0))z1(A,"LI")?(z.insertAfter(_e,mm(A)),_e.appendChild(z.doc.createTextNode(" ")),_e.appendChild(A)):G.insertBefore(_e,A),z.remove(D);else if(fm(A,D,!1))z.insertAfter(_e,mm(A)),z.remove(D);else{A=mm(A);const pe=te.cloneRange();pe.setStartAfter(D),pe.setEndAfter(A);const ne=pe.extractContents();if("LI"===M&&((le,Ne)=>le.firstChild&&"LI"===le.firstChild.nodeName)(ne)){const le=ke(ze(_e.children,T),jr(ys("br")));_e=ne.firstChild,z.insertAfter(ne,A),W(le,Ne=>Wl(T(_e),Ne)),me&&_e.setAttribute("style",me)}else z.insertAfter(ne,A),z.insertAfter(_e,A);z.remove(D)}var ne,le;nl(P,_e)})(e,b,s,E,d);if(!(g||E!==e.getBody()&&op(a,E)))return;const R=E.parentNode;let L;if(g)L=b(d),f.fold(()=>{Et(u,T(L))},P=>{cn(P,T(L))}),e.selection.setCursorLocation(L,0);else if(Er(E))L=wi(E),a.isEmpty(E)&&ep(E),rd(e,L),nl(e,L);else if(h(!1))L=v();else if(h(!0)&&R){L=R.insertBefore(b(),E);const P=T(c.startContainer).dom.hasChildNodes()&&c.collapsed;nl(e,np(E,"HR")||P?L:E)}else{const P=(A=>{const D=A.cloneRange();return D.setStart(A.startContainer,rp(!0,A.startContainer,A.startOffset)),D.setEnd(A.endContainer,rp(!1,A.endContainer,A.endOffset)),D})(c).cloneRange();P.setEndAfter(E);const F=P.extractContents();(A=>{W(Yl(T(A),kn),D=>{const M=D.dom;M.nodeValue=bn(M.data)})})(F),(A=>{let D=A;do{Y(D)&&(D.data=D.data.replace(/^[\r\n]+/,"")),D=D.firstChild}while(D)})(F),L=F.firstChild,a.insertAfter(F,E),((A,D,M)=>{var z;const te=[];if(!M)return;let G=M;for(;G=G.firstChild;){if(A.isBlock(G))return;ie(G)&&!D[G.nodeName.toLowerCase()]&&te.push(G)}let he=te.length;for(;he--;)G=te[he],(!G.hasChildNodes()||G.firstChild===G.lastChild&&""===(null===(z=G.firstChild)||void 0===z?void 0:z.nodeValue)||MO(A,G))&&A.remove(G)})(a,l,L),((A,D)=>{D.normalize();const M=D.lastChild;(!M||ie(M)&&/^(left|right)$/gi.test(A.getStyle(M,"float",!0)))&&A.add(D,"br")})(a,E),a.isEmpty(E)&&ep(E),L.normalize(),a.isEmpty(L)?(a.remove(L),v()):(rd(e,L),nl(e,L))}a.setAttrib(L,"id",""),e.dispatch("NewBlock",{newBlock:L})},fakeEventName:"insertParagraph"},V1=(e,t,n)=>{const o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),Dc(e,o)},IO=(e,t)=>{const n=Lt("br");cn(T(t),n),e.undoManager.add()},FO=(e,t)=>{jO(e.getBody(),t)||Yo(T(t),Lt("br"));const n=Lt("br");Yo(T(t),n),V1(e,n.dom,!1),e.undoManager.add()},jO=(e,t)=>{return n=U.after(t),!!ut(n.getNode())||Tn(e,U.after(t)).map(o=>ut(o.getNode())).getOr(!1);var n},K1=e=>e&&"A"===e.nodeName&&"href"in e,$O=e=>e.fold(at,K1,K1,at),UO=(e,t)=>{t.fold(Re,se(IO,e),se(FO,e),Re)},Y1={insert:(e,t)=>{const n=(o=>{const r=se(ji,o),s=U.fromRangeStart(o.selection.getRng());return Lr(r,o.getBody(),s).filter($O)})(e);n.isSome()?n.each(se(UO,e)):((o,r)=>{const i=o.dom,a=o.selection.getRng();let l,c=!1;ku(i,a).each(h=>{a.setStart(h.startContainer,h.startOffset),a.setEnd(h.endContainer,h.endOffset)});let d=a.startOffset,u=a.startContainer;if(ie(u)&&u.hasChildNodes()){const h=d>u.childNodes.length-1;u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=h&&Y(u)?u.data.length:0}let f=i.getParent(u,i.isBlock);const p=f&&f.parentNode?i.getParent(f.parentNode,i.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(f=p),Y(u)&&d>=u.data.length&&(((h,v,_)=>{const C=new Ot(v,_);let k;const E=h.getNonEmptyElements();for(;k=C.next();)if(E[k.nodeName.toLowerCase()]||Y(k)&&k.length>0)return!0;return!1})(o.schema,u,f||i.getRoot())||(l=i.create("br"),a.insertNode(l),a.setStartAfter(l),a.setEndAfter(l),c=!0)),l=i.create("br"),cf(i,a,l),V1(o,l,c),o.undoManager.add()})(e,t)},fakeEventName:"insertLineBreak"},X1=(e,t)=>Zh(e).filter(n=>t.length>0&&rn(T(n),t)).isSome(),Jn=Nr([{br:[]},{block:[]},{none:[]}]),zO=(e,t)=>{return X1(n=e,vk(n));var n},G1=e=>(t,n)=>Zh(t).filter(r=>bi(T(r))).isSome()===e,Q1=(e,t)=>(n,o)=>Zh(n).fold(Z(""),i=>i.nodeName.toUpperCase())===e.toUpperCase()===t,HO=e=>{const t=od(e.dom,e.selection.getStart());return kt(t)},sd=e=>Q1("pre",e),gm=e=>(t,n)=>hk(t)===e,qO=(e,t)=>{return X1(n=e,bk(n));var n},hm=(e,t)=>t,WO=e=>{const t=un(e),n=od(e.dom,e.selection.getStart());return Q(n)&&e.schema.isValidChild(n.nodeName,t)},VO=e=>{const t=e.selection.getRng(),n=T(t.startContainer),o=Es(n,t.startOffset).map(r=>Kr(r)&&!Qr(r));return t.collapsed&&o.getOr(!0)},_o=(e,t)=>(n,o)=>$t(e,(r,s)=>r&&s(n,o),!0)?w.some(t):w.none(),pm=(e,t,n)=>{t.selection.isCollapsed()||t.execCommand("delete"),Q(n)&&um(t,e.fakeEventName).isDefaultPrevented()||(e.insert(t,n),Q(n)&&nd(t,e.fakeEventName))},J1=(e,t)=>{const n=()=>pm(Y1,e,t),o=()=>pm(W1,e,t),r=(s=e,i=t,VC([_o([zO],Jn.none()),_o([sd(!0),HO],Jn.none()),_o([Q1("summary",!0)],Jn.br()),_o([sd(!0),gm(!1),hm],Jn.br()),_o([sd(!0),gm(!1)],Jn.block()),_o([sd(!0),gm(!0),hm],Jn.block()),_o([sd(!0),gm(!0)],Jn.br()),_o([G1(!0),hm],Jn.br()),_o([G1(!0)],Jn.block()),_o([qO],Jn.br()),_o([hm],Jn.br()),_o([WO],Jn.block()),_o([VO],Jn.block())],[s,!(!i||!i.shiftKey)]).getOr(Jn.none()));var s,i;switch(pk(e)){case"linebreak":r.fold(n,n,Re);break;case"block":r.fold(o,o,Re);break;case"invert":r.fold(o,n,Re);break;default:r.fold(n,o,Re)}},Z1=qn(),KO=Z1.os.isiOS()&&Z1.browser.isSafari(),eE=(e,t)=>{var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(()=>{J1(e,t)}))},YO=qn(),tE=e=>e.stopImmediatePropagation(),nE=e=>e.keyCode===oe.PAGE_UP||e.keyCode===oe.PAGE_DOWN,oE=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",tE,!0):!n&&e.get()&&t.off("NodeChange",tE),e.set(n)},rE=(e,t)=>{const n=t.container(),o=t.offset();return Y(n)?(n.insertData(o,e),w.some(U(n,o+e.length))):fu(t).map(r=>{const s=ws(e);return t.isAtEnd()?Yo(r,s):cn(r,s),U(s.dom,e.length)})},sE=se(rE,Pt),iE=se(rE," "),aE=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},XO=e=>{const t=U.fromRangeStart(e.selection.getRng()),n=T(e.getBody());if(e.selection.isCollapsed()){const o=se(ji,e),r=U.fromRangeStart(e.selection.getRng());return Lr(o,e.getBody(),r).bind((s=n,i=>i.fold(a=>jn(s.dom,U.before(a)),a=>mn(a),a=>Uo(a),a=>Tn(s.dom,U.after(a))))).map(s=>()=>{return(i=n,a=t,l=e.schema,c=>X0(i,c,l)?sE(a):iE(a))(s).each(aE(e));var i,a,l})}var s;return w.none()},GO=e=>{return Vr(Pe.browser.isFirefox()&&e.selection.isEditable()&&(t=e.dom,n=e.selection.getRng().startContainer,t.isEditable(t.getParent(n,"summary"))),()=>{const o=T(e.getBody());var r,s,i;e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),(r=o,s=U.fromRangeStart(e.selection.getRng()),i=e.schema,X0(r,s,i)?sE(s):iE(s)).each(aE(e))});var t,n},QO=e=>SS(e)?[{keyCode:oe.TAB,action:Ee(l1,e,!0)},{keyCode:oe.TAB,shiftKey:!0,action:Ee(l1,e,!1)}]:[],JO=e=>{if(e.addShortcut("Meta+P","","mcePrint"),DO(e),Br(e))return Qt(null);{const t=(e=>{const t=Qt(null),n=se(ji,e);return e.on("NodeChange",o=>{_c(e)&&(((r,s,i)=>{const a=ze(Yt(T(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),d=>d.dom),l=ke(a,r),c=ke(i,r);W($r(l,c),se(gw,!1)),W($r(c,l),se(gw,!0))})(n,e.dom,o.parents),((r,s)=>{const i=s.get();if(r.selection.isCollapsed()&&!r.composing&&i){const a=U.fromRangeStart(r.selection.getRng());U.isTextPosition(a)&&!_i(l=a)&&!Aa(l)&&(tm(r,((e,t)=>{return U.isTextPosition(t)?(o=t,jb(n=e)&&o.container()===n?((r,s)=>{const i=Ub(r.data.substr(0,s.offset())),a=Ub(r.data.substr(s.offset()));return(i.text+a.text).length>0?(zb(r),U(r,s.offset()-i.count)):s})(n,o):Hb(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const i=s.container(),a=((l,c)=>{const d=ta(l,c);return-1===d?w.none():w.some(d)})(nn(i.childNodes),r).map(l=>l<s.offset()?U(i,s.offset()-1):s).getOr(s);return Ri(r),a})(n,o):Hb(n,o))(e,t);var n,o})(i,a)),s.set(null))}var l})(e,t),((r,s,i,a)=>{if(s.selection.isCollapsed()){const l=ke(a,r);W(l,c=>{const d=U.fromRangeStart(s.selection.getRng());Lr(r,s.getBody(),d).bind(u=>hw(s,i,u))})}})(n,e,t,o.parents))}),t})(e);return(n=e).on("beforeinput",o=>{n.selection.isEditable()&&!dt(o.getTargetRanges(),r=>!f0(n.dom,r))||o.preventDefault()}),(n=>{n.on("keyup compositionstart",se(QT,n))})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=Pe.os.isMacOS()||Pe.os.isiOS();Qc([{keyCode:oe.RIGHT,action:Ee($w,s,!0)},{keyCode:oe.LEFT,action:Ee($w,s,!1)},{keyCode:oe.UP,action:Ee(Uw,s,!1)},{keyCode:oe.DOWN,action:Ee(Uw,s,!0)},...l?[{keyCode:oe.UP,action:Ee(om,s,!1),metaKey:!0,shiftKey:!0},{keyCode:oe.DOWN,action:Ee(om,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:oe.RIGHT,action:Ee(s1,s,!0)},{keyCode:oe.LEFT,action:Ee(s1,s,!1)},{keyCode:oe.UP,action:Ee(Ih,s,!1)},{keyCode:oe.DOWN,action:Ee(Ih,s,!0)},{keyCode:oe.UP,action:Ee(Ih,s,!1)},{keyCode:oe.UP,action:Ee(qw,s,!1)},{keyCode:oe.DOWN,action:Ee(qw,s,!0)},{keyCode:oe.RIGHT,action:Ee(Yw,s,!0)},{keyCode:oe.LEFT,action:Ee(Yw,s,!1)},{keyCode:oe.UP,action:Ee(Xw,s,!1)},{keyCode:oe.DOWN,action:Ee(Xw,s,!0)},{keyCode:oe.RIGHT,action:Ee(pw,s,i,!0)},{keyCode:oe.LEFT,action:Ee(pw,s,i,!1)},{keyCode:oe.RIGHT,ctrlKey:!l,altKey:l,action:Ee($T,s,i)},{keyCode:oe.LEFT,ctrlKey:!l,altKey:l,action:Ee(UT,s,i)},{keyCode:oe.UP,action:Ee(Hw,s,!1)},{keyCode:oe.DOWN,action:Ee(Hw,s,!0)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===oe.BACKSPACE,s.isDefaultPrevented()||((i,a,l)=>{const c=l.keyCode===oe.BACKSPACE?"deleteContentBackward":"deleteContentForward",d=i.selection.isCollapsed(),u=d?"character":"selection",f=p=>d?p?"word":"line":"selection";Kw([{keyCode:oe.BACKSPACE,action:Ee(Rw,i)},{keyCode:oe.BACKSPACE,action:Ee(Ch,i,!1)},{keyCode:oe.DELETE,action:Ee(Ch,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(vh,i,!1)},{keyCode:oe.DELETE,action:Ee(vh,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(Oh,i,a,!1)},{keyCode:oe.DELETE,action:Ee(Oh,i,a,!0)},{keyCode:oe.BACKSPACE,action:Ee(kg,i,!1)},{keyCode:oe.DELETE,action:Ee(kg,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(Hi,i,!1,u)},{keyCode:oe.DELETE,action:Ee(Hi,i,!0,u)},...$1?[{keyCode:oe.BACKSPACE,altKey:!0,action:Ee(Hi,i,!1,f(!0))},{keyCode:oe.DELETE,altKey:!0,action:Ee(Hi,i,!0,f(!0))},{keyCode:oe.BACKSPACE,metaKey:!0,action:Ee(Hi,i,!1,f(!1))}]:[{keyCode:oe.BACKSPACE,ctrlKey:!0,action:Ee(Hi,i,!1,f(!0))},{keyCode:oe.DELETE,ctrlKey:!0,action:Ee(Hi,i,!0,f(!0))}],{keyCode:oe.BACKSPACE,action:Ee(wh,i,!1)},{keyCode:oe.DELETE,action:Ee(wh,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(Bh,i,!1)},{keyCode:oe.DELETE,action:Ee(Bh,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(ph,i,!1)},{keyCode:oe.DELETE,action:Ee(ph,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(hh,i,!1)},{keyCode:oe.DELETE,action:Ee(hh,i,!0)},{keyCode:oe.BACKSPACE,action:Ee(Rh,i,!1)},{keyCode:oe.DELETE,action:Ee(Rh,i,!0)}],l).filter(p=>i.selection.isEditable()).each(p=>{l.preventDefault(),um(i,c).isDefaultPrevented()||(p(),nd(i,c))})})(n,o,s)}),n.on("keyup",s=>{var i,a,l;s.isDefaultPrevented()||(a=s,l=r,Qc([{keyCode:oe.BACKSPACE,action:Ee($C,i=n)},{keyCode:oe.DELETE,action:Ee($C,i)},...$1?[{keyCode:oe.BACKSPACE,altKey:!0,action:Ee(Gc,i)},{keyCode:oe.DELETE,altKey:!0,action:Ee(Gc,i)},...l?[{keyCode:PO?224:91,action:Ee(Gc,i)}]:[]]:[{keyCode:oe.BACKSPACE,ctrlKey:!0,action:Ee(Gc,i)},{keyCode:oe.DELETE,ctrlKey:!0,action:Ee(Gc,i)}]],a)),r=!1})})(e,t),(n=>{let o=w.none();n.on("keydown",r=>{var s;r.keyCode===oe.ENTER&&(KO&&(s=>{if(!s.collapsed)return!1;const i=s.startContainer;if(Y(i)){const a=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,l=i.data.charAt(s.startOffset-1);return a.test(l)}return!1})(n.selection.getRng())?(o=w.some((s=n).selection.getBookmark()),s.undoManager.add()):eE(n,r))}),n.on("keyup",r=>{r.keyCode===oe.ENTER&&o.each(()=>{return i=r,(s=n).undoManager.undo(),o.fold(Re,a=>s.selection.moveToBookmark(a)),eE(s,i),void(o=w.none());var s,i})})})(e),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,Kw([{keyCode:oe.SPACEBAR,action:Ee(XO,r=n)},{keyCode:oe.SPACEBAR,action:Ee(GO,r)}],s).each(i=>{s.preventDefault(),um(r,"insertText",{data:" "}).isDefaultPrevented()||(i(),nd(r,"insertText",{data:" "}))}))})})(e),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=T(r.getBody());r.selection.isCollapsed()&&((e,t,n)=>{const o=t.container();if(!Y(o))return w.none();if((r=>{const s=r.container();return Y(s)&&St(s.data,Pt)})(t)){const r=J0(e,o,!1,n)||(s=>{const i=s.data,a=(l=>{const c=l.split("");return ze(c,(d,u)=>bu(d)&&u>0&&u<c.length-1&&Af(c[u-1])&&Af(c[u+1])?" ":d).join("")})(i);return a!==i&&(s.data=a,!0)})(o)||Z0(e,o,!1,n);return Vr(r,t)}if(fg(e,t,n)){const r=J0(e,o,!0,n)||Z0(e,o,!0,n);return Vr(r,t)}return w.none()})(s,U.fromRangeStart(r.selection.getRng()),r.schema).each(i=>{r.selection.setRng(i.toRange())})})(n)})})(e),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,Qc([...QO(n)],s).each(i=>{s.preventDefault()}))})})(e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,i,a)=>{const l=Pe.os.isMacOS()||Pe.os.isiOS();Qc([{keyCode:oe.END,action:Ee(zw,s,!0)},{keyCode:oe.HOME,action:Ee(zw,s,!1)},...l?[]:[{keyCode:oe.HOME,action:Ee(om,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:oe.END,action:Ee(om,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:oe.END,action:Ee(Gw,s,!0)},{keyCode:oe.HOME,action:Ee(Gw,s,!1)},{keyCode:oe.END,action:Ee(nm,s,!0,i)},{keyCode:oe.HOME,action:Ee(nm,s,!1,i)}],a).each(c=>{a.preventDefault()})})(n,o,r)})})(e,t),((n,o)=>{if(YO.os.isMacOS())return;const r=Qt(!1);n.on("keydown",s=>{nE(s)&&oE(r,n,!0)}),n.on("keyup",s=>{var i,a,l;s.isDefaultPrevented()||(l=s,Qc([{keyCode:oe.PAGE_UP,action:Ee(nm,i=n,!1,a=o)},{keyCode:oe.PAGE_DOWN,action:Ee(nm,i,!0,a)}],l)),nE(s)&&r.get()&&(oE(r,n,!1),n.nodeChanged())})})(e,t),t}var n};class ZO{constructor(t){let n;this.lastPath=[],this.editor=t;const o=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",r=>{const s=t.selection.getRng(),i={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&Vf(i,n)||t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const r=t.selection.getStart(!0);r&&vu(t)&&!o.isSameElementPath(r)&&t.dom.isChildOf(r,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",r=>{!r.isDefaultPrevented()&&vu(t)&&("IMG"===t.selection.getNode().nodeName?ho.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!Xk(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,i=>i===r||(s.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:o,parents:s})}}isSameElementPath(t){let n;const o=this.editor,r=ti(o.dom.getParents(t,Ct,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const lE=gc("image"),sp=gc("event"),bm=e=>t=>{t[sp]=e},cE=bm(0),eR=bm(2),tR=bm(1),ip=gc("mode"),vm=e=>t=>{t[ip]=e},dE=(e,t)=>vm(t)(e),uE=vm(0),ap=vm(2),oR=vm(1),mE=e=>t=>w.from(t[ip]).exists(o=>o===e),ol=mE(0),fE=mE(1),rR=["none","copy","link","move"],sR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],lp=()=>{const e=new window.DataTransfer;let t="move",n="all";const o={get dropEffect(){return t},set dropEffect(r){ae(rR,r)&&(t=r)},get effectAllowed(){return n},set effectAllowed(r){(e=>w.from(e[sp]).exists(n=>0===n))(o)&&ae(sR,r)&&(n=r)},get items(){return r=o,s=e.items,{...s,get length(){return s.length},add:(i,a)=>{if(ol(r)){if(!ge(i))return s.add(i);if(!Bt(a))return s.add(i,a)}return null},remove:i=>{ol(r)&&s.remove(i)},clear:()=>{ol(r)&&s.clear()}};var r,s},get files(){return fE(o)?Object.freeze({length:0,item:r=>null}):e.files},get types(){return e.types},setDragImage:(r,s,i)=>{ol(o)&&(o[lE]={image:r,x:s,y:i},e.setDragImage(r,s,i))},getData:r=>fE(o)?"":e.getData(r),setData:(r,s)=>{ol(o)&&e.setData(r,s)},clearData:r=>{ol(o)&&e.clearData(r)}};return uE(o),o},gE=(e,t)=>e.setData("text/html",t),hE="x-tinymce/html",ym=Z(hE),cp="\x3c!-- "+hE+" --\x3e",iR=e=>cp+e,pE=e=>-1!==e.indexOf(cp),bE="%MCEPASTEBIN%",dp=e=>e.dom.get("mcepastebin"),aR=e=>Q(e)&&"mcepastebin"===e.id,vE=e=>e===bE,yE=(e,t)=>(X.each(t,n=>{e=cr(n,RegExp)?e.replace(n,""):e.replace(n[0],n[1])}),e),_E=e=>yE(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,n,o)=>n||o?Pt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),CE=(e,t)=>({content:e,cancelled:t}),up=(e,t)=>(e.insertContent(t,{merge:gS(e),paste:!0}),!0),mp=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),lR=(e,t,n)=>{return!(e.selection.isCollapsed()||!mp(t)||(o=e,r=t,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},cR=(e,t,n)=>{return o=e,!(!mp(r=t)||!dt(Fb(o),s=>fn(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(e,t,n);var o,r},dR=(e=>{let t=0;return()=>"mceclip"+t++})(),uR=e=>{const t=lp();return gE(t,e),ap(t),t},wE=(e,t,n,o,r)=>{const s=((c,d,u)=>{const f=c.dispatch("PastePreProcess",{content:d,internal:u}),p=((g,b)=>{const h=Xa({sanitize:vf(g),sandbox_iframes:yf(g)},g.schema);h.addNodeFilter("meta",_=>{X.each(_,C=>{C.remove()})});const v=h.parse(b,{forced_root_block:!1,isRootContent:!0});return Ws({validate:!0},g.schema).serialize(v)})(c,f.content);return c.hasEventListeners("PastePostProcess")&&!f.isDefaultPrevented()?((g,b,h)=>{const v=g.dom.create("div",{style:"display:none"},b),_=g.dispatch("PastePostProcess",{node:v,internal:h});return CE(_.node.innerHTML,_.isDefaultPrevented())})(c,p,u):CE(p,f.isDefaultPrevented())})(e,t,n);if(!s.cancelled){const i=s.content,a=()=>{return l=e,c=i,void(o||!hS(l)?up(l,c):(u=l,f=c,X.each([lR,cR,up],p=>!p(u,f,up))));var l,c,u,f};r?um(e,"insertFromPaste",{dataTransfer:uR(i)}).isDefaultPrevented()||(a(),nd(e,"insertFromPaste")):a()}},_m=(e,t,n,o)=>{const r=n||pE(t);wE(e,t.replace(cp,""),r,!1,o)},fp=(e,t,n)=>{const o=e.dom.encode(t).replace(/\r\n/g,"\n"),r=((s,i,a)=>{const l=s.split(/\n\n/),c=((f,p)=>{let g="<"+f;const b=Ur(p,(h,v)=>v+'="'+Sr.encodeAllRaw(h)+'"');return b.length&&(g+=" "+b.join(" ")),g+">"})(i,a),d="</"+i+">",u=ze(l,f=>f.split(/\n/).join("<br />"));return 1===u.length?u[0]:ze(u,f=>c+f+d).join("")})(Ps(o,bS(e)),un(e),yc(e));wE(e,r,!1,!0,n)},EE=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const o=e.types[n];try{t[o]=e.getData(o)}catch{t[o]=""}}return t},Gs=(e,t)=>t in e&&e[t].length>0,xE=e=>Gs(e,"text/html")||Gs(e,"text/plain"),kE=(e,t,n)=>{const o="paste"===t.type?t.clipboardData:t.dataTransfer;var r;if(uu(e)&&o){const s=((i,a)=>{const l=a.items?zn(nn(a.items),d=>"file"===d.kind?[d.getAsFile()]:[]):[],c=a.files?nn(a.files):[];return ke(l.length>0?l:c,(d=>{const u=Fb(d);return f=>Qe(f.type,"image/")&&dt(u,p=>(g=>{const b=g.toLowerCase(),h={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return X.hasOwn(h,b)?"image/"+h[b]:"image/"+b})(p)===f.type)})(i))})(e,o);if(s.length>0)return t.preventDefault(),(r=s,Promise.all(ze(r,i=>v_(i).then(a=>({file:i,uri:a}))))).then(i=>{n&&e.selection.setRng(n),W(i,a=>{var l,c;l=e,Kg((c=a).uri).each(({data:d,type:u,base64Encoded:f})=>{const p=f?d:btoa(d),g=c.file,b=l.editorUpload.blobCache,v=b.getByData(p,u)??((_,C,k,E)=>{const N=dR(),R=Nb(_)&&Q(k.name),L=R?((A,D)=>{const M=D.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Q(M)?A.dom.encode(M[1]):void 0})(_,k.name):N,F=C.create(N,k,E,L,R?k.name:void 0);return C.add(F),F})(l,b,g,p);_m(l,`<img src="${v.blobUri()}">`,!1,!0)})})}),!0}return!1},gp=(e,t,n,o,r)=>{let s=_E(n);const i=Gs(t,ym())||pE(n),a=!i&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(s),l=mp(s);(vE(s)||!s.length||a&&!l)&&(o=!0),(o||l)&&(s=Gs(t,"text/plain")&&a?t["text/plain"]:(c=>{const d=co(),u=Xa({},d);let f="";const p=d.getVoidElements(),g=X.makeMap("script noscript style textarea video audio iframe object"," "),b=d.getBlockElements(),h=v=>{const _=v.name,C=v;if("br"!==_){if("wbr"!==_)if(p[_]&&(f+=" "),g[_])f+=" ";else{if(3===v.type&&(f+=v.value),!(v.name in d.getVoidElements())){let k=v.firstChild;if(k)do{h(k)}while(k=k.next)}b[_]&&C.next&&(f+="\n","p"===_&&(f+="\n"))}}else f+="\n"};return c=yE(c,[/<!\[[^\]]+\]>/g]),h(u.parse(c)),f})(s)),vE(s)||(o?fp(e,s,r):_m(e,s,i,r))},SE=(e,t,n,o)=>{((r,s,i)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",i),r.setData(ym(),s),!0}catch{return!1}})(e.clipboardData,t.html,t.text)?(e.preventDefault(),o()):n(t.html,o)},NE=e=>(t,n)=>{const{dom:o,selection:r}=e,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=o.create("div",{contenteditable:"true"},t);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(i),o.add(e.getBody(),s);const a=r.getRng();i.focus();const l=o.createRng();l.selectNodeContents(i),r.setRng(l),ho.setEditorTimeout(e,()=>{r.setRng(a),o.remove(s),n()},0)},AE=e=>({html:iR(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),TE=e=>{return!e.selection.isCollapsed()||!!(t=e).dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody());var t},OE=(e,t)=>{var n,o;return Mi.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(o=t.clientY)&&void 0!==o?o:0,e.getDoc())},RE=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},fR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,DE=e=>X.trim(e).replace(fR,Ei).toLowerCase(),gR=(e,t,n)=>{const o=mS(e);if(n||"all"===o||!fS(e))return t;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(a,l,c,d)=>{const u=s.parseStyle(s.decode(c)),f={};for(let g=0;g<r.length;g++){const b=u[r[g]];let h=b,v=s.getStyle(i,r[g],!0);/color/.test(r[g])&&(h=DE(h),v=DE(v)),v!==h&&(f[r[g]]=b)}const p=s.serializeStyle(f,"span");return p?l+' style="'+p+'"'+d:l+d})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,i,a,l)=>i+' style="'+a+'"'+l)},pR=ut,BE=Y,bR=e=>st(e.dom),LE=e=>t=>We(T(e),t),PE=(e,t)=>Io(T(e),bR,LE(t)),ME=(e,t,n)=>{const o=new Ot(e,t),r=n?o.next.bind(o):o.prev.bind(o);let s=e;for(let i=n?e:r();i&&!pR(i);i=r())Xn(i)&&(s=i);return s};var rl;!function(e){e.Before="before",e.After="after"}(rl||(rl={}));const yR=(e,t)=>Math.abs(e.left-t),_R=(e,t)=>Math.abs(e.right-t),wR=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),hp=(e,t,n,o)=>{const r=d=>Xn(d.node)?w.some(d):ie(d.node)?hp(nn(d.node.childNodes),t,n,!1):w.none(),s=(d,u)=>{const f=mr(d,(p,g)=>u(p,t,n)-u(g,t,n));return ms(f,r).map(p=>{return o&&!Y(p.node)&&f.length>1?(g=p,b=f[1],h=u,r(b).filter(v=>Math.abs(h(g,t,n)-h(v,t,n))<2&&Y(v.node))).getOr(p):p;var g,b,h})},[i,a]=((e,t)=>{return(n=ke(e,n=>{return(o=t)>=(r=n).top&&o<=r.bottom;var o,r}),$t(n,(o,r)=>o.fold(()=>w.some(r),s=>{const i=Math.min(r.left,s.left),a=Math.min(r.top,s.top),l=Math.max(r.right,s.right),c=Math.max(r.bottom,s.bottom);return w.some({top:a,right:l,bottom:c,left:i,width:l-i,height:c-a})}),w.none())).fold(()=>[[],e],n=>{const{pass:o,fail:r}=No(e,s=>((i,a)=>{const l=(c=i,d=a,Math.max(0,Math.min(c.bottom,d.bottom)-Math.max(c.top,d.top))/Math.min(i.height,a.height));var c,d;return((c,d)=>c.top<d.bottom&&c.bottom>d.top)(i,a)&&l>.5})(s,n));return[o,r]});var n})(aw(e),n),{pass:l,fail:c}=No(a,d=>d.top<n);return s(i,wR).orThunk(()=>s(c,Gp)).orThunk(()=>s(l,Gp))},IE=(e,t,n)=>((o,r,s)=>{const i=T(o),l=((e,t,n)=>w.from(e.dom.elementFromPoint(t,n)).map(Cs))(Ko(i),r,s).filter(c=>Lo(i,c)).getOr(i);return((c,d,u,f)=>{const p=(g,b)=>{const h=ke(g.dom.childNodes,jr(v=>ie(v)&&v.classList.contains("mce-drag-container")));return b.fold(()=>hp(h,u,f,!0),v=>{const _=ke(h,C=>C!==v.dom);return hp(_,u,f,!0)}).orThunk(()=>(We(g,c)?w.none():li(g)).bind(v=>p(v,w.some(g))))};return p(d,w.none())})(i,l,r,s)})(e,t,n).filter(o=>wc(o.node)).map(o=>{return{node:(r=o).node,position:yR(r,s=t)<_R(r,s)?rl.Before:rl.After};var r,s}),FE=e=>{var t,n;const o=e.getBoundingClientRect(),r=e.ownerDocument,s=r.documentElement,i=r.defaultView;return{top:o.top+(null!==(t=i?.scrollY)&&void 0!==t?t:0)-s.clientTop,left:o.left+(null!==(n=i?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},jE=e=>({target:e,srcElement:e}),$E=st,xR=((...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1})($E,Yn),kR=(e,t,n,o)=>{const r=e.dom,s=t.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const i=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),i.appendChild(s),i},Cm=(e,t)=>n=>()=>{n.scroll({[e]:("left"===e?n.scrollX:n.scrollY)+t,behavior:"smooth"})},UE=Cm("left",-32),zE=Cm("left",32),HE=Cm("top",-32),qE=Cm("top",32),WE=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},id=(e,t,n,o,r)=>{"dragstart"===t&&gE(o,e.dom.getOuterHTML(n));const s=((e,t,n,o)=>{const r=((s,i)=>{const a=(l=>{const c=lp(),d=w.from(l[ip]);return ap(l),cE(c),c.dropEffect=l.dropEffect,c.effectAllowed=l.effectAllowed,(u=l,w.from(u[lE])).each(u=>c.setDragImage(u.image,u.x,u.y)),W(l.types,u=>{"Files"!==u&&c.setData(u,l.getData(u))}),W(l.files,u=>c.items.add(u)),(u=>w.from(u[sp]))(l).each(u=>{var f;f=c,bm(u)(f)}),d.each(u=>{dE(l,u),dE(c,u)}),c;var u})(s);return"dragstart"===i?(cE(a),uE(a)):"drop"===i?(eR(a),ap(a)):(tR(a),oR(a)),a})(n,e);return Bt(o)?((s,i,a)=>{const l=gd("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:s,composedPath:l,initEvent:l,preventDefault:Re,stopImmediatePropagation:Re,stopPropagation:Re,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:l,initMouseEvent:l,getModifierState:l,dataTransfer:a,...jE(i)}})(e,t,r):(s=e,i=o,a=t,l=r,{...i,dataTransfer:l,type:s,...jE(a)});var s,i,a,l})(t,n,o,r);return e.dispatch(t,s)},VE=(e,t,n)=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.fold(()=>id(t,"dragend",o.element,o.dataTransfer),r=>id(t,"dragend",o.element,o.dataTransfer,r))}),KE(e)},KE=e=>{e.on(t=>{t.intervalId.clear(),WE(t.ghost)}),e.clear()},ad=st,YE=(e,t)=>$i(e.getBody(),t),AR=e=>{const t=e.selection,n=e.dom,o=e.getBody(),r=((e,t,n,o)=>{const r=$s();let s,i;const a=un(e),l=e.dom,c=()=>{(d=>{var u,f;const p=Yt(T(d),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<p.length;g++){const b=p[g].dom;let h=b.previousSibling;if(Ci(h)){const v=h.data;1===v.length?null===(u=h.parentNode)||void 0===u||u.removeChild(h):h.deleteData(v.length-1,1)}h=b.nextSibling,Ls(h)&&(1===h.data.length?null===(f=h.parentNode)||void 0===f||f.removeChild(h):h.deleteData(0,1))}})(t),i&&(Ri(i),i=null),r.on(d=>{l.remove(d.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(d,u)=>{let f;if(c(),LS(u))return null;if(!n(u))return i=((p,g)=>{var b;const h=(null!==(b=p.ownerDocument)&&void 0!==b?b:document).createTextNode(Mt),v=p.parentNode;if(g){const _=p.previousSibling;if(rs(_)){if(Xt(_))return _;if(Ci(_))return _.splitText(_.data.length-1)}v?.insertBefore(h,p)}else{const _=p.nextSibling;if(rs(_)){if(Xt(_))return _;if(Ls(_))return _.splitText(1),_}p.nextSibling?v?.insertBefore(h,p.nextSibling):v?.appendChild(h)}return h})(u,d),f=u.ownerDocument.createRange(),Cc(i.nextSibling)?(f.setStart(i,0),f.setEnd(i,0)):(f.setStart(i,1),f.setEnd(i,1)),f;{const p=((h,v,_)=>{var C;const k=(null!==(C=v.ownerDocument)&&void 0!==C?C:document).createElement(h);k.setAttribute("data-mce-caret",_?"before":"after"),k.setAttribute("data-mce-bogus","all"),k.appendChild(yi().dom);const E=v.parentNode;return _?E?.insertBefore(k,v):v.nextSibling?E?.insertBefore(k,v.nextSibling):E?.appendChild(k),k})(a,u,d),g=qb(t,u,d);l.setStyle(p,"top",g.top),i=p;const b=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(b,{...g}),l.add(t,b),r.set({caret:b,element:u,before:d}),d&&l.addClass(b,"mce-visual-caret-before"),s=setInterval(()=>{r.on(h=>{o()?l.toggleClass(h.caret,"mce-visual-caret-hidden"):l.addClass(h.caret,"mce-visual-caret-hidden")})},500),f=u.ownerDocument.createRange(),f.setStart(p,0),f.setEnd(p,0)}return f},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(d=>{const u=qb(t,d.element,d.before);l.setStyles(d.caret,{...u})})},destroy:()=>clearInterval(s)}})(e,o,n.isBlock,()=>Ii(e)),s="sel-"+n.uniqueId(),i="data-mce-selected";let a;const l=h=>h!==o&&(ad(h)||$o(h))&&n.isChildOf(h,o)&&n.isEditable(h.parentNode),c=(h,v,_,C=!0)=>e.dispatch("ShowCaret",{target:v,direction:h,before:_}).isDefaultPrevented()?null:(C&&t.scrollIntoView(v,-1===h),r.show(_,v)),d=h=>Xt(h)||Ls(h)||Ci(h),u=h=>d(h.startContainer)||d(h.endContainer),p=(h,v)=>{if(!h)return null;if(h.collapsed){if(!u(h)){const E=v?1:-1,N=Sc(E,o,h),R=N.getNode(!v);if(Q(R)){if(wc(R))return c(E,R,!!v&&!N.isAtEnd(),!1);if(Zo(R)&&st(R.nextSibling)){const P=n.createRng();return P.setStart(R,0),P.setEnd(R,0),P}}const L=N.getNode(v);if(Q(L)){if(wc(L))return c(E,L,!v&&!N.isAtEnd(),!1);if(Zo(L)&&st(L.previousSibling)){const P=n.createRng();return P.setStart(L,1),P.setEnd(L,1),P}}}return null}let _=h.startContainer,C=h.startOffset;const k=h.endOffset;if(Y(_)&&0===C&&ad(_.parentNode)&&(_=_.parentNode,C=n.nodeIndex(_),_=_.parentNode),!ie(_))return null;if(k===C+1&&_===h.endContainer){const E=_.childNodes[C];if(l(E))return(N=>{const R=N.cloneNode(!0),L=e.dispatch("ObjectSelected",{target:N,targetClone:R});if(L.isDefaultPrevented())return null;const P=((A,D)=>{const M=T(e.getBody()),z=e.getDoc(),te=ks(M,"#"+s).getOrThunk(()=>{const me=vr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',z);return wt(me,"id",s),Et(M,me),me}),G=n.createRng();Ns(te),Jr(te,[ws(Pt,z),T(D),ws(Pt,z)]),G.setStart(te.dom.firstChild,1),G.setEnd(te.dom.lastChild,0),ui(te,{top:n.getPos(A,e.getBody()).y+"px"}),s0(te);const he=t.getSel();return he&&(he.removeAllRanges(),he.addRange(G)),G})(N,L.targetClone),F=T(N);return W(Yt(T(e.getBody()),`*[${i}]`),A=>{We(F,A)||Ht(A,i)}),n.getAttrib(N,i)||N.setAttribute(i,"1"),a=N,b(),P})(E)}return null},g=()=>{a&&a.removeAttribute(i),ks(T(e.getBody()),"#"+s).each(ot),a=null},b=()=>{r.hide()};return Br(e)||(e.on("click",h=>{n.isEditable(h.target)||(h.preventDefault(),e.focus())}),e.on("blur NewBlock",g),e.on("ResizeWindow FullscreenStateChanged",r.reposition),e.on("tap",h=>{const v=h.target,_=YE(e,v);ad(_)?(h.preventDefault(),Vc(e,_).each(p)):l(v)&&Vc(e,v).each(p)},!0),e.on("mousedown",h=>{const v=h.target;if(v!==o&&"HTML"!==v.nodeName&&!n.isChildOf(v,o)||!((C,k,E)=>{const N=T(C.getBody()),R=C.inline?N:T(Ko(N).dom.documentElement),L=((P,F,A,D)=>{const M=F.dom.getBoundingClientRect();return{x:A-(P?M.left+F.dom.clientLeft+oT(F):0),y:D-(P?M.top+F.dom.clientTop+nT(F):0)}})(C.inline,R,k,E);return((P,F,A)=>{const D=eT(P),M=tT(P);return F>=0&&A>=0&&F<=D&&A<=M})(R,L.x,L.y)})(e,h.clientX,h.clientY))return;g(),b();const _=YE(e,v);ad(_)?(h.preventDefault(),Vc(e,_).each(p)):IE(o,h.clientX,h.clientY).each(C=>{var k;h.preventDefault(),(k=c(1,C.node,C.position===rl.Before,!1))&&t.setRng(k),sn(_)?_.focus():e.getBody().focus()})}),e.on("keypress",h=>{oe.modifierPressed(h)||ad(t.getNode())&&h.preventDefault()}),e.on("GetSelectionRange",h=>{let v=h.range;if(a){if(!a.parentNode)return void(a=null);v=v.cloneRange(),v.selectNode(a),h.range=v}}),e.on("SetSelectionRange",h=>{h.range=(h=>{const v=e.schema.getVoidElements(),_=n.createRng(),C=h.startContainer,k=h.startOffset,E=h.endContainer,N=h.endOffset;return Oe(v,C.nodeName.toLowerCase())?0===k?_.setStartBefore(C):_.setStartAfter(C):_.setStart(C,k),Oe(v,E.nodeName.toLowerCase())?0===N?_.setEndBefore(E):_.setEndAfter(E):_.setEnd(E,N),_})(h.range);const v=p(h.range,h.forward);v&&(h.range=v)}),e.on("AfterSetSelectionRange",h=>{const v=h.range,_=v.startContainer.parentElement;var C,k;u(v)||ie(C=_)&&"mcepastebin"===C.id||b(),Q(k=_)&&n.hasClass(k,"mce-offscreen-selection")||g()}),(e=>{const t=$s(),n=rt.DOM,o=document,r=(l=t,c=e,d=>{if(0===d.button){const u=Tt(c.dom.getParents(d.target),xR).getOr(null);if(Q(u)&&(f=c.dom,p=c.getBody(),$E(g=u)&&g!==p&&f.isEditable(g.parentElement))){const f=c.dom.getPos(u),p=c.getBody(),g=c.getDoc().documentElement;l.set({element:u,dataTransfer:lp(),dragging:!1,screenX:d.screenX,screenY:d.screenY,maxX:(c.inline?p.scrollWidth:g.offsetWidth)-2,maxY:(c.inline?p.scrollHeight:g.offsetHeight)-2,relX:d.pageX-f.x,relY:d.pageY-f.y,width:u.offsetWidth,height:u.offsetHeight,ghost:kR(c,u,u.offsetWidth,u.offsetHeight),intervalId:tk(100)})}}var f,p,g}),s=((e,t)=>{const n=su((r,s)=>{return a=r,l=s,(i=t)._selectionOverrides.hideFakeCaret(),void IE(i.getBody(),a,l).fold(()=>i.selection.placeCaretAt(a,l),c=>{const d=i._selectionOverrides.showCaret(1,c.node,c.position===rl.Before,!1);d?i.selection.setRng(d):i.selection.placeCaretAt(a,l)});var i,a,l},0);t.on("remove",n.cancel);const o=e;return r=>e.on(s=>{const i=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&i>10){const c=id(t,"dragstart",s.element,s.dataTransfer,r);if(Q(c.dataTransfer)&&(s.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;s.dragging=!0,t.focus()}if(s.dragging){const c=r.currentTarget===t.getDoc().documentElement,d=((u,f)=>({pageX:f.pageX-u.relX,pageY:f.pageY+5}))(s,(f=r,p=(h=u=t).inline?FE(h.getBody()):{left:0,top:0},g=(h=>{const v=h.getBody();return h.inline?{left:v.scrollLeft,top:v.scrollTop}:{left:0,top:0}})(u),b=((h,v)=>{if(v.target.ownerDocument!==h.getDoc()){const _=FE(h.getContentAreaContainer()),C=(k=>{const E=k.getBody(),N=k.getDoc().documentElement;return k.inline?{left:E.scrollLeft,top:E.scrollTop}:{left:E.scrollLeft||N.scrollLeft,top:E.scrollTop||N.scrollTop}})(h);return{left:v.pageX-_.left+C.left,top:v.pageY-_.top+C.top}}return{left:v.pageX,top:v.pageY}})(u,f),{pageX:b.left-p.left+g.left,pageY:b.top-p.top+g.top}));a=s.ghost,l=t.getBody(),a.parentNode!==l&&l.appendChild(a),((u,f,p,g,b,h,v,_,C,k,E,N)=>{let R=0,L=0;u.style.left=f.pageX+"px",u.style.top=f.pageY+"px",f.pageX+p>b&&(R=f.pageX+p-b),f.pageY+g>h&&(L=f.pageY+g-h),u.style.width=p-R+"px",u.style.height=g-L+"px";const P=C.clientHeight,F=C.clientWidth,A=v+C.getBoundingClientRect().top,D=_+C.getBoundingClientRect().left;E.on(M=>{M.intervalId.clear(),M.dragging&&N&&(v+8>=P?M.intervalId.set(qE(k)):v-8<=0?M.intervalId.set(HE(k)):_+8>=F?M.intervalId.set(zE(k)):_-8<=0?M.intervalId.set(UE(k)):A+16>=window.innerHeight?M.intervalId.set(qE(window)):A-16<=0?M.intervalId.set(HE(window)):D+16>=window.innerWidth?M.intervalId.set(zE(window)):D-16<=0&&M.intervalId.set(UE(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(r.clientX,r.clientY)}var u,f,h,p,g,b,a,l})})(t,e),i=((l,c)=>d=>{l.on(u=>{var f,p,g,b;if(u.intervalId.clear(),u.dragging){if(p=c,g=(p=>{const g=p.getSel();if(Q(g)){const b=g.getRangeAt(0).startContainer;return Y(b)?b.parentNode:b}return null})(c.selection),b=u.element,!kt(g)&&g!==b&&!p.dom.isChildOf(g,b)&&p.dom.isEditable(g)){const p=null!==(f=c.getDoc().elementFromPoint(d.clientX,d.clientY))&&void 0!==f?f:c.getBody();id(c,"drop",p,u.dataTransfer,d).isDefaultPrevented()||c.undoManager.transact(()=>{((g,b)=>{const h=g.getParent(b.parentNode,g.isBlock);WE(b),h&&h!==g.getRoot()&&g.isEmpty(h)&&wr(T(h))})(c.dom,u.element),(g=>{const b=g.getData("text/html");return""===b?w.none():w.some(b)})(u.dataTransfer).each(g=>c.insertContent(g)),c._selectionOverrides.hideFakeCaret()})}id(c,"dragend",c.getBody(),u.dataTransfer,d)}}),KE(l)})(t,e),a=((l,c)=>d=>VE(l,c,w.some(d)))(t,e);var l,c;e.on("mousedown",r),e.on("mousemove",s),e.on("mouseup",i),n.bind(o,"mousemove",s),n.bind(o,"mouseup",a),e.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",a)}),e.on("keydown",l=>{l.keyCode===oe.ESC&&VE(t,e,w.none())})})(h=e),Jk(h)&&(v=>{const _=E=>{if(!E.isDefaultPrevented()){const N=E.dataTransfer;N&&(ae(N.types,"Files")||N.files.length>0)&&(E.preventDefault(),"drop"===E.type&&Yu(v,"Dropped file type is not supported"))}},C=E=>{Au(v,E.target)&&_(E)},k=()=>{const E=rt.DOM,N=v.dom,R=document,L=v.inline?v.getBody():v.getDoc(),P=["drop","dragover"];W(P,F=>{E.bind(R,F,C),N.bind(L,F,_)}),v.on("remove",()=>{W(P,F=>{E.unbind(R,F,C),N.unbind(L,F,_)})})};v.on("init",()=>{ho.setEditorTimeout(v,k,0)})})(h),(h=>{const v=su(()=>{if(!h.removed&&h.getBody().contains(document.activeElement)){const _=h.selection.getRng();if(_.collapsed){const C=bh(h,_,!1);h.selection.setRng(C)}}},0);h.on("focus",()=>{v.throttle()}),h.on("blur",()=>{v.cancel()})})(e),(h=>{h.on("init",()=>{h.on("focusin",v=>{const _=v.target;if($o(_)){const C=$i(h.getBody(),_),k=st(C)?C:_;h.selection.getNode()!==k&&Vc(h,k).each(E=>h.selection.setRng(E))}})})})(e)),{showCaret:c,showBlockCaretContainer:h=>{h.hasAttribute("data-mce-caret")&&(wi(h),t.scrollIntoView(h))},hideFakeCaret:b,destroy:()=>{r.destroy(),a=null}};var h},TR=(e,t)=>{let n=t;for(let o=e.previousSibling;Y(o);o=o.previousSibling)n+=o.data.length;return n},XE=(e,t,n,o,r)=>{if(Y(n)&&(o<0||o>n.data.length))return[];const s=r&&Y(n)?[TR(n,o)]:[o];let i=n;for(;i!==t&&i.parentNode;)s.push(e.nodeIndex(i,r)),i=i.parentNode;return i===t?s.reverse():[]},pp=(e,t,n,o,r,s,i=!1)=>({start:XE(e,t,n,o,i),end:XE(e,t,r,s,i)}),GE=(e,t)=>{const n=t.slice(),o=n.pop();return Dn(o)?$t(n,(r,s)=>r.bind(i=>w.from(i.childNodes[s])),w.some(e)).bind(r=>Y(r)&&(o<0||o>r.data.length)?w.none():w.some({node:r,offset:o})):w.none()},QE=(e,t)=>GE(e,t.start).bind(({node:n,offset:o})=>GE(e,t.end).map(({node:r,offset:s})=>{const i=document.createRange();return i.setStart(n,o),i.setEnd(r,s),i})),sl=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const o=t.parentNode;e.remove(t,Y(t.firstChild)&&ao(t.firstChild.data)),sl(e,o,n)}},wm=(e,t,n,o=!0)=>{const r=t.startContainer.parentNode,s=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(Y(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Y(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),sl(e,r,n),r!==s&&sl(e,s,n))},bp=(e,t)=>w.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),JE=(e,t,n)=>{const o=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:yb(o).concat(e.blockPatterns),inlinePatterns:_b(o).concat(e.inlinePatterns)}},ZE=(e,t,n,o)=>{const r=e.createRng();return r.setStart(t,0),r.setEnd(n,o),r.toString()},ex=(e,t,n)=>{((o,r,s)=>{if(Y(o)&&0>=o.length)return w.some(ir(o,0));{const i=Ai(rm);return w.from(i.forwards(o,0,sm(o),s)).map(a=>ir(a.container,0))}})(t,0,t).each(o=>{const r=o.container;c1(r,n.start.length,t).each(a=>{const l=e.createRng();l.setStart(r,0),l.setEnd(a.container,a.offset),wm(e,l,c=>c===t)});const s=T(r),i=pi(s);var a,l;/^\s[^\s]/.test(i)&&(a=s,l=i.slice(1),hi.set(a,l))})},tx=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Em=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},nx=(e,t,n)=>{const o=QE(e.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,i=0===o.endOffset?s:s.splitText(o.endOffset),a=0===o.startOffset?r:r.splitText(o.startOffset),l=a.parentNode;return{prefix:t,end:i.parentNode.insertBefore(tx(e,t+"-end"),i),start:l.insertBefore(tx(e,t+"-start"),a)}},ox=(e,t,n)=>{sl(e,e.get(t.prefix+"-end"),n),sl(e,e.get(t.prefix+"-start"),n)},vp=e=>0===e.start.length,rx=(e,t,n,o)=>{const r=t.start;var s;return $h(e,o.container,o.offset,(s=r,(i,a)=>{const l=i.data.substring(0,a),c=l.lastIndexOf(s.charAt(s.length-1)),d=l.lastIndexOf(s);return-1!==d?d+s.length:-1!==c?c+1:-1}),n).bind(i=>{var a,l;const c=null!==(l=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(r))&&void 0!==l?l:-1;if(-1!==c&&i.offset>=c+r.length){const d=e.createRng();return d.setStart(i.container,i.offset-r.length),d.setEnd(i.container,i.offset),w.some(d)}return jh(i.container,i.offset-r.length,n).map(u=>{const f=e.createRng();return f.setStart(u.container,u.offset),f.setEnd(i.container,i.offset),f}).filter(u=>u.toString()===r).orThunk(()=>rx(e,t,n,ir(i.container,0)))})},OR=(e,t,n,o)=>{const r=e.dom,s=r.getRoot(),i=n.pattern,a=n.position.container,l=n.position.offset;return jh(a,l-n.pattern.end.length,t).bind(c=>{const d=pp(r,s,c.container,c.offset,a,l,o);if(vp(i))return w.some({matches:[{pattern:i,startRng:d,endRng:d}],position:c});{const u=xm(e,n.remainingPatterns,c.container,c.offset,t,o),f=u.getOr({matches:[],position:c}),p=f.position;return((b,h,v,_,C,k=!1)=>{if(0===h.start.length&&!k){const E=b.createRng();return E.setStart(v,_),E.setEnd(v,_),w.some(E)}return Fh(v,_,C).bind(E=>rx(b,h,C,E).bind(N=>{var R;return k&&(N.endContainer===E.container&&N.endOffset===E.offset||0===E.offset&&(null===(R=N.endContainer.textContent)||void 0===R?void 0:R.length)===N.endOffset)?w.none():w.some(N)}))})(r,i,p.container,p.offset,t,u.isNone()).map(b=>{const h=((v,_,C,k=!1)=>pp(v,_,C.startContainer,C.startOffset,C.endContainer,C.endOffset,k))(r,s,b,o);return{matches:f.matches.concat([{pattern:i,startRng:h,endRng:d}]),position:ir(b.startContainer,b.startOffset)}})}})},xm=(e,t,n,o,r,s)=>{const i=e.dom;return Fh(n,o,i.getRoot()).bind(a=>{const l=ZE(i,r,n,o);for(let c=0;c<t.length;c++){const d=t[c];if(!fn(l,d.end))continue;const u=t.slice();u.splice(c,1);const f=OR(e,r,{pattern:d,remainingPatterns:u,position:a},s);if(f.isNone()&&o>0)return xm(e,t,n,o-1,r,s);if(f.isSome())return f}return w.none()})},sx=(e,t,n)=>{e.selection.setRng(n),"inline-format"===t.type?W(t.format,o=>{e.formatter.apply(o)}):e.execCommand(t.cmd,!1,t.value)},ix=(e,t,n,o,r,s)=>{var i;return((a,l)=>{const c=ur(a,d=>dt(l,u=>d.pattern.start===u.pattern.start&&d.pattern.end===u.pattern.end));return a.length===l.length?c?a:l:a.length>l.length?a:l})(xm(e,r.inlinePatterns,n,o,t,s).fold(()=>[],a=>a.matches),xm(e,(i=r.inlinePatterns,mr(i,(a,l)=>l.end.length-a.end.length)),n,o,t,s).fold(()=>[],a=>a.matches))},ax=(e,t)=>{if(0===t.length)return;const n=e.dom,o=e.selection.getBookmark(),r=((s,i)=>{const a=gc("mce_textpattern"),l=Wo(i,(c,d)=>{const u=nx(s,a+`_end${c.length}`,d.endRng);return c.concat([{...d,endMarker:u}])},[]);return Wo(l,(c,d)=>{const u=l.length-c.length-1,f=vp(d.pattern)?d.endMarker:nx(s,a+`_start${u}`,d.startRng);return c.concat([{...d,startMarker:f}])},[])})(n,t);W(r,s=>{const i=n.getParent(s.startMarker.start,n.isBlock),a=l=>l===i;vp(s.pattern)?((l,c,d,u)=>{const f=Em(l.dom,d);wm(l.dom,f,u),sx(l,c,f)})(e,s.pattern,s.endMarker,a):((l,c,d,u,f)=>{const p=l.dom,g=Em(p,u),b=Em(p,d);wm(p,b,f),wm(p,g,f);const v=Em(p,{prefix:d.prefix,start:d.end,end:u.start});sx(l,c,v)})(e,s.pattern,s.startMarker,s.endMarker,a),ox(n,s.endMarker,a),ox(n,s.startMarker,a)}),e.selection.moveToBookmark(o)},lx=(e,t,n)=>{for(let o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},yp=rt.DOM,BR=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,_p=e=>fs(e,t=>!1===Bt(t)),cx=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return _p({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:BR(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},dx=e=>{const t=e.options.get;return _p({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},Cp=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,ux=e=>{const t=Cp(e),n=Rb(e),o=e.contentCSS,r=()=>{t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},s=()=>{e.removed?r():e.on("remove",r)};if(e.contentStyles.length>0){let l="";X.each(e.contentStyles,c=>{l+=c+"\r\n"}),e.dom.addStyle(l)}const i=Promise.all(((l,c,d)=>{const{pass:u,fail:f}=No(c,b=>tinymce.Resource.has(mh(b))),g=[...u.map(b=>{const h=tinymce.Resource.get(mh(b));return ge(h)?Promise.resolve(Cp(l).loadRawCss(b,h)):Promise.resolve()}),Cp(l).loadAll(f)];return l.inline?g:g.concat([l.ui.styleSheetLoader.loadAll(d)])})(e,o,n)).then(s).catch(s),a=Rk(e);return a&&((l,c)=>{const d=T(l.getBody()),u=Ln(_r(d)),f=Lt("style");wt(f,"type","text/css"),Et(f,ws(c)),Et(u,f),l.on("remove",()=>{ot(f)})})(e,a),i},wp=e=>{var t;!0!==e.removed&&(Br(t=e)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,t.dispatch("Init"),t.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||vu(o)&&o.selection.getStart(!0)!==r||mn(r).each(s=>{const i=s.getNode(),a=Go(i)?mn(i).getOr(s):s;o.selection.setRng(a.toRange())})})(t),t.nodeChanged({initial:!0});const n=oS(t);Ke(n)&&n.call(t,t),(o=>{const r=sS(o);r&&ho.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(t)})(e))},mx=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(yp.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const o=e.getBody();var i,a;o.disabled=!0,e.readonly=Lb(e),e._editableRoot=Gk(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===yp.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=(e=>{const t=(()=>{let b=[];const h=C=>{if(!C.blob||!C.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const k=C.id||"blobid"+sT+++(()=>{const L=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+L()+L()+L()})(),E=C.name||k,N=C.blob;var R;return{id:Z(k),name:Z(E),filename:Z(C.filename||E+"."+(R=N.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[R.toLowerCase()]||"dat")),blob:Z(N),base64:Z(C.base64),blobUri:Z(C.blobUri||URL.createObjectURL(N)),uri:Z(C.uri)}},v=C=>Tt(b,C).getOrUndefined(),_=C=>v(k=>k.id()===C);return{create:(C,k,E,N,R)=>{if(ge(C))return h({id:C,name:N,filename:R,blob:k,base64:E});if(Vt(C))return h(C);throw new Error("Unknown input type")},add:C=>{_(C.id())||b.push(C)},get:_,getByUri:C=>v(k=>k.blobUri()===C),getByData:(C,k)=>v(E=>E.base64()===C&&E.blob().type===k),findFirst:v,removeByUri:C=>{b=ke(b,k=>k.blobUri()!==C||(URL.revokeObjectURL(k.blobUri()),!1))},destroy:()=>{W(b,C=>{URL.revokeObjectURL(C.blobUri())}),b=[]}}})();let n,o;const r=yC(),s=[],i=b=>h=>e.selection?b(h):[],a=(b,h,v)=>{let _=0;do{_=b.indexOf(h,_),-1!==_&&(b=b.substring(0,_)+v+b.substr(_+h.length),_+=v.length-h.length+1)}while(-1!==_);return b},l=(b,h,v)=>(b=a(b,`src="${h}"`,`src="${v}"${v===Pe.transparentSrc?' data-mce-placeholder="1"':""}`),a(b,'data-mce-src="'+h+'"','data-mce-src="'+v+'"')),c=(b,h)=>{W(e.undoManager.data,v=>{"fragmented"===v.type?v.fragments=ze(v.fragments,_=>l(_,b,h)):v.content=l(v.content,b,h)})},d=()=>(n||(n=CC(e,r)),p().then(i(b=>{const h=ze(b,v=>v.blobInfo);return n.upload(h,_C(e)).then(i(v=>{const _=[];let C=!1;const k=ze(v,(E,N)=>{const{blobInfo:R,image:L}=b[N];let P=!1;return E.status&&Ck(e)?(E.url&&!St(L.src,E.url)&&(C=!0),t.removeByUri(L.src),Br(e)||((F,A)=>{const D=e.convertURL(A,"src");var M;c(F.src,A),so(T(F),{src:Nb(e)?(M=A,M+(-1===M.indexOf("?")?"?":"&")+(new Date).getTime()):A,"data-mce-src":D})})(L,E.url)):E.error&&(E.error.remove&&(c(L.src,Pe.transparentSrc),_.push(L),P=!0),Yu(e,nr.translate(["Failed to upload image: {0}",E.error.message]))),{element:L,status:E.status,uploadUri:E.url,blobInfo:R,removed:P}});return _.length>0&&!Br(e)?e.undoManager.transact(()=>{W(mi(_),E=>{const N=Vn(E);var R;ot(E),N.each((R=e,L=>{var P,F;(P=R).dom.isEmpty((F=L).dom)&&Q(P.schema.getTextBlockElements()[Fe(F)])&&Et(L,vr('<br data-mce-bogus="1" />'))})),t.removeByUri(E.dom.src)})}):C&&e.undoManager.dispatchChange(),k}))}))),u=()=>Sb(e)?d():Promise.resolve([]),f=b=>ur(s,h=>h(b)),p=()=>(o||(o=((e,t)=>{const n={};return{findAll:(o,r=Ct)=>{const s=ke((a=o)?nn(a.getElementsByTagName("img")):[],a=>{const l=a.src;return!a.hasAttribute("data-mce-bogus")&&!a.hasAttribute("data-mce-placeholder")&&!(!l||l===Pe.transparentSrc)&&(Qe(l,"blob:")?!e.isUploaded(l)&&r(a):!!Qe(l,"data:")&&r(a))}),i=ze(s,a=>{const l=a.src;if(Oe(n,l))return n[l].then(c=>ge(c)?c:{image:a,blobInfo:c.blobInfo});{const c=((d,u)=>{const f=()=>Promise.reject("Invalid data URI");if(Qe(u,"blob:")){const b=d.getByUri(u);return Q(b)?Promise.resolve(b):(p=u,Qe(p,"blob:")?(h=p,fetch(h).then(v=>v.ok?v.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${h} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):Qe(p,"data:")?(g=p,new Promise((h,v)=>{Kg(g).bind(({type:_,data:C,base64Encoded:k})=>b_(_,C,k)).fold(()=>v("Invalid data URI"),h)})):Promise.reject("Unknown URI format")).then(h=>v_(h).then(v=>y_(v,!1,_=>w.some(__(d,h,_))).getOrThunk(f)))}var h,p,g;return Qe(u,"data:")?C_(d,u).fold(f,b=>Promise.resolve(b)):Promise.reject("Unknown image data format")})(t,l).then(d=>(delete n[l],{image:a,blobInfo:d})).catch(d=>(delete n[l],d));return n[l]=c,c}});var a;return Promise.all(i)}}})(r,t)),o.findAll(e.getBody(),f).then(i(b=>{const h=ke(b,v=>ge(v)?(Yu(e,v),!1):"blob"!==v.uriType);return Br(e)||W(h,v=>{c(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")}),h}))),g=b=>b.replace(/src="(blob:[^"]+)"/g,(h,v)=>{const _=r.getResultUri(v);if(_)return'src="'+_+'"';let C=t.getByUri(v);return C||(C=$t(e.editorManager.get(),(k,E)=>k||E.editorUpload&&E.editorUpload.blobCache.getByUri(v),void 0)),C?'src="data:'+C.blob().type+";base64,"+C.base64()+'"':h});return e.on("SetContent",()=>{Sb(e)?u():p()}),e.on("RawSaveContent",b=>{b.content=g(b.content)}),e.on("GetContent",b=>{b.source_view||"raw"===b.format||"tree"===b.format||(b.content=g(b.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",b=>{W(b,h=>{const v=h.attr("src");if(!v||t.getByUri(v))return;const _=r.getResultUri(v);_&&h.attr("src",_)})})}),{blobCache:t,addFilter:b=>{s.push(b)},uploadImages:d,uploadImagesAuto:u,scanForImages:p,destroy:()=>{t.destroy(),r.destroy(),o=n=null}}})(e),e.schema=co(dx(e)),e.dom=rt(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Nk(e),referrerPolicy:hf(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)},force_hex_color:TS(e)}),e.parser=(i=>{const a=Xa(cx(i),i.schema);return a.addAttributeFilter("src,href,style,tabindex",(l,c)=>{const d=i.dom,u="data-mce-"+c;let f=l.length;for(;f--;){const p=l[f];let g=p.attr(c);if(g&&!p.attr(u)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===c?(g=d.serializeStyle(d.parseStyle(g),p.name),g.length||(g=null),p.attr(u,g),p.attr(c,g)):"tabindex"===c?(p.attr(u,g),p.attr(c,null)):p.attr(u,i.convertURL(g,c,p.name))}}}),a.addNodeFilter("script",l=>{let c=l.length;for(;c--;){const d=l[c],u=d.attr("type")||"no/type";0!==u.indexOf("mce-")&&d.attr("type","mce-"+u)}}),ES(i)&&a.addNodeFilter("#cdata",l=>{var c;let d=l.length;for(;d--;){const u=l[d];u.type=8,u.name="#comment",u.value="[CDATA["+i.dom.encode(null!==(c=u.value)&&void 0!==c?c:"")+"]]"}}),a.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let c=l.length;const d=i.schema.getNonEmptyElements();for(;c--;){const u=l[c];u.isEmpty(d)&&0===u.getAll("br").length&&u.append(new yn("br",1))}}),a})(e),e.serializer=cC((i=>{const a=i.options.get;return{...cx(i),...dx(i),..._p({remove_trailing_brs:a("remove_trailing_brs"),pad_empty_with_br:a("pad_empty_with_br"),url_converter:a("url_converter"),url_converter_scope:a("url_converter_scope"),element_format:a("element_format"),entities:a("entities"),entity_encoding:a("entity_encoding"),indent:a("indent"),indent_after:a("indent_after"),indent_before:a("indent_before")})}})(e),e),e.selection=lC(e.dom,e.getWin(),e.serializer,e),e.annotator=Dv(e),e.formatter=xC(e),e.undoManager=SC(e),e._nodeChangeDispatcher=new ZO(e),e._selectionOverrides=AR(e),(i=>{const a=$s(),l=Qt(!1),c=of(d=>{i.dispatch("longpress",{...d,type:"longpress"}),l.set(!0)},400);i.on("touchstart",d=>{Bw(d).each(u=>{c.cancel();const f={x:u.clientX,y:u.clientY,target:d.target};c.throttle(d),l.set(!1),a.set(f)})},!0),i.on("touchmove",d=>{c.cancel(),Bw(d).each(u=>{a.on(f=>{((p,g)=>{const b=Math.abs(p.clientX-g.x),h=Math.abs(p.clientY-g.y);return b>5||h>5})(u,f)&&(a.clear(),l.set(!1),i.dispatch("longpresscancel"))})})},!0),i.on("touchend touchcancel",d=>{c.cancel(),"touchcancel"!==d.type&&a.get().filter(u=>u.target.isEqualNode(d.target)).each(()=>{l.get()?d.preventDefault():i.dispatch("tap",{...d,type:"tap"})})},!0)})(e),(a=i=e).on("click",l=>{a.dom.getParent(l.target,"details")&&l.preventDefault()}),(a=>{a.parser.addNodeFilter("details",l=>{const c=NS(a);W(l,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})}),a.serializer.addNodeFilter("details",l=>{const c=AS(a);W(l,d=>{"expanded"===c?d.attr("open","open"):"collapsed"===c&&d.attr("open",null)})})})(i),(i=>{const a="contenteditable",l=" "+X.trim(CS(i))+" ",c=" "+X.trim(Ib(i))+" ",d=Mw(l),u=Mw(c),f=wS(i);f.length>0&&i.on("BeforeSetContent",p=>{((g,b,h)=>{let v=b.length,_=h.content;if("raw"!==h.format){for(;v--;)_=_.replace(b[v],GT(g,_,Ib(g)));h.content=_}})(i,f,p)}),i.parser.addAttributeFilter("class",p=>{let g=p.length;for(;g--;){const b=p[g];d(b)?b.attr(a,"true"):u(b)&&b.attr(a,"false")}}),i.serializer.addAttributeFilter(a,p=>{let g=p.length;for(;g--;){const b=p[g];(d(b)||u(b))&&(f.length>0&&b.attr("data-mce-content")?(b.name="#text",b.type=3,b.raw=!0,b.value=b.attr("data-mce-content")):b.attr(a,null))}})})(e),Br(e)||((i=>{i.on("mousedown",a=>{a.detail>=3&&(a.preventDefault(),(e=>{const t=((n,o,r)=>{const s=U.fromRangeStart(n).getNode(),i=(u=o,f=r,Io(T(s),p=>Yn(p.dom)||f.isBlock(Fe(p)),LE(u)).getOr(T(u)).dom),a=ME(s,i,!1),l=ME(s,i,!0),c=document.createRange();var u,f;return PE(a,i).fold(()=>{BE(a)?c.setStart(a,0):c.setStartBefore(a)},d=>c.setStartBefore(d.dom)),PE(l,i).fold(()=>{BE(l)?c.setEnd(l,l.data.length):c.setEndAfter(l)},d=>c.setEndAfter(d.dom)),c})(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Rg(t))})(i))})})(e),(i=>{(a=>{const l=[",",".",";",":","!","?"],c=[32],d=()=>{return p=yS(a),g=_S(a),{inlinePatterns:_b(p),blockPatterns:yb(p),dynamicPatternsLookup:g};var p,g},u=()=>a.options.isSet("text_patterns_lookup");a.on("keydown",p=>{if(13===p.keyCode&&!oe.modifierPressed(p)&&a.selection.isCollapsed()){const g=d();(g.inlinePatterns.length>0||g.blockPatterns.length>0||u())&&((e,t)=>{const n=e.selection.getRng();return bp(e,n).map(o=>{var r;const s=Math.max(0,n.startOffset),i=JE(t,o,null!==(r=o.textContent)&&void 0!==r?r:""),a=ix(e,o,n.startContainer,s,i,!0),l=((c,d,u,f)=>{var p;const g=c.dom,b=un(c);if(!g.is(d,b))return[];const h=null!==(p=d.textContent)&&void 0!==p?p:"";return((v,_)=>{const C=mr(v,(N,R)=>R.start.length-N.start.length),k=_.replace(Pt," ");return Tt(C,E=>0===_.indexOf(E.start)||0===k.indexOf(E.start))})(u.blockPatterns,h).map(v=>X.trim(h).length===v.start.length?[]:[{pattern:v,range:pp(g,g.getRoot(),d,0,d,0,!0)}]).getOr([])})(e,o,i);return(l.length>0||a.length>0)&&(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Mt,{preserve_zwsp:!0}),ax(e,a),((u,f)=>{if(0===f.length)return;const p=u.selection.getBookmark();W(f,g=>((b,h)=>{const _=h.pattern,C=QE(b.dom.getRoot(),h.range).getOrDie("Unable to resolve path range");return bp(b,C).each(k=>{"block-format"===_.type?((E,N)=>{const R=N.get(E);return Je(R)&&Ut(R).exists(L=>Oe(L,"block"))})(_.format,b.formatter)&&b.undoManager.transact(()=>{ex(b.dom,k,_),b.formatter.apply(_.format)}):"block-command"===_.type&&b.undoManager.transact(()=>{ex(b.dom,k,_),b.execCommand(_.cmd,!1,_.value)})}),!0})(u,g)),u.selection.moveToBookmark(p)})(e,l);const c=e.selection.getRng(),d=Fh(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),d.each(u=>{const f=u.container;"\ufeff"===f.data.charAt(u.offset-1)&&(f.deleteData(u.offset-1,1),sl(e.dom,f.parentNode,p=>p===e.dom.getRoot()))})}),!0)}).getOr(!1)})(a,g)&&p.preventDefault()}},!0);const f=()=>{if(a.selection.isCollapsed()){const p=d();(p.inlinePatterns.length>0||u())&&((g,b)=>{const h=g.selection.getRng();bp(g,h).map(v=>{const _=Math.max(0,h.startOffset-1),C=ZE(g.dom,v,h.startContainer,_),k=JE(b,v,C),E=ix(g,v,h.startContainer,_,k,!1);E.length>0&&g.undoManager.transact(()=>{ax(g,E)})})})(a,p)}};a.on("keyup",p=>{lx(c,p,(g,b)=>g===b.keyCode&&!oe.modifierPressed(b))&&f()}),a.on("keypress",p=>{lx(l,p,(g,b)=>g.charCodeAt(0)===b.charCode)&&ho.setEditorTimeout(a,f)})})(i)})(e));const r=JO(e);((e,t)=>{e.addCommand("delete",()=>{var n;Dw(n=e,t,!1).fold(()=>{n.selection.isEditable()&&(pg(n),bg(n))},ee)}),e.addCommand("forwardDelete",()=>{var n;Dw(n=e,t,!0).fold(()=>{n.selection.isEditable()&&ay(n,"ForwardDelete")},ee)})})(e,r),(i=>{i.on("NodeChange",se(XT,i))})(e),(i=>{var a;const l=i.dom,c=un(i),d=null!==(a=Pk(i))&&void 0!==a?a:"",u=(f,p)=>{if((h=>{if(AC(h)){const v=h.keyCode;return!TC(h)&&(oe.metaKeyPressed(h)||h.altKey||v>=112&&v<=123||ae(mT,v))}return!1})(f))return;const g=i.getBody(),b=!(AC(h=f)&&!(TC(h)||"keyup"===h.type&&229===h.keyCode))&&((h,v,_)=>{if(I(T(v),!1)){const C=v.firstElementChild;return!C||!h.getStyle(v.firstElementChild,"padding-left")&&!h.getStyle(v.firstElementChild,"padding-right")&&_===C.nodeName.toLowerCase()}return!1})(l,g,c);var h;(""!==l.getAttrib(g,NC)!==b||p)&&(l.setAttrib(g,NC,b?d:null),l.setAttrib(g,"aria-placeholder",b?d:null),((h,v)=>{h.dispatch("PlaceholderToggle",{state:v})})(i,b),i.on(b?"keydown":"keyup",u),i.off(b?"keyup":"keydown",u))};ln(d)&&i.on("init",f=>{u(f,!0),i.on("change SetContent ExecCommand",u),i.on("paste",p=>ho.setEditorTimeout(i,()=>u(p)))})})(e),(e=>{const t=Qt(!1),n=Qt(pS(e)?"text":"html"),o=(r=>{const s=Qt(null);return{create:()=>((i,a)=>{const{dom:l,selection:c}=i,d=i.getBody();a.set(c.getRng());const u=l.add(i.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},bE);Pe.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(d,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),c.select(u,!0)})(r,s),remove:()=>((i,a)=>{const l=i.dom;if(dp(i)){let c;const d=a.get();for(;c=dp(i);)l.remove(c),l.unbind(c);d&&i.selection.setRng(d)}a.set(null)})(r,s),getEl:()=>dp(r),getHtml:()=>(i=>{const a=i.dom,l=(f,p)=>{f.appendChild(p),a.remove(p,!0)},[c,...d]=ke(i.getBody().childNodes,aR);W(d,f=>{l(c,f)});const u=a.select("div[id=mcepastebin]",c);for(let f=u.length-1;f>=0;f--){const p=a.create("div");c.insertBefore(p,u[f]),l(p,u[f])}return c?c.innerHTML:""})(r),getLastRng:s.get}})(e);var r,s,i;r=e,(Pe.browser.isChromium()||Pe.browser.isSafari())&&(i=gR,(s=r).on("PastePreProcess",a=>{a.content=i(s,a.content,a.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((i,a)=>{"text"===a.get()?(a.set("html"),jv(i,!1)):(a.set("text"),jv(i,!0)),i.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(i,a)=>{a.html&&_m(r,a.html,a.internal,!1),a.text&&fp(r,a.text,!1)})})(e,n),(r=>{const s=l=>c=>{l(r,c)},i=cS(r);Ke(i)&&r.on("PastePreProcess",s(i));const a=dS(r);Ke(a)&&r.on("PastePostProcess",s(a))})(e),e.on("PreInit",()=>{(r=>{r.on("cut",(s=>i=>{!i.isDefaultPrevented()&&TE(s)&&s.selection.isEditable()&&SE(i,AE(s),NE(s),()=>{if(Pe.browser.isChromium()||Pe.browser.isFirefox()){const a=s.selection.getRng();ho.setEditorTimeout(s,()=>{s.selection.setRng(a),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>i=>{!i.isDefaultPrevented()&&TE(s)&&SE(i,AE(s),NE(s),Re)})(r))})(e),((r,s)=>{lS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",i=>{i.preventDefault(),i.stopPropagation()}),uu(r)||r.on("drop",i=>{const a=i.dataTransfer;a&&dt(a.files,c=>/^image\//.test(c.type))&&i.preventDefault()}),r.on("drop",i=>{if(i.isDefaultPrevented())return;const a=OE(r,i);if(kt(a))return;const l=EE(i.dataTransfer),c=Gs(l,ym());if((!xE(l)||(g=>{const b=g["text/plain"];return!!b&&0===b.indexOf("file://")})(l))&&kE(r,i,a))return;const d=l[ym()],u=d||l["text/html"]||l["text/plain"],f=((g,b,h,v)=>{const _=g.getParent(h,C=>Ue(b,C));if(!ct(g.getParent(h,"summary")))return!0;if(_&&Oe(v,"text/html")){const C=(new DOMParser).parseFromString(v["text/html"],"text/html").body;return!ct(C.querySelector(_.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,a.startContainer,l),p=s.get();p&&!f||u&&(i.preventDefault(),ho.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{(d||p&&f)&&r.execCommand("Delete"),RE(r,a);const g=_E(u);l["text/html"]?_m(r,g,c,!0):fp(r,g,!0)})}))}),r.on("dragstart",i=>{s.set(!0)}),r.on("dragover dragend",i=>{uu(r)&&!s.get()&&(i.preventDefault(),RE(r,OE(r,i))),"dragend"===i.type&&s.set(!1)}),(i=>{i.on("input",a=>{const l=c=>ct(c.querySelector("summary"));if("deleteByDrag"===a.inputType){const c=ke(i.dom.select("details"),l);W(c,d=>{ut(d.firstChild)&&d.firstChild.remove();const u=i.dom.create("summary");u.appendChild(yi().dom),d.prepend(u)})}})})(r)})(e,t),((e,t,n)=>{((o,r,s)=>{let i;o.on("keydown",a=>{var l;(oe.metaKeyPressed(l=a)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!a.isDefaultPrevented()&&(i=a.shiftKey&&86===a.keyCode)}),o.on("paste",a=>{if(a.isDefaultPrevented()||(d=a,Pe.os.isAndroid()&&0===(null===(f=null===(u=d.clipboardData)||void 0===u?void 0:u.items)||void 0===f?void 0:f.length)))return;var d,u,f;const l="text"===s.get()||i;i=!1;const c=EE(a.clipboardData);!xE(c)&&kE(o,a,r.getLastRng()||o.selection.getRng())||(Gs(c,"text/html")?(a.preventDefault(),gp(o,c,c["text/html"],l,!0)):Gs(c,"text/plain")&&Gs(c,"text/uri-list")?(a.preventDefault(),gp(o,c,c["text/plain"],l,!0)):(r.create(),ho.setEditorTimeout(o,()=>{const d=r.getHtml();r.remove(),gp(o,c,d,l,!1)},0)))})})(e,t,n),(o=>{const r=i=>Qe(i,"webkit-fake-url"),s=i=>Qe(i,"data:");o.parser.addNodeFilter("img",(i,a,l)=>{if(!uu(o)&&!0===(null===(d=l.data)||void 0===d?void 0:d.paste))for(const c of i){const d=c.attr("src");ge(d)&&!c.attr("data-mce-object")&&d!==Pe.transparentSrc&&(r(d)||!vS(o)&&s(d))&&c.remove()}var d})})(e)})(e,o,n)})})(e);const s=(i=>{const a=i;return(l=i,nt(l.plugins,"rtc").bind(c=>w.from(c.setup))).fold(()=>(a.rtcInstance=nC(i),w.none()),l=>(a.rtcInstance=(()=>{const c=Z(null),d=Z("");return{init:{bindEvents:Re},undoManager:{beforeChange:Re,add:c,undo:c,redo:c,clear:Re,reset:Re,hasUndo:at,hasRedo:at,transact:c,ignore:Re,extra:Re},formatter:{match:at,matchAll:Z([]),matchNode:Z(void 0),canApply:at,closest:d,apply:Re,remove:Re,toggle:Re,formatChanged:Z({unbind:Re})},editor:{getContent:d,setContent:Z({content:"",html:""}),insertContent:Z(""),addVisual:Re},selection:{getContent:d},autocompleter:{addDecoration:Re,removeDecoration:Re},raw:{getModel:Z(w.none())}}})(),w.some(()=>l().then(c=>(a.rtcInstance=(d=>{const u=C=>Vt(C)?C:{},{init:f,undoManager:p,formatter:g,editor:b,selection:h,autocompleter:v,raw:_}=d;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(C,k,E)=>p.transact(E),ignore:(C,k)=>p.ignore(k),extra:(C,k,E,N)=>p.extra(E,N)},formatter:{match:(C,k,E,N)=>g.match(C,u(k),N),matchAll:g.matchAll,matchNode:g.matchNode,canApply:C=>g.canApply(C),closest:C=>g.closest(C),apply:(C,k,E)=>g.apply(C,u(k)),remove:(C,k,E,N)=>g.remove(C,u(k)),toggle:(C,k,E)=>g.toggle(C,u(k)),formatChanged:(C,k,E,N,R)=>g.formatChanged(k,E,N,R)},editor:{getContent:C=>b.getContent(C),setContent:(C,k)=>({content:b.setContent(C,k),html:""}),insertContent:(C,k)=>(b.insertContent(C),""),addVisual:b.addVisual},selection:{getContent:(C,k)=>h.getContent(k)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>w.some(_.getRawModel())}}})(c),c.rtc.isRemote)))));var l})(e);(i=>{const a=i.getDoc(),l=i.getBody();i.dispatch("PreInit"),iS(i)||(a.body.spellcheck=!1,yp.setAttrib(l,"spellcheck","false")),i.quirks=(e=>{const t=X.each,n=oe.BACKSPACE,o=oe.DELETE,r=e.dom,s=e.selection,i=e.parser,a=Pe.browser,l=a.isFirefox(),c=a.isChromium()||a.isSafari(),d=Pe.deviceType.isiPhone()||Pe.deviceType.isiPad(),u=Pe.os.isMacOS()||Pe.os.isiOS(),f=(A,D)=>{try{e.getDoc().execCommand(A,!1,String(D))}catch{}},p=A=>A.isDefaultPrevented(),g=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},b=()=>{e.inline||r.bind(e.getDoc(),"mousedown mouseup",A=>{let D;if(A.target===e.getDoc().documentElement)if(D=s.getRng(),e.getBody().focus(),"mousedown"===A.type){if(Xt(D.startContainer))return;s.placeCaretAt(A.clientX,A.clientY)}else s.setRng(D)})},h=()=>{Range.prototype.getClientRects||e.on("mousedown",A=>{if(!p(A)&&"HTML"===A.target.nodeName){const D=e.getBody();D.blur(),ho.setEditorTimeout(e,()=>{D.focus()})}})},v=()=>{const A=Mb(e);e.on("click",D=>{const M=D.target;/^(IMG|HR)$/.test(M.nodeName)&&r.isEditable(M)&&(D.preventDefault(),e.selection.select(M),e.nodeChanged()),"A"===M.nodeName&&r.hasClass(M,A)&&0===M.childNodes.length&&r.isEditable(M.parentNode)&&(D.preventDefault(),s.select(M))})},_=()=>{e.on("keydown",A=>{if(!p(A)&&A.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const D=s.getNode().previousSibling;if(D&&D.nodeName&&"table"===D.nodeName.toLowerCase())return A.preventDefault(),!1}return!0})},C=()=>{Lb(e)||e.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Db(e)||f("enableObjectResizing",!1)})},k=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},E=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},N=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",A=>{let D;"HTML"===A.target.nodeName&&(D=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(D),e.selection.normalize(),e.nodeChanged())}))},R=()=>{u&&e.on("keydown",A=>{!oe.metaKeyPressed(A)||A.shiftKey||37!==A.keyCode&&39!==A.keyCode||(A.preventDefault(),e.selection.getSel().modify("move",37===A.keyCode?"backward":"forward","lineboundary"))})},L=()=>{e.on("click",A=>{let D=A.target;do{if("A"===D.tagName)return void A.preventDefault()}while(D=D.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},P=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",A=>{A.preventDefault()})})},F=Re;return Br(e)?(c&&(b(),v(),P(),g(),d&&(E(),N(),L())),l&&(h(),C(),k(),R())):(e.on("keydown",A=>{if(p(A)||A.keyCode!==oe.BACKSPACE)return;let D=s.getRng();const M=D.startContainer,z=D.startOffset,te=r.getRoot();let G=M;if(D.collapsed&&0===z){for(;G.parentNode&&G.parentNode.firstChild===G&&G.parentNode!==te;)G=G.parentNode;"BLOCKQUOTE"===G.nodeName&&(e.formatter.toggle("blockquote",void 0,G),D=r.createRng(),D.setStart(M,0),D.setEnd(M,0),s.setRng(D))}}),(()=>{const A=D=>{const M=r.create("body"),z=D.cloneContents();return M.appendChild(z),s.serializer.serialize(M,{format:"html"})};e.on("keydown",D=>{const M=D.keyCode;if(!p(D)&&(M===o||M===n)&&e.selection.isEditable()){const z=e.selection.isCollapsed(),te=e.getBody();if(z&&!I(T(te))||!z&&!(G=>{const he=A(G),me=r.createRng();return me.selectNode(e.getBody()),he===A(me)})(e.selection.getRng()))return;D.preventDefault(),e.setContent(""),te.firstChild&&r.isBlock(te.firstChild)?e.selection.setCursorLocation(te.firstChild,0):e.selection.setCursorLocation(te,0),e.nodeChanged()}})})(),Pe.windowsPhone||e.on("keyup focusin mouseup",A=>{oe.modifierPressed(A)||(D=>{const M=D.getBody(),z=D.selection.getRng();return z.startContainer===z.endContainer&&z.startContainer===M&&0===z.startOffset&&z.endOffset===M.childNodes.length})(e)||s.normalize()},!0),c&&(b(),v(),e.on("init",()=>{f("DefaultParagraphSeparator",un(e))}),P(),_(),i.addNodeFilter("br",A=>{let D=A.length;for(;D--;)"Apple-interchange-newline"===A[D].attr("class")&&A[D].remove()}),d?(E(),N(),L()):g()),l&&(e.on("keydown",A=>{if(!p(A)&&A.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const D=s.getNode(),M=D.previousSibling;if("HR"===D.nodeName)return r.remove(D),void A.preventDefault();M&&M.nodeName&&"hr"===M.nodeName.toLowerCase()&&(r.remove(M),A.preventDefault())}}}),h(),(()=>{const A=()=>{const M=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const z=s.getStart();z!==e.getBody()&&(r.setAttrib(z,"style",null),t(M,te=>{z.setAttributeNode(te.cloneNode(!0))}))}},D=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);e.on("keypress",M=>{let z;return!(!(p(M)||8!==M.keyCode&&46!==M.keyCode)&&D()&&(z=A(),e.getDoc().execCommand("delete",!1),z(),M.preventDefault(),1))}),r.bind(e.getDoc(),"cut",M=>{if(!p(M)&&D()){const z=A();ho.setEditorTimeout(e,()=>{z()})}})})(),C(),e.on("SetContent ExecCommand",A=>{"setcontent"!==A.type&&"mceInsertLink"!==A.command||t(r.select("a:not([data-mce-block])"),D=>{var M;let z=D.parentNode;const te=r.getRoot();if(z?.lastChild===D){for(;z&&!r.isBlock(z);){if((null===(M=z.parentNode)||void 0===M?void 0:M.lastChild)!==z||z===te)return;z=z.parentNode}r.add(z,"br",{"data-mce-bogus":1})}})}),k(),R(),_(),e.on("drop",A=>{var D;const M=null===(D=A.dataTransfer)||void 0===D?void 0:D.getData("text/html");ge(M)&&/^<img[^>]*>$/.test(M)&&e.dispatch("dragend",new window.DragEvent("dragend",A))}))),{refreshContentEditable:F,isHidden:()=>{if(!l||e.removed)return!1;const A=e.selection.getSel();return!A||!A.rangeCount||0===A.rangeCount}}})(i),i.dispatch("PostRender");const c=Dk(i);void 0!==c&&(l.dir=c);const d=aS(i);d&&i.on("BeforeSetContent",u=>{X.each(d,f=>{u.content=u.content.replace(f,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),i.on("SetContent",()=>{i.addVisual(i.getBody())}),i.on("compositionstart compositionend",u=>{i.composing="compositionstart"===u.type})})(e),s.fold(()=>{const i=(a=>{let l=!1;const c=setTimeout(()=>{l||a.setProgressState(!0)},500);return()=>{clearTimeout(c),l=!0,a.setProgressState(!1)}})(e);ux(e).then(()=>{wp(e),i()})},i=>{e.setProgressState(!0),ux(e).then(()=>{i().then(a=>{e.setProgressState(!1),wp(e),oC(e)},a=>{e.notificationManager.open({type:"error",text:String(a)}),wp(e),oC(e)})})})},LR=Ct,Ep=rt.DOM,fx=rt.DOM,gx=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),hx=e=>{const t=e.getElement();return e.inline?gx(null):(n=>{const o=fx.create("div");return fx.insertAfter(o,n),gx(o,o)})(t)},PR=async e=>{e.dispatch("ScriptsLoaded"),(n=>{const o=X.trim(Ab(n)),r=n.ui.registry.getAll().icons,s={...Ku.get("default").icons,...Ku.get(o).icons};tt(s,(i,a)=>{Oe(r,a)||n.ui.registry.addIcon(a,i)})})(e),(n=>{const o=Ia(n);if(ge(o)){const r=zi.get(o);n.theme=r(n,zi.urls[o])||{},Ke(n.theme.init)&&n.theme.init(n,zi.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(e),(n=>{const o=pf(n),r=Ga.get(o);n.model=r(n,Ga.urls[o])})(e),(n=>{const o=[];W(du(n),r=>{((s,i,a)=>{const l=Qa.get(a),c=Qa.urls[a]||s.documentBaseUrl.replace(/\/$/,"");if(a=X.trim(a),l&&-1===X.inArray(i,a)){if(s.plugins[a])return;try{const d=l(s,c)||{};s.plugins[a]=d,Ke(d.init)&&(d.init(s,c),i.push(a))}catch(d){((u,f,p)=>{const g=nr.translate(["Failed to initialize plugin: {0}",f]);Lv(u,"PluginLoadError",{message:g}),Xu(g,p),Yu(u,g)})(s,a,d)}}})(n,o,r.replace(/^\-/,""))})})(e);const t=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,ge(Ia(n))?(r=>{const s=r.theme.renderUI;return s?s():hx(r)})(n):Ke(Ia(n))?(r=>{const s=r.getElement(),i=Ia(r)(r,s);return i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||r.id+"_parent"),i.iframeContainer&&i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||r.id+"_iframecontainer"),i.height=i.iframeHeight?i.iframeHeight:s.offsetHeight,i})(n):hx(n)})(e);var n,o;((n,o)=>{const r={show:w.from(o.show).getOr(Re),hide:w.from(o.hide).getOr(Re),isEnabled:w.from(o.isEnabled).getOr(Ct),setEnabled:s=>{n.mode.isReadOnly()||w.from(o.setEnabled).each(i=>i(s))}};n.ui={...n.ui,...r}})(e,w.from(t.api).getOr({})),e.editorContainer=t.editorContainer,(n=e).contentCSS=n.contentCSS.concat(vC(o=n,Ok(o)),(o=>vC(o,Rb(o)))(n)),e.inline?mx(e):((n,o)=>{((r,s)=>{const i=r.translate("Rich Text Area"),a=Do(T(r.getElement()),"tabindex").bind(ri),l=((c,d,u,f)=>{const p=Lt("iframe");return f.each(g=>wt(p,"tabindex",g)),so(p,u),so(p,{id:c+"_ifr",frameBorder:"0",allowTransparency:"true",title:d}),Yr(p,"tox-edit-area__iframe"),p})(r.id,i,uk(r),a).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(c=>{let d=mk(c)+"<html><head>";xb(c)!==c.documentBaseUrl&&(d+='<base href="'+c.documentBaseURI.getURI()+'" />'),d+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=fk(c),f=gk(c),p=c.translate(tS(c));return kb(c)&&(d+='<meta http-equiv="Content-Security-Policy" content="'+kb(c)+'" />'),d+=`</head><body id="${u}" class="mce-content-body ${f}" data-id="${c.id}" aria-label="${p}"><br></body></html>`,d})(r),Ep.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Ep.isHidden(o.editorContainer)),n.getElement().style.display="none",Ep.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,i=()=>{r.contentDocument=s.contentDocument,mx(r)};if(kS(r)||Pe.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close(),i()}else{const l=((e,t,n,o)=>((r,s,i,a,l)=>{const c=(d=i,u=a,f=>{d(f)&&u((p=>{const g=T(Ul(p).getOr(p.target)),b=()=>p.stopPropagation(),h=()=>p.preventDefault(),v=So(h,b);return{target:g,x:p.clientX,y:p.clientY,stop:b,prevent:h,kill:v,raw:p}})(f))});var d,u;return r.dom.addEventListener(s,c,!1),{unbind:se(Xo,r,s,c,!1)}})(e,"load",n,()=>{l.unbind(),i()}))(T(s),0,LR);s.srcdoc=r.iframeHTML}})(n)})(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},qi=rt.DOM,px=e=>"-"===e.charAt(0),bx=(e,t,n)=>w.from(t).filter(o=>ln(o)&&!Ku.has(o)).map(o=>({url:`${e.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:w.some(o)})),vx=qn().deviceType,yx=vx.isPhone(),IR=vx.isTablet(),ld=e=>{if(kt(e))return[];{const t=Je(e)?e:e.split(/[ ,]/),n=ze(t,zt);return ke(n,ln)}},xp=(e,t)=>Oe(e.sections(),t),jR=(e,t)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:nt(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...t?{menubar:!1}:{}}),$R=(e,t)=>{var n;const o=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?X.extend({},e.external_plugins,o):o},HR=(e,t)=>{const n=e.selection,o=e.dom;return/^ | $/.test(t)?((r,s,i,a)=>{const l=T(r.getRoot());return i=Pc(l,U.fromRangeStart(s),a)?i.replace(/^ /,"&nbsp;"):i.replace(/^&nbsp;/," "),Mc(l,U.fromRangeEnd(s),a)?i.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):i.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),t,e.schema):t},km=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=X.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(t);oh(e,{...o,content:HR(e,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(a=r.content,l=o,dh(e).editor.insertContent(a,l));var a,l;rh(e,s,r),e.addVisual()})}},qR={"font-size":"size","font-family":"face"},WR=ys("font"),_x=e=>(t,n)=>w.from(n).map(T).filter(xn).bind(o=>{return(r=e,s=t,i=o.dom,Pg(T(i),a=>{return va(l=a,r).orThunk(()=>WR(l)?nt(qR,r).bind(c=>Do(l,c)):w.none());var l},a=>We(T(s),a))).or(((r,s)=>w.from(rt.DOM.getStyle(s,r,!0)))(e,o.dom));var r,s,i}).getOr(""),VR=_x("font-size"),KR=So(e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),_x("font-family")),YR=e=>mn(e.getBody()).bind(t=>{const n=t.container();return w.from(Y(n)?n.parentNode:n)}),kp=(e,t)=>{return n=e,o=fl(w.some,t),(r=n,w.from(r.selection.getRng()).bind(s=>{const i=r.getBody();return s.startContainer===i&&0===s.startOffset?w.none():w.from(r.selection.getStart(!0))})).orThunk(se(YR,n)).map(T).filter(xn).bind(o);var n,o,r},Cx=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const o=X.explode(e.options.get("font_size_style_values")),r=X.explode(e.options.get("font_size_classes"));return r.length>0?r[n-1]||t:o[n-1]||t}return t}return t},XR=e=>{const t=e.split(/\s*,\s*/);return ze(t,n=>-1===n.indexOf(" ")||Qe(n,'"')||Qe(n,"'")?n:`'${n}'`).join(",")},wx=(e,t)=>{const n=e.dom,o=e.selection.getRng(),r=t?e.selection.getStart():e.selection.getEnd(),s=t?o.startContainer:o.endContainer,i=od(n,s);if(!i||!i.isContentEditable)return;const a=t?cn:Yo,l=un(e);((c,d,u,f)=>{const p=c.dom,g=h=>p.isBlock(h)&&h.parentElement===u,b=g(d)?d:p.getParent(f,g,u);return w.from(b).map(T)})(e,r,i,s).each(c=>{const d=U1(e,s,c.dom,i,!1,l);a(c,T(d)),e.selection.setCursorLocation(d,0),e.dispatch("NewBlock",{newBlock:d}),nd(e,"insertParagraph")})},QR=["toggleview"],Ex=e=>ae(QR,e.toLowerCase());class xx{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,o,r){const s=this.editor,i=t.toLowerCase(),a=r?.skip_focus;if(s.removed||("mcefocus"!==i&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)||a?Jf(c=s).each(d=>c.selection.setRng(d)):s.focus()),s.dispatch("BeforeExecCommand",{command:t,ui:n,value:o}).isDefaultPrevented()))return!1;var c;const l=this.commands.exec[i];return!!Ke(l)&&(l(i,n,o),s.dispatch("ExecCommand",{command:t,ui:n,value:o}),!0)}queryCommandState(t){if(!Ex(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),o=this.commands.state[n];return!!Ke(o)&&o(n)}queryCommandValue(t){if(!Ex(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),o=this.commands.value[n];return Ke(o)?o(n):""}addCommands(t,n="exec"){const o=this.commands;tt(t,(r,s)=>{W(s.toLowerCase().split(","),i=>{o[n][i]=r})})}addCommand(t,n,o){const r=t.toLowerCase();this.commands.exec[r]=(s,i,a)=>n.call(o??this.editor,i,a)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,o){this.commands.state[t.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(t,n,o){this.commands.value[t.toLowerCase()]=()=>n.call(o??this.editor)}}const Wi="data-mce-contenteditable",Sp=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Sm=(e,t)=>{e.dom.contentEditable=t?"true":"false"},Vi=e=>e.readonly,kx=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Vi(e)&&W(t,n=>{n.attr(Wi,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Wi,t=>{Vi(e)&&W(t,n=>{n.attr("contenteditable",n.attr(Wi))})}),e.serializer.addTempAttr(Wi)},JR=["copy"],ZR=X.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Np{static isNative(t){return!!ZR[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||at}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const o=t.toLowerCase(),r=Jm(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let i=0,a=s.length;i<a;i++){const l=s[i];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(t,n,o,r){if(!1===n&&(n=at),n){const s={func:n,removed:!1};r&&X.extend(s,r);const i=t.toLowerCase().split(" ");let a=i.length;for(;a--;){const l=i[a];let c=this.bindings[l];c||(c=[],this.toggleEvent(l,!0)),c=o?[s,...c]:[...c,s],this.bindings[l]=c}}return this}off(t,n){if(t){const o=t.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let i=this.bindings[s];if(!s)return tt(this.bindings,(a,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(n){const a=No(i,l=>l.func===n);i=a.fail,this.bindings[s]=i,W(a.pass,l=>{l.removed=!0})}else i.length=0;i.length||(this.toggleEvent(t,!1),delete this.bindings[s])}}}else tt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(t,n,o){return this.on(t,n,o,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||0===n.length)}}const cd=e=>(e._eventDispatcher||(e._eventDispatcher=new Np({scope:e,toggleEvent:(t,n)=>{Np.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),Ap={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return Jm(e.toLowerCase(),t??{},o);const r=cd(o).dispatch(e,t);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(e,r,!1),s=s.parent?s.parent():void 0}return r},on(e,t,n){return cd(this).on(e,t,n)},off(e,t){return cd(this).off(e,t)},once(e,t){return cd(this).once(e,t)},hasEventListeners(e){return cd(this).has(e)}},Nm=rt.DOM;let Ki;const Am=(e,t)=>{if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=Bb(e);return n?(e.eventRoot||(e.eventRoot=Nm.select(n)[0]),e.eventRoot):e.getBody()},Sx=(e,t,n)=>{var o;(o=e).hidden||Vi(o)?Vi(e)&&((o,r)=>{if("click"!==r.type||oe.metaKeyPressed(r))ae(JR,r.type)&&o.dispatch(r.type,r);else{const s=T(r.target);(i=o,a=s,Gr(a,"a",l=>We(l,T(i.getBody()))).bind(l=>Do(l,"href"))).each(i=>{if(r.preventDefault(),/^#/.test(i)){const a=o.dom.select(`${i},[name="${Ed(i,"#")}"]`);a.length&&o.selection.scrollIntoView(a[0],!0)}else window.open(i,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var i,a})(e,n):e.dispatch(t,n)},Nx=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=Am(e,t);if(Bb(e)){if(Ki||(Ki={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Ki&&(tt(Ki,(r,s)=>{e.dom.unbind(Am(e,s))}),Ki=null)})),Ki[t])return;const o=r=>{const s=r.target,i=e.editorManager.get();let a=i.length;for(;a--;){const l=i[a].getBody();(l===s||Nm.isChildOf(s,l))&&Sx(i[a],t,r)}};Ki[t]=o,Nm.bind(n,t,o)}else{const o=r=>{Sx(e,t,r)};Nm.bind(n,t,o),e.delegates[t]=o}},Ax={...Ap,bindPendingEventDelegates(){const e=this;X.each(e._pendingNativeEvents,t=>{Nx(e,t)})},toggleNativeEvent(e,t){const n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?Nx(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(Am(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(tt(e.delegates,(o,r)=>{e.dom.unbind(Am(e,r),r,o)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},eD=e=>ge(e)?{value:e.split(/[ ,]/),valid:!0}:Fr(e,ge)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Tx=(e,t)=>e+(To(t.message)?"":`. ${t.message}`),Ox=e=>e.valid,Tp=(e,t,n="")=>{const o=t(e);return dr(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},tD=["design","readonly"],Rx=(e,t,n,o)=>{const r=n[t.get()],s=n[o];try{s.activate()}catch(i){return void console.error(`problem while activating editor mode ${o}:`,i)}var i;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((i,a)=>{const l=T(i.getBody());var c,d,u;u=a,pa(c=l,d="mce-content-readonly")&&!u?ii(c,d):u&&Yr(c,d),a?(i.selection.controlSelection.hideResizeRect(),i._selectionOverrides.hideFakeCaret(),(c=>{w.from(c.selection.getNode()).each(d=>{d.removeAttribute("data-mce-selected")})})(i),i.readonly=!0,Sm(l,!1),W(Yt(l,'*[contenteditable="true"]'),c=>{wt(c,Wi,"true"),Sm(c,!1)})):(i.readonly=!1,i.hasEditableRoot()&&Sm(l,!0),W(Yt(l,`*[${Wi}="true"]`),c=>{Ht(c,Wi),Sm(c,!0)}),Sp(i,"StyleWithCSS",!1),Sp(i,"enableInlineTableEditing",!1),Sp(i,"enableObjectResizing",!1),m0(i)&&i.focus(),(c=>{c.selection.setRng(c.selection.getRng())})(i),i.nodeChanged())})(e,s.editorReadOnly),t.set(o),(i=e).dispatch("SwitchMode",{mode:o})},Op=X.each,Rp=X.explode,nD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Dx=X.makeMap("alt,ctrl,shift,meta,access"),oD=e=>{const t={},n=Pe.os.isMacOS()||Pe.os.isiOS();Op(Rp(e.toLowerCase(),"+"),s=>{s in Dx?t[s]=!0:/^[0-9]{2,}$/.test(s)?t.keyCode=parseInt(s,10):(t.charCode=s.charCodeAt(0),t.keyCode=nD[s]||s.toUpperCase().charCodeAt(0))});const o=[t.keyCode];let r;for(r in Dx)t[r]?o.push(r):t[r]=!1;return t.id=o.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Bx{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Op(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,o,r){const s=this,i=s.normalizeCommandFunc(o);return Op(Rp(X.trim(t)),a=>{const l=s.createShortcut(a,n,i,r);s.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(t){const n=this,o=t;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:X.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(t,n,o,r){const s=X.map(Rp(t,">"),oD);return s[s.length-1]=X.extend(s[s.length-1],{func:o,scope:r||this.editor}),X.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!!n&&n.ctrl===t.ctrlKey&&n.meta===t.metaKey&&n.alt===t.altKey&&n.shift===t.shiftKey&&!!(t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const rD=()=>{const e=(()=>{const t={},n={},o={},r={},s={},i={},a={},l={},c=(d,u)=>(f,p)=>{d[f.toLowerCase()]={...p,type:u}};return{addButton:c(t,"button"),addGroupToolbarButton:c(t,"grouptoolbarbutton"),addToggleButton:c(t,"togglebutton"),addMenuButton:c(t,"menubutton"),addSplitButton:c(t,"splitbutton"),addMenuItem:c(n,"menuitem"),addNestedMenuItem:c(n,"nestedmenuitem"),addToggleMenuItem:c(n,"togglemenuitem"),addAutocompleter:c(o,"autocompleter"),addContextMenu:c(s,"contextmenu"),addContextToolbar:c(i,"contexttoolbar"),addContextForm:c(i,"contextform"),addSidebar:c(a,"sidebar"),addView:c(l,"views"),addIcon:(d,u)=>r[d.toLowerCase()]=u,getAll:()=>({buttons:t,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:i,sidebars:a,views:l})}})();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Yi=rt.DOM,Lx=X.extend,sD=X.each;class Tm{constructor(t,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Lx(this,Ax);const r=this;this.id=t,this.hidden=!1;const s=((e,t,n,o,r)=>{var s;const i=e?{mobile:jR(null!==(s=r.mobile)&&void 0!==s?s:{},t)}:{},a=((e,t)=>{const n=((s,i)=>{const a={},l={};return vd(s,(c,d)=>ae(e,d),hl(a),hl(l)),{t:a,f:l}})(t);return r=n.f,{sections:Z(n.t),options:Z(r)};var r})(["mobile"],qh(i,r)),l=X.extend(n,o,a.options(),e&&xp(a,"mobile")?((c,d,u={})=>{const f=c.sections(),p=nt(f,d).getOr({});return X.extend({},u,p)})(a,"mobile"):{},{external_plugins:$R(o,a.options())});return((c,d,u,f)=>{const p=ld(u.forced_plugins),g=ld(f.plugins),b=xp(_=d,"mobile")?_.sections().mobile:{},h=((_,C,k,E)=>_&&xp(C,"mobile")?E:k)(c,d,g,b.plugins?ld(b.plugins):g),v=((_,C)=>[...ld(_),...ld(C)])(p,h);var _;return X.extend(f,{forced_plugins:p,plugins:v})})(e,a,o,l)})(yx||IR,yx,g=n,o.defaultOptions,g);var g;this.options=((p,g)=>{const b={},h={},v=(C,k,E)=>{const N=Tp(k,E);return Ox(N)?(h[C]=N.value,!0):(console.warn(Tx(`Invalid value passed for the ${C} option`,N)),!1)},_=C=>Oe(b,C);return{register:(C,k)=>{const E=ge(k.processor)?(R=>{const L=(()=>{switch(R){case"array":return Je;case"boolean":return dr;case"function":return Ke;case"number":return Dn;case"object":return Vt;case"string":return ge;case"string[]":return eD;case"object[]":return P=>Fr(P,Vt);case"regexp":return P=>cr(P,RegExp);default:return Ct}})();return P=>Tp(P,L,`The value must be a ${R}.`)})(k.processor):k.processor,N=((R,L,P)=>{if(!Bt(L)){const F=Tp(L,P);if(Ox(F))return F.value;console.error(Tx(`Invalid default value passed for the "${R}" option`,F))}})(C,k.default,E);b[C]={...k,default:N,processor:E},nt(h,C).orThunk(()=>nt(g,C)).each(R=>v(C,R,E))},isRegistered:_,get:C=>nt(h,C).orThunk(()=>nt(b,C).map(k=>k.default)).getOrUndefined(),set:(C,k)=>{if(_(C)){const E=b[C];return E.immutable?(console.error(`"${C}" is an immutable option and cannot be updated`),!1):v(C,k,E.processor)}return console.warn(`"${C}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:C=>{const k=_(C);return k&&delete h[C],k},isSet:C=>Oe(h,C)}})(0,s),(p=>{const g=p.options.register;g("id",{processor:"string",default:p.id}),g("selector",{processor:"string"}),g("target",{processor:"object"}),g("suffix",{processor:"string"}),g("cache_suffix",{processor:"string"}),g("base_url",{processor:"string"}),g("referrer_policy",{processor:"string",default:""}),g("language_load",{processor:"boolean",default:!0}),g("inline",{processor:"boolean",default:!1}),g("iframe_attrs",{processor:"object",default:{}}),g("doctype",{processor:"string",default:"<!DOCTYPE html>"}),g("document_base_url",{processor:"string",default:p.documentBaseUrl}),g("body_id",{processor:Eb(p,"tinymce"),default:"tinymce"}),g("body_class",{processor:Eb(p),default:""}),g("content_security_policy",{processor:"string",default:""}),g("br_in_pre",{processor:"boolean",default:!0}),g("forced_root_block",{processor:b=>{const h=ge(b)&&ln(b);return h?{value:b,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),g("forced_root_block_attrs",{processor:"object",default:{}}),g("newline_behavior",{processor:b=>{const h=ae(["block","linebreak","invert","default"],b);return h?{value:b,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),g("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),g("no_newline_selector",{processor:"string",default:""}),g("keep_styles",{processor:"boolean",default:!0}),g("end_container_on_empty_block",{processor:b=>dr(b)||ge(b)?{valid:!0,value:b}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),g("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),g("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),g("font_size_classes",{processor:"string",default:""}),g("automatic_uploads",{processor:"boolean",default:!0}),g("images_reuse_filename",{processor:"boolean",default:!1}),g("images_replace_blob_uris",{processor:"boolean",default:!0}),g("icons",{processor:"string",default:""}),g("icons_url",{processor:"string",default:""}),g("images_upload_url",{processor:"string",default:""}),g("images_upload_base_path",{processor:"string",default:""}),g("images_upload_credentials",{processor:"boolean",default:!1}),g("images_upload_handler",{processor:"function"}),g("language",{processor:"string",default:"en"}),g("language_url",{processor:"string",default:""}),g("entity_encoding",{processor:"string",default:"named"}),g("indent",{processor:"boolean",default:!0}),g("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),g("indent_use_margin",{processor:"boolean",default:!1}),g("indentation",{processor:"string",default:"40px"}),g("content_css",{processor:b=>{const h=!1===b||ge(b)||Fr(b,ge);return h?ge(b)?{value:ze(b.split(","),zt),valid:h}:Je(b)?{value:b,valid:h}:!1===b?{value:[],valid:h}:{value:b,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:bf(p)?[]:["default"]}),g("content_style",{processor:"string"}),g("content_css_cors",{processor:"boolean",default:!1}),g("font_css",{processor:b=>{const h=ge(b)||Fr(b,ge);return h?{value:Je(b)?b:ze(b.split(","),zt),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),g("inline_boundaries",{processor:"boolean",default:!0}),g("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),g("object_resizing",{processor:b=>{const h=dr(b)||ge(b);return h?!1===b||ff.isiPhone()||ff.isiPad()?{value:"",valid:h}:{value:!0===b?"table,img,figure.image,div,video,iframe":b,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!ck}),g("resize_img_proportional",{processor:"boolean",default:!0}),g("event_root",{processor:"object"}),g("service_message",{processor:"string"}),g("theme",{processor:b=>!1===b||ge(b)||Ke(b),default:"silver"}),g("theme_url",{processor:"string"}),g("formats",{processor:"object"}),g("format_empty_lines",{processor:"boolean",default:!1}),g("format_noneditable_selector",{processor:"string",default:""}),g("preview_styles",{processor:b=>{const h=!1===b||ge(b);return h?{value:!1===b?"":b,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),g("custom_ui_selector",{processor:"string",default:""}),g("hidden_input",{processor:"boolean",default:!0}),g("submit_patch",{processor:"boolean",default:!0}),g("encoding",{processor:"string"}),g("add_form_submit_trigger",{processor:"boolean",default:!0}),g("add_unload_trigger",{processor:"boolean",default:!0}),g("custom_undo_redo_levels",{processor:"number",default:0}),g("disable_nodechange",{processor:"boolean",default:!1}),g("readonly",{processor:"boolean",default:!1}),g("editable_root",{processor:"boolean",default:!0}),g("plugins",{processor:"string[]",default:[]}),g("external_plugins",{processor:"object"}),g("forced_plugins",{processor:"string[]"}),g("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),g("model_url",{processor:"string"}),g("block_unsupported_drop",{processor:"boolean",default:!0}),g("visual",{processor:"boolean",default:!0}),g("visual_table_class",{processor:"string",default:"mce-item-table"}),g("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),g("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),g("setup",{processor:"function"}),g("init_instance_callback",{processor:"function"}),g("url_converter",{processor:"function",default:p.convertURL}),g("url_converter_scope",{processor:"object",default:p}),g("urlconverter_callback",{processor:"function"}),g("allow_conditional_comments",{processor:"boolean",default:!1}),g("allow_html_data_urls",{processor:"boolean",default:!1}),g("allow_svg_data_urls",{processor:"boolean"}),g("allow_html_in_named_anchor",{processor:"boolean",default:!1}),g("allow_script_urls",{processor:"boolean",default:!1}),g("allow_unsafe_link_target",{processor:"boolean",default:!1}),g("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),g("fix_list_elements",{processor:"boolean",default:!1}),g("preserve_cdata",{processor:"boolean",default:!1}),g("remove_trailing_brs",{processor:"boolean",default:!0}),g("pad_empty_with_br",{processor:"boolean",default:!1}),g("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),g("element_format",{processor:"string",default:"html"}),g("entities",{processor:"string"}),g("schema",{processor:"string",default:"html5"}),g("convert_urls",{processor:"boolean",default:!0}),g("relative_urls",{processor:"boolean",default:!0}),g("remove_script_host",{processor:"boolean",default:!0}),g("custom_elements",{processor:"string"}),g("extended_valid_elements",{processor:"string"}),g("invalid_elements",{processor:"string"}),g("invalid_styles",{processor:gf}),g("valid_children",{processor:"string"}),g("valid_classes",{processor:gf}),g("valid_elements",{processor:"string"}),g("valid_styles",{processor:gf}),g("verify_html",{processor:"boolean",default:!0}),g("auto_focus",{processor:b=>ge(b)||!0===b}),g("browser_spellcheck",{processor:"boolean",default:!1}),g("protect",{processor:"array"}),g("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),g("deprecation_warnings",{processor:"boolean",default:!0}),g("a11y_advanced_options",{processor:"boolean",default:!1}),g("api_key",{processor:"string"}),g("paste_block_drop",{processor:"boolean",default:!1}),g("paste_data_images",{processor:"boolean",default:!0}),g("paste_preprocess",{processor:"function"}),g("paste_postprocess",{processor:"function"}),g("paste_webkit_styles",{processor:"string",default:"none"}),g("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),g("paste_merge_formats",{processor:"boolean",default:!0}),g("smart_paste",{processor:"boolean",default:!0}),g("paste_as_text",{processor:"boolean",default:!1}),g("paste_tab_spaces",{processor:"number",default:4}),g("text_patterns",{processor:b=>Fr(b,Vt)||!1===b?{value:Cb(!1===b?[]:b),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),g("text_patterns_lookup",{processor:b=>{return Ke(b)?{value:(h=b,v=>{const _=h(v);return Cb(_)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:b=>[]}),g("noneditable_class",{processor:"string",default:"mceNonEditable"}),g("editable_class",{processor:"string",default:"mceEditable"}),g("noneditable_regexp",{processor:b=>Fr(b,wb)?{value:b,valid:!0}:wb(b)?{value:[b],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),g("table_tab_navigation",{processor:"boolean",default:!0}),g("highlight_on_focus",{processor:"boolean",default:!1}),g("xss_sanitization",{processor:"boolean",default:!0}),g("details_initial_state",{processor:b=>{const h=ae(["inherited","collapsed","expanded"],b);return h?{value:b,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("details_serialized_state",{processor:b=>{const h=ae(["inherited","collapsed","expanded"],b);return h?{value:b,valid:h}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),g("init_content_sync",{processor:"boolean",default:!1}),g("newdocument_content",{processor:"string",default:""}),g("force_hex_color",{processor:b=>{const h=["always","rgb_only","off"],v=ae(h,b);return v?{value:b,valid:v}:{valid:!1,message:`Must be one of: ${h.join(", ")}.`}},default:"off"}),g("sandbox_iframes",{processor:"boolean",default:!1}),g("convert_unsafe_embeds",{processor:"boolean",default:!1}),p.on("ScriptsLoaded",()=>{g("directionality",{processor:"string",default:nr.isRtl()?"rtl":void 0}),g("placeholder",{processor:"string",default:dk.getAttrib(p.getElement(),"placeholder")})})})(r);const i=this.options.get;i("deprecation_warnings")&&((p,g)=>{((b,h)=>{const v=(e=>{const t=uC(e,VA),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),mr(t)})(b),_=(e=>mC(e,YA))(h),C=_.length>0,k=v.length>0,E="mobile"===h.theme;if(C||k||E){const N="\n- ",R=E?`\n\nThemes:${N}mobile`:"",L=C?`\n\nPlugins:${N}${_.join(N)}`:"",P=k?`\n\nOptions:${N}${v.join(N)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+R+L+P)}})(p,g),((b,h)=>{const v=(e=>uC(e,KA))(b),_=(e=>mC(e,dC.map(t=>t.name)))(h),C=_.length>0,k=v.length>0;if(C||k){const E="\n- ",N=C?`\n\nPlugins:${E}${_.map(ZA).join(E)}`:"",R=k?`\n\nOptions:${E}${v.join(E)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+N+R)}})(p,g)})(n,s);const a=i("suffix");a&&(o.suffix=a),this.suffix=o.suffix;const l=i("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const c=hf(r);c&&(ss.ScriptLoader._setReferrerPolicy(c),rt.DOM.styleSheetLoader._setReferrerPolicy(c));const d=Pb(r);Q(d)&&rt.DOM.styleSheetLoader._setContentCssCors(d),vn.languageLoad=i("language_load"),vn.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new Ho(xb(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=bf(r),this.hasVisual=Zk(r),this.shortcuts=new Bx(this),this.editorCommands=new xx(this),(e=>{var t;(e=>{(t=>{const n=o=>()=>{W("left,center,right,justify".split(","),r=>{o!==r&&t.formatter.remove("align"+r)}),"none"!==o&&(t.formatter.toggle("align"+o,void 0),t.nodeChanged())};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(e),(t=>{const n=o=>()=>{const r=t.selection,s=r.isCollapsed()?[t.dom.getParent(r.getNode(),t.dom.isBlock)]:r.getSelectedBlocks();return dt(s,i=>Q(t.formatter.matchNode(i,o)))};t.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(e)})(e),(t=e).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=t.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Pe.os.isMacOS()||Pe.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:s,type:"error"})}}}),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(e),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;t.dom.getParent(t.selection.getNode(),i=>!ie(i)||s++!==r||(t.selection.select(i),!1),t.getBody())},mceSelectNode:(n,o,r)=>{t.selection.select(r)},selectAll:()=>{const n=t.dom.getParent(t.selection.getStart(),Yn);if(n){const o=t.dom.createRng();o.selectNodeContents(n),t.selection.setRng(o)}}})})(e),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const n=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{km(t,t.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{km(t,t.dom.encode(r))},insertHTML:(n,o,r)=>{km(t,r)},mceInsertContent:(n,o,r)=>{km(t,r)},mceSetContent:(n,o,r)=>{t.setContent(r)},mceReplaceContent:(n,o,r)=>{t.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(uS(t))}})})(e),(t=>{const n=(o,r,s)=>{const i=ge(s)?{href:s}:s,a=t.dom.getParent(t.selection.getNode(),"a");Vt(i)&&ge(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||t.formatter.remove("link"),i.href&&t.formatter.apply("link",i,a))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const o=t.dom.getParent(t.selection.getStart(),"a");return void(o&&t.dom.remove(o,!0))}t.formatter.remove("link")}},mceInsertLink:n,createLink:n})})(e),(t=>{t.editorCommands.addCommands({Indent:()=>{Tw(t,"indent")},Outdent:()=>{Ow(t)}}),t.editorCommands.addCommands({Outdent:()=>Sw(t)},"state")})(e),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{wx(t,!0)},InsertNewBlockAfter:()=>{wx(t,!1)}})})(e),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{pm(W1,t)},mceInsertNewLine:(n,o,r)=>{J1(t,r)},InsertLineBreak:(n,o,r)=>{pm(Y1,t)}})})(e),(t=>{var n;(n=t).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const i=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(i)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(t)})(e),(t=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,i)=>{o(r,{value:i})},BackColor:(r,s,i)=>{o("hilitecolor",{value:i})},FontName:(r,s,i)=>{((a,l)=>{const c=Cx(a,l);a.formatter.toggle("fontname",{value:XR(c)}),a.nodeChanged()})(n,i)},FontSize:(r,s,i)=>{var a;(a=n).formatter.toggle("fontsize",{value:Cx(a,i)}),a.nodeChanged()},LineHeight:(r,s,i)=>{var a;(a=n).formatter.toggle("lineheight",{value:String(i)}),a.nodeChanged()},Lang:(r,s,i)=>{var a;o(r,{value:i.code,customValue:null!==(a=i.customCode)&&void 0!==a?a:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,i)=>{o(ge(i)?i:"p")},mceToggleFormat:(r,s,i)=>{o(i)}})})(t),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return kp(r=n,s=>KR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return kp(r=n,s=>VR(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return kp(r=n,s=>{const i=T(r.getBody());return Pg(s,l=>va(l,"line-height"),se(We,i)).getOrThunk(()=>{const l=parseFloat(Kn(s,"line-height")),c=parseFloat(Kn(s,"font-size"));return String(l/c)})}).getOr("");var r})})(t)})(e),(t=>{t.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??t.selection.getNode();if(s!==t.getBody()){const i=t.selection.getBookmark();t.dom.remove(s,!0),t.selection.moveToBookmark(i)}},mcePrint:()=>{t.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=t).removed||(!0===r?og(s):(a=>{const l=a.selection,c=a.getBody();let d=l.getRng();a.quirks.refreshContentEditable(),Q(a.bookmark)&&!Ii(a)&&Jf(a).each(f=>{a.selection.setRng(f),d=f});const u=(f=a,p=l.getNode(),f.dom.getParent(p,g=>"true"===f.dom.getContentEditable(g)));var f,p;if(u&&a.dom.isChildOf(u,c))return ng(u),u0(a,d),void og(a);a.inline||(Pe.browser.isOpera()||ng(c),a.getWin().focus()),(Pe.browser.isFirefox()||a.inline)&&(ng(c),u0(a,d)),og(a)})(s))},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(e)})(this);const u=i("cache_suffix");u&&(Pe.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:rD(),styleSheetLoader:void 0,show:Re,hide:Re,setEnabled:Re,isEnabled:Ct},this.mode=(p=>{const g=Qt("design"),b=Qt({design:{activate:Re,deactivate:Re,editorReadOnly:!1},readonly:{activate:Re,deactivate:Re,editorReadOnly:!0}});return(h=p).serializer?kx(h):h.on("PreInit",()=>{kx(h)}),(h=>{h.on("ShowCaret",v=>{Vi(h)&&v.preventDefault()}),h.on("ObjectSelected",v=>{Vi(h)&&v.preventDefault()})})(p),{isReadOnly:()=>Vi(p),set:h=>((v,_,C,k)=>{if(k!==C.get()){if(!Oe(_,k))throw new Error(`Editor mode '${k}' is invalid`);v.initialized?Rx(v,C,_,k):v.on("init",()=>Rx(v,C,_,k))}})(p,b.get(),g,h),get:()=>g.get(),register:(h,v)=>{b.set(((_,C,k)=>{if(ae(tD,C))throw new Error(`Cannot override default mode ${C}`);return{..._,[C]:{...k,deactivate:()=>{try{k.deactivate()}catch(E){console.error(`problem while deactivating editor mode ${C}:`,E)}}}}})(b.get(),h,v))}};var h})(r),o.dispatch("SetupEditor",{editor:this});const f=nS(r);Ke(f)&&f.call(r,r)}render(){(t=>{const n=t.id;nr.setCode(Tb(t));const o=()=>{qi.unbind(window,"ready",o),t.render()};if(!ki.Event.domLoaded)return void qi.bind(window,"ready",o);if(!t.getElement())return;const r=T(t.getElement()),s=Dl(r);var l;t.on("remove",()=>{hd(r.dom.attributes,a=>Ht(r,a.name)),so(r,s)}),t.ui.styleSheetLoader=Gn.forElement(r,{contentCssCors:Pb(l=t),referrerPolicy:hf(l)}),bf(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const i=t.getElement().form||qi.getParent(n,"form");i&&(t.formElement=i,qk(t)&&!Xl(t.getElement())&&(qi.insertAfter(qi.create("input",{type:"hidden",name:n}),n),t.hasHiddenInput=!0),t.formEventDelegate=a=>{t.dispatch(a.type,a)},qi.bind(i,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),!Wk(t)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)))),t.windowManager=pC(t),t.notificationManager=hC(t),"xml"===t.options.get("encoding")&&t.on("GetContent",a=>{a.save&&(a.content=qi.encode(a.content))}),Vk(t)&&t.on("submit",()=>{t.initialized&&t.save()}),Kk(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((e,t)=>{const n=ss.ScriptLoader,o=()=>{!e.removed&&(r=>{const s=Ia(r);return!ge(s)||Q(zi.get(s))})(e)&&(r=>{const s=pf(r);return Q(Ga.get(s))})(e)&&PR(e)};((r,s)=>{const i=Ia(r);if(ge(i)&&!px(i)&&!Oe(zi.urls,i)){const a=Ik(r),l=a?r.documentBaseURI.toAbsolute(a):`themes/${i}/theme${s}.js`;zi.load(i,l).catch(()=>{qc(r,"ThemeLoadError",Wc("theme",l,i))})}})(e,t),((r,s)=>{const i=pf(r);if("plugin"!==i&&!Oe(Ga.urls,i)){const a=Fk(r),l=ge(a)?r.documentBaseURI.toAbsolute(a):`models/${i}/model${s}.js`;Ga.load(i,l).catch(()=>{qc(r,"ModelLoadError",Wc("model",l,i))})}})(e,t),((r,s)=>{const i=Tb(s),a=Ak(s);if(!nr.hasCode(i)&&"en"!==i){const l=ln(a)?a:`${s.editorManager.baseURL}/langs/${i}.js`;r.add(l).catch(()=>{qc(s,"LanguageLoadError",Wc("language",l,i))})}})(n,e),((r,s,i)=>{const a=bx(s,"default",i),l=(c=s,w.from(wk(c)).filter(ln).map(d=>({url:d,name:w.none()}))).orThunk(()=>bx(s,Ab(s),""));var c;W((c=>{const d=[],u=f=>{d.push(f)};for(let f=0;f<c.length;f++)c[f].each(u);return d})([a,l]),c=>{r.add(c.url).catch(()=>{var d,u,f;d=s,u=c.url,f=c.name.getOrUndefined(),qc(d,"IconsLoadError",Wc("icons",u,f))})})})(n,e,t),((r,s)=>{const i=(a,l)=>{Qa.load(a,l).catch(()=>{qc(r,"PluginLoadError",Wc("plugin",l,a))})};tt(Qk(r),(a,l)=>{i(l,a),r.options.set("plugins",du(r).concat(l))}),W(du(r),a=>{!(a=X.trim(a))||Qa.urls[a]||px(a)||i(a,`plugins/${a}/plugin${s}.js`)})})(e,t),n.loadQueue().then(o,o)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Ii(this)}translate(t){return nr.translate(t)}getParam(t,n,o){const r=this.options;return r.isRegistered(t)||(Q(o)?r.register(t,{processor:o,default:n}):r.register(t,{processor:Ct,default:n})),r.isSet(t)||Bt(n)?r.get(t):n}hasPlugin(t,n){return!(!ae(du(this),t)||n&&void 0===Qa.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,o){this.editorCommands.addCommand(t,n,o)}addQueryStateHandler(t,n,o){this.editorCommands.addQueryStateHandler(t,n,o)}addQueryValueHandler(t,n,o){this.editorCommands.addQueryValueHandler(t,n,o)}addShortcut(t,n,o,r){this.shortcuts.add(t,n,o,r)}execCommand(t,n,o,r){return this.editorCommands.execCommand(t,n,o,r)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Yi.show(t.getContainer()),Yi.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Yi.hide(t.getContainer()),Yi.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...t,load:!0},s=Xl(o)?o.value:o.innerHTML,i=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),i}return""}save(t={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...t,save:!0,element:o};let s=n.getContent(r);const i={...r,content:s};if(i.no_events||n.dispatch("SaveContent",i),"raw"===i.format&&n.dispatch("RawSaveContent",i),s=i.content,Xl(o))o.value=s;else{!t.is_removing&&n.inline||(o.innerHTML=s);const a=Yi.getParent(n.id,"form");a&&sD(a.elements,l=>l.name!==n.id||(l.value=s,!1))}return i.element=r.element=o=null,!1!==i.set_dirty&&n.setDirty(!1),s}setContent(t,n){return uh(this,t,n)}getContent(t){return((n,o={})=>{const r=(s=o,i=o.format?o.format:"html",{...s,format:i,get:!0,getInner:!0});var s,i;return q_(n,r).fold(tn,s=>{const i=(l=s,dh(n).editor.getContent(l));var l;return W_(n,i,s)})})(this,t)}insertContent(t,n){n&&(t=Lx({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?uh(this,this.startContent,{format:"raw"}):uh(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Yi.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Yi.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const o=this.getDoc();return null!==(n=null!==(t=this.bodyElement)&&void 0!==t?t:o?.body)&&void 0!==n?n:null}convertURL(t,n,o){const r=this,s=r.options.get,i=rS(r);if(Ke(i))return i.call(r,t,o,!0,n);if(!s("convert_urls")||"link"===o||Vt(o)&&"LINK"===o.nodeName||0===t.indexOf("file:")||0===t.length)return t;const a=new Ho(t);return"http"!==a.protocol&&"https"!==a.protocol&&""!==a.protocol?t:s("relative_urls")?r.documentBaseURI.toRelative(t):t=r.documentBaseURI.toAbsolute(t,s("remove_script_host"))}addVisual(t){((n,o)=>{var s;s=o,At(this).editor.addVisual(s)})(0,t)}setEditableRoot(t){var n,o;(n=this)._editableRoot!==(o=t)&&(n._editableRoot=o,n.readonly||(n.getBody().contentEditable=String(n.hasEditableRoot()),n.nodeChanged()),n.dispatch("EditableRootStateChange",{state:o}))}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:n,editorUpload:o}=t,r=t.getBody(),s=t.getElement();r&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&Q(s?.nextSibling)&&Wu.remove(s.nextSibling),t.dispatch("remove"),t.editorManager.remove(t),!t.inline&&r&&Wu.setStyle((i=t).id,"display",i.orgDisplay),(i=>{i.dispatch("detach")})(t),Wu.remove(t.getContainer()),Vu(n),Vu(o),t.destroy()}var i})(this)}destroy(t){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Vu(r),Vu(s)),(i=>{const a=i.formElement;a&&(a._mceOldSubmit&&(a.submit=a._mceOldSubmit,delete a._mceOldSubmit),Wu.unbind(a,"submit reset",i.formEventDelegate))})(n),(i=>{const a=i;a.contentAreaContainer=a.formElement=a.container=a.editorContainer=null,a.bodyElement=a.contentDocument=a.contentWindow=null,a.iframeElement=a.targetElm=null;const l=i.selection;l&&(a.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const il=rt.DOM,Om=X.each;let Rm,Px=!1,On=[];const Dm=e=>{const t=e.type;Om(Qs.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}})},Mx=e=>{if(e!==Px){const t=rt.DOM;e?(t.bind(window,"resize",Dm),t.bind(window,"scroll",Dm)):(t.unbind(window,"resize",Dm),t.unbind(window,"scroll",Dm)),Px=e}},Ix=e=>{const t=On;return On=ke(On,n=>e!==n),Qs.activeEditor===e&&(Qs.activeEditor=On.length>0?On[0]:null),Qs.focusedEditor===e&&(Qs.focusedEditor=null),t.length!==On.length},iD="CSS1Compat"!==document.compatMode,Qs={...Ap,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.3",releaseDate:"2024-02-08",i18n:nr,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",o=Ho.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)t=r.base||r.baseURL,n=r.suffix;else{const i=document.getElementsByTagName("script");for(let a=0;a<i.length;a++){const l=i[a].src||"";if(""===l)continue;const c=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==c.indexOf(".min")&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"));break}}if(!t&&document.currentScript){const a=document.currentScript.src;-1!==a.indexOf(".min")&&(n=".min"),t=a.substring(0,a.lastIndexOf("/"))}}var s;e.baseURL=new Ho(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Ho(e.baseURL),e.suffix=n,(s=e).on("AddEditor",se(gN,s)),s.on("RemoveEditor",se(hN,s))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const o=e.plugin_base_urls;void 0!==o&&tt(o,(r,s)=>{vn.PluginManager.urls[s]=r})},init(e){const t=this;let n;const o=X.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=i=>{n=i};const s=()=>{let i=0;const a=[];let l;var c;il.unbind(window,"ready",s),(c=>{const d=e.onpageload;d&&d.apply(t,[])})(),l=((c,d)=>{const u=[],f=Ke(d)?p=>dt(u,g=>d(g,p)):p=>ae(u,p);for(let p=0,g=c.length;p<g;p++){const b=c[p];f(b)||u.push(b)}return u})((c=e,Pe.browser.isIE()||Pe.browser.isEdge()?(Xu("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):iD?(Xu("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ge(c.selector)?il.select(c.selector):Q(c.target)?[c.target]:[])),X.each(l,c=>{var d;(d=t.get(c.id))&&d.initialized&&!(d.getContainer()||d.getBody()).parentNode&&(Ix(d),d.unbindAllNativeEvents(),d.destroy(!0),d.removed=!0)}),l=X.grep(l,c=>!t.get(c.id)),0===l.length?r([]):Om(l,c=>{e.inline&&c.tagName.toLowerCase()in o?Xu("Could not initialize inline editor on invalid inline target element",c):((d,u,f)=>{const p=new Tm(d,u,t);a.push(p),p.on("init",()=>{++i===l.length&&r(a)}),p.targetElm=p.targetElm||f,p.render()})((d=>{let u=d.id;return u||(u=nt(d,"name").filter(f=>!il.get(f)).getOrThunk(il.uniqueId),d.setAttribute("id",u)),u})(c),e,c)})};return il.bind(window,"ready",s),new Promise(i=>{n?i(n):r=a=>{i(a)}})},get(e){return 0===arguments.length?On.slice(0):ge(e)?Tt(On,t=>t.id===e).getOr(null):Dn(e)&&On[e]?On[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(null===n&&On.push(e),Mx(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Rm||(Rm=o=>{const r=t.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Rm))),e},createEditor(e,t){return this.add(new Tm(e,t,this))},remove(e){const t=this;let n;if(e){if(!ge(e))return n=e,ct(t.get(n.id))?null:(Ix(n)&&t.dispatch("RemoveEditor",{editor:n}),0===On.length&&window.removeEventListener("beforeunload",Rm),n.remove(),Mx(On.length>0),n);Om(il.select(e),o=>{n=t.get(o.id),n&&t.remove(n)})}else for(let o=On.length-1;o>=0;o--)t.remove(On[o])},execCommand(e,t,n){var o;const r=this,s=Vt(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(e){case"mceAddEditor":return r.get(s)||new Tm(s,n.options,r).render(),!0;case"mceRemoveEditor":{const i=r.get(s);return i&&i.remove(),!0}case"mceToggleEditor":{const i=r.get(s);return i?(i.isHidden()?i.show():i.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:()=>{Om(On,e=>{e.save()})},addI18n:(e,t)=>{nr.add(e,t)},translate:e=>nr.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Ho(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Ho(this.baseURL)}};Qs.setup();const aD=(()=>{const e=$s();return{FakeClipboardItem:t=>({items:t,types:on(t),getType:n=>nt(t,n).getOrUndefined()}),write:t=>{e.set(t)},read:()=>e.get().getOrUndefined(),clear:e.clear}})(),Fx=Math.min,al=Math.max,Bm=Math.round,jx=(e,t,n)=>{let o=t.x,r=t.y;const s=e.w,i=e.h,a=t.w,l=t.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(o+=a),"c"===c[0]&&(r+=Bm(l/2)),"c"===c[1]&&(o+=Bm(a/2)),"b"===c[3]&&(r-=i),"r"===c[4]&&(o-=s),"c"===c[3]&&(r-=Bm(i/2)),"c"===c[4]&&(o-=Bm(s/2)),ll(o,r,s,i)},ll=(e,t,n,o)=>({x:e,y:t,w:n,h:o}),lD={inflate:(e,t,n)=>ll(e.x-t,e.y-n,e.w+2*t,e.h+2*n),relativePosition:jx,findBestRelativePosition:(e,t,n,o)=>{for(let r=0;r<o.length;r++){const s=jx(e,t,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(e,t)=>{const n=al(e.x,t.x),o=al(e.y,t.y),r=Fx(e.x+e.w,t.x+t.w),s=Fx(e.y+e.h,t.y+t.h);return r-n<0||s-o<0?null:ll(n,o,r-n,s-o)},clamp:(e,t,n)=>{let o=e.x,r=e.y,s=e.x+e.w,i=e.y+e.h;const a=t.x+t.w,l=t.y+t.h,c=al(0,t.x-o),d=al(0,t.y-r),u=al(0,s-a),f=al(0,i-l);return o+=c,r+=d,n&&(s+=c,i+=d,o-=u,r-=f),s-=u,i-=f,ll(o,r,s-o,i-r)},create:ll,fromClientRect:e=>ll(e.left,e.top,e.width,e.height)},cD=(()=>{const e={},t={},n={};return{load:(o,r)=>{const s=`Script at URL "${r}" failed to load`,i=`Script at URL "${r}" did not call \`tinymce.Resource.add('${o}', data)\` within 1 second`;if(void 0!==e[o])return e[o];{const a=new Promise((l,c)=>{const d=((u,f,p=1e3)=>{let g=!1,b=null;const h=C=>(...k)=>{g||(g=!0,null!==b&&(clearTimeout(b),b=null),C.apply(null,k))},v=h(u),_=h(f);return{start:(...C)=>{g||null!==b||(b=setTimeout(()=>_.apply(null,C),p))},resolve:v,reject:_}})(l,c);t[o]=d.resolve,ss.ScriptLoader.loadScript(r).then(()=>d.start(i),()=>d.reject(s))});return e[o]=a,a}},add:(o,r)=>{void 0!==t[o]&&(t[o](r),delete t[o]),e[o]=Promise.resolve(r),n[o]=r},has:o=>o in n,get:o=>n[o],unload:o=>{delete e[o]}}})();let dd;try{const e="__storage_test__";dd=window.localStorage,dd.setItem(e,e),dd.removeItem(e)}catch{dd=(()=>{let t={},n=[];const o={getItem:r=>t[r]||null,setItem:(r,s)=>{n.push(r),t[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete t[r]},clear:()=>{n=[],t={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const dD={geom:{Rect:lD},util:{Delay:ho,Tools:X,VK:oe,URI:Ho,EventDispatcher:Np,Observable:Ap,I18n:nr,LocalStorage:dd,ImageUploader:e=>{const t=yC(),n=CC(e,t);return{upload:(o,r=!0)=>n.upload(o,r?_C(e):void 0)}}},dom:{EventUtils:ki,TreeWalker:Ot,TextSeeker:Ai,DOMUtils:rt,ScriptLoader:ss,RangeUtils:Mi,Serializer:cC,StyleSheetLoader:Sn,ControlSelection:Uv,BookmarkManager:Oc,Selection:lC,Event:ki.Event},html:{Styles:xi,Entities:Sr,Node:yn,Schema:co,DomParser:Xa,Writer:R0,Serializer:Ws},Env:Pe,AddOnManager:vn,Annotator:Dv,Formatter:xC,UndoManager:SC,EditorCommands:xx,WindowManager:pC,NotificationManager:hC,EditorObservable:Ax,Shortcuts:Bx,Editor:Tm,FocusManager:d0,EditorManager:Qs,DOM:rt.DOM,ScriptLoader:ss.ScriptLoader,PluginManager:Qa,ThemeManager:zi,ModelManager:Ga,IconManager:Ku,Resource:cD,FakeClipboard:aD,trim:X.trim,isArray:X.isArray,is:X.is,toArray:X.toArray,makeMap:X.makeMap,each:X.each,map:X.map,grep:X.grep,inArray:X.inArray,extend:X.extend,walk:X.walk,resolve:X.resolve,explode:X.explode,_addCacheSuffix:X._addCacheSuffix},$x=X.extend(Qs,dD);(e=>{window.tinymce=e,window.tinyMCE=e})($x),(e=>{if("object"==typeof module)try{module.exports=e}catch{}})($x)}();